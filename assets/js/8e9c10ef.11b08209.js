"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["24394"],{504242:function(e,d,i){i.r(d),i.d(d,{metadata:()=>r,contentTitle:()=>t,default:()=>h,assets:()=>o,toc:()=>l,frontMatter:()=>c});var r=JSON.parse('{"id":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u5E38\u89C1\u95EE\u9898","title":"ORM\u5E38\u89C1\u95EE\u9898","description":"\u5728\u4F7F\u7528GoFrame\u6846\u67B6\u8FDB\u884CORM\u64CD\u4F5C\u65F6\u53EF\u80FD\u9047\u5230\u7684\u51E0\u79CD\u5E38\u89C1\u95EE\u9898\u53CA\u5176\u89E3\u51B3\u65B9\u6848\uFF0C\u5305\u62EC\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u8FC7\u671F\u5BFC\u81F4\u7684\u8FDE\u63A5\u9519\u8BEF\u3001update\u548Cinsert\u64CD\u4F5C\u4E0D\u751F\u6548\u3001\u65E0\u6CD5\u627E\u5230\u6570\u636E\u5E93\u9A71\u52A8\u3001\u67E5\u8BE2\u6761\u4EF6\u5E26\u6709WHERE 0=1\u7684\u95EE\u9898\u4EE5\u53CAMySQL\u8868\u60C5\u5B58\u50A8\u4E71\u7801\u95EE\u9898\u7B49\u3002\u540C\u65F6\u7ED9\u51FA\u4E86\u4E00\u4E9B\u914D\u7F6E\u5EFA\u8BAE\u4EE5\u4F18\u5316\u4F7F\u7528\u4F53\u9A8C\u3002","source":"@site/docs/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u5E38\u89C1\u95EE\u9898.md","sourceDirName":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM","slug":"/docs/core/gdb-faq","permalink":"/docs/core/gdb-faq","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u5E38\u89C1\u95EE\u9898.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1734488168000,"sidebarPosition":11,"frontMatter":{"slug":"/docs/core/gdb-faq","title":"ORM\u5E38\u89C1\u95EE\u9898","sidebar_position":11,"hide_title":true,"keywords":["ORM\u5E38\u89C1\u95EE\u9898","GoFrame","GoFrame\u6846\u67B6","\u6570\u636E\u5E93\u8FDE\u63A5\u6C60","MaxLifeTime","SQL\u67E5\u8BE2","\u6570\u636E\u5E93\u9A71\u52A8","\u8C03\u8BD5\u65E5\u5FD7","\u7A7A\u6570\u7EC4\u6761\u4EF6","\u5B57\u7B26\u96C6\u8BBE\u7F6E"],"description":"\u5728\u4F7F\u7528GoFrame\u6846\u67B6\u8FDB\u884CORM\u64CD\u4F5C\u65F6\u53EF\u80FD\u9047\u5230\u7684\u51E0\u79CD\u5E38\u89C1\u95EE\u9898\u53CA\u5176\u89E3\u51B3\u65B9\u6848\uFF0C\u5305\u62EC\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u8FC7\u671F\u5BFC\u81F4\u7684\u8FDE\u63A5\u9519\u8BEF\u3001update\u548Cinsert\u64CD\u4F5C\u4E0D\u751F\u6548\u3001\u65E0\u6CD5\u627E\u5230\u6570\u636E\u5E93\u9A71\u52A8\u3001\u67E5\u8BE2\u6761\u4EF6\u5E26\u6709WHERE 0=1\u7684\u95EE\u9898\u4EE5\u53CAMySQL\u8868\u60C5\u5B58\u50A8\u4E71\u7801\u95EE\u9898\u7B49\u3002\u540C\u65F6\u7ED9\u51FA\u4E86\u4E00\u4E9B\u914D\u7F6E\u5EFA\u8BAE\u4EE5\u4F18\u5316\u4F7F\u7528\u4F53\u9A8C\u3002"},"sidebar":"mainSidebar","previous":{"title":"\u67E5\u8BE2\u65F6\u907F\u514D\u8FD4\u56DE\u5BF9\u8C61\u521D\u59CB\u5316\u53CAsql.ErrNoRows\u5224\u65AD","permalink":"/docs/core/gdb-practice-avoid-object-initialization-and-sql-errnorows-error"},"next":{"title":"I18N\u56FD\u9645\u5316","permalink":"/docs/core/gi18n"}}'),n=i("785893"),s=i("250065");let c={slug:"/docs/core/gdb-faq",title:"ORM\u5E38\u89C1\u95EE\u9898",sidebar_position:11,hide_title:!0,keywords:["ORM\u5E38\u89C1\u95EE\u9898","GoFrame","GoFrame\u6846\u67B6","\u6570\u636E\u5E93\u8FDE\u63A5\u6C60","MaxLifeTime","SQL\u67E5\u8BE2","\u6570\u636E\u5E93\u9A71\u52A8","\u8C03\u8BD5\u65E5\u5FD7","\u7A7A\u6570\u7EC4\u6761\u4EF6","\u5B57\u7B26\u96C6\u8BBE\u7F6E"],description:"\u5728\u4F7F\u7528GoFrame\u6846\u67B6\u8FDB\u884CORM\u64CD\u4F5C\u65F6\u53EF\u80FD\u9047\u5230\u7684\u51E0\u79CD\u5E38\u89C1\u95EE\u9898\u53CA\u5176\u89E3\u51B3\u65B9\u6848\uFF0C\u5305\u62EC\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u8FC7\u671F\u5BFC\u81F4\u7684\u8FDE\u63A5\u9519\u8BEF\u3001update\u548Cinsert\u64CD\u4F5C\u4E0D\u751F\u6548\u3001\u65E0\u6CD5\u627E\u5230\u6570\u636E\u5E93\u9A71\u52A8\u3001\u67E5\u8BE2\u6761\u4EF6\u5E26\u6709WHERE 0=1\u7684\u95EE\u9898\u4EE5\u53CAMySQL\u8868\u60C5\u5B58\u50A8\u4E71\u7801\u95EE\u9898\u7B49\u3002\u540C\u65F6\u7ED9\u51FA\u4E86\u4E00\u4E9B\u914D\u7F6E\u5EFA\u8BAE\u4EE5\u4F18\u5316\u4F7F\u7528\u4F53\u9A8C\u3002"},t=void 0,o={},l=[{value:"<code>ORM</code>\u662F\u5426\u53EF\u4EE5\u76F4\u63A5\u6267\u884CSQL\u6587\u4EF6",id:"orm\u662F\u5426\u53EF\u4EE5\u76F4\u63A5\u6267\u884Csql\u6587\u4EF6",level:2},{value:"<code>driver: bad connection</code>",id:"driver-bad-connection",level:2},{value:"<code>update/insert</code> \u64CD\u4F5C\u4E0D\u751F\u6548",id:"updateinsert-\u64CD\u4F5C\u4E0D\u751F\u6548",level:2},{value:"<code>cannot find database driver for specified database type &quot;xxx&quot;\uFF0C did you misspell type name &quot;xxx&quot; or forget importing the database driver?</code>",id:"cannot-find-database-driver-for-specified-database-type-xxx-did-you-misspell-type-name-xxx-or-forget-importing-the-database-driver",level:2},{value:"\u6570\u636E\u5E93\u6253\u5F00 <code>DEBUG</code> \u65E5\u5FD7\u540E\uFF0C\u67E5\u8BE2\u7684 <code>SQL</code> \u8BED\u53E5\u4E2D\u53D1\u73B0\u51FA\u73B0 <code>WHERE 0=1</code> \u7684\u8BED\u53E5",id:"\u6570\u636E\u5E93\u6253\u5F00-debug-\u65E5\u5FD7\u540E\u67E5\u8BE2\u7684-sql-\u8BED\u53E5\u4E2D\u53D1\u73B0\u51FA\u73B0-where-01-\u7684\u8BED\u53E5",level:2},{value:"MYSQL\u4E2D\u7684\u8868\u60C5,\u7528SQL\u67E5\u8BE2\u540E,\u4E71\u7801\u95EE\u9898",id:"mysql\u4E2D\u7684\u8868\u60C5\u7528sql\u67E5\u8BE2\u540E\u4E71\u7801\u95EE\u9898",level:2}];function a(e){let d={a:"a",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.h2,{id:"orm\u662F\u5426\u53EF\u4EE5\u76F4\u63A5\u6267\u884Csql\u6587\u4EF6",children:[(0,n.jsx)(d.code,{children:"ORM"}),"\u662F\u5426\u53EF\u4EE5\u76F4\u63A5\u6267\u884CSQL\u6587\u4EF6"]}),"\n",(0,n.jsxs)(d.ol,{children:["\n",(0,n.jsxs)(d.li,{children:["\u9996\u5148\uFF0C",(0,n.jsx)(d.code,{children:"ORM"}),"\u5E95\u5C42\u4F9D\u8D56\u7684\u6570\u636E\u5E93",(0,n.jsx)(d.code,{children:"driver"}),"\u4ECE\u5B89\u5168\u6027\u8003\u8651\uFF0C\u901A\u5E38\u9ED8\u8BA4\u4E0D\u652F\u6301\u540C\u65F6\u6267\u884C\u591A\u6761",(0,n.jsx)(d.code,{children:"SQL"}),"\u8BED\u53E5\u3002\u4F60\u53EF\u4EE5\u8BFB\u53D6",(0,n.jsx)(d.code,{children:"SQL"}),"\u6587\u4EF6\u5185\u5BB9\uFF0C\u5C06\u5185\u5BB9\u62C6\u5206\u4E3A\u5355\u6761",(0,n.jsx)(d.code,{children:"SQL"}),"\u8BED\u53E5\uFF08\u901A\u8FC7",(0,n.jsx)(d.code,{children:";"}),"\u5206\u9694\u7B26\u53F7\u5206\u9694\u591A\u6761",(0,n.jsx)(d.code,{children:"SQL"}),"\u8BED\u53E5\uFF09\uFF0C\u7136\u540E\u8C03\u7528",(0,n.jsx)(d.code,{children:"ORM"}),"\u7684",(0,n.jsx)(d.code,{children:"Exec"}),"\u65B9\u6CD5\u6765\u6267\u884C\u3002"]}),"\n",(0,n.jsxs)(d.li,{children:["\u5176\u6B21\uFF0C\u5982\u679C\u4F60\u60F3\u8981\u5141\u8BB8\u5E95\u5C42",(0,n.jsx)(d.code,{children:"driver"}),"\u4E00\u6B21\u6027\u6267\u884C\u591A\u6761",(0,n.jsx)(d.code,{children:"SQL"}),"\u8BED\u53E5\uFF0C\u53EF\u4EE5\u53C2\u8003\u5E95\u5C42",(0,n.jsx)(d.code,{children:"driver"}),"\u7684\u914D\u7F6E\uFF0C\u6BD4\u5982",(0,n.jsx)(d.code,{children:"mysql"}),"\u7684\u914D\u7F6E\uFF0C\u53EF\u4EE5\u8BBE\u7F6E",(0,n.jsx)(d.code,{children:"multiStatements=true"}),"(\u53C2\u8003",(0,n.jsx)(d.a,{href:"https://github.com/go-sql-driver/mysql?tab=readme-ov-file#multistatements",children:"mysql-driver\u914D\u7F6E"}),")\uFF0C\u8FD9\u6837",(0,n.jsx)(d.code,{children:"ORM"}),"\u7684",(0,n.jsx)(d.code,{children:"Exec"}),"\u65B9\u6CD5\u5C31\u53EF\u4EE5\u6267\u884C\u591A\u6761",(0,n.jsx)(d.code,{children:"SQL"}),"\u8BED\u53E5\u4E86\u3002\u914D\u7F6E\u9879\u793A\u4F8B\uFF1A","\n",(0,n.jsx)(d.pre,{children:(0,n.jsx)(d.code,{className:"language-yaml",children:'database:\n    default:\n        link: "mysql:root:123456@tcp(127.0.0.1:3306)/test?charset=utf8mb4&parseTime=True&loc=Local&multiStatements=true"\n'})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(d.h2,{id:"driver-bad-connection",children:(0,n.jsx)(d.code,{children:"driver: bad connection"})}),"\n",(0,n.jsx)(d.p,{children:(0,n.jsx)(d.img,{src:i(391141).Z+"",width:"3440",height:"808"})}),"\n",(0,n.jsxs)(d.p,{children:["\u5982\u679C\u6570\u636E\u5E93\u6267\u884C\u51FA\u73B0\u8BE5\u9519\u8BEF\uFF0C\u53EF\u80FD\u662F\u7531\u4E8E\u672C\u5730\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u7684\u8FDE\u63A5\u5DF2\u7ECF\u8FC7\u671F\uFF0C\u53EF\u4EE5\u68C0\u67E5\u4E00\u4E0B\u5BA2\u6237\u7AEF\u914D\u7F6E\u7684 ",(0,n.jsx)(d.code,{children:"MaxLifeTime"})," \u914D\u7F6E\u662F\u5426\u8D85\u8FC7\u6570\u636E\u5E93\u670D\u52A1\u7AEF\u8BBE\u7F6E\u7684\u8FDE\u63A5\u6700\u5927\u8D85\u65F6\u65F6\u95F4\u3002\u66F4\u591A\u5BA2\u6237\u7AEF\u914D\u7F6E\u8BF7\u53C2\u8003\u7AE0\u8282\uFF1A ",(0,n.jsx)(d.a,{href:"/docs/core/gdb-config",children:"ORM\u4F7F\u7528\u914D\u7F6E"})]}),"\n",(0,n.jsxs)(d.h2,{id:"updateinsert-\u64CD\u4F5C\u4E0D\u751F\u6548",children:[(0,n.jsx)(d.code,{children:"update/insert"})," \u64CD\u4F5C\u4E0D\u751F\u6548"]}),"\n",(0,n.jsxs)(d.p,{children:["\u4F7F\u7528 ",(0,n.jsx)(d.code,{children:"orm"})," \u65F6,\u914D\u7F6E\u6587\u4EF6\u4E2D\uFF1A"]}),"\n",(0,n.jsx)(d.pre,{children:(0,n.jsx)(d.code,{className:"language-toml",children:'dryRun = "(\u53EF\u9009)ORM\u7A7A\u8DD1(\u53EA\u8BFB\u4E0D\u5199)"\n'})}),"\n",(0,n.jsx)(d.p,{children:"\u8FD9\u884C\u914D\u7F6E\u4E00\u5B9A\u8981\u5220\u6389\u6216\u8005\u8BBE\u7F6E\u4E3A0"}),"\n",(0,n.jsxs)(d.p,{children:["\u5426\u5219\u51FA\u73B0 ",(0,n.jsx)(d.code,{children:"update insert"})," \u64CD\u4F5C\u4E0D\u751F\u6548\u7684\u73B0\u8C61\u3002"]}),"\n",(0,n.jsx)(d.h2,{id:"cannot-find-database-driver-for-specified-database-type-xxx-did-you-misspell-type-name-xxx-or-forget-importing-the-database-driver",children:(0,n.jsx)(d.code,{children:'cannot find database driver for specified database type "xxx"\uFF0C did you misspell type name "xxx" or forget importing the database driver?'})}),"\n",(0,n.jsxs)(d.p,{children:["\u7A0B\u5E8F\u4EE3\u7801\u6CA1\u6709\u5F15\u5165\u4F9D\u8D56\u7684\u6570\u636E\u5E93\u9A71\u52A8\uFF0C\u9700\u8981\u6CE8\u610F\u4ECE ",(0,n.jsx)(d.code,{children:"GoFrame v2.1"})," \u7248\u672C\u5F00\u59CB\uFF0C\u9700\u8981\u624B\u52A8\u5F15\u5165\u793E\u533A\u9A71\u52A8\uFF0C\u8BF7\u53C2\u8003\uFF1A"]}),"\n",(0,n.jsxs)(d.ul,{children:["\n",(0,n.jsx)(d.li,{children:(0,n.jsx)(d.a,{href:"https://github.com/gogf/gf/tree/master/contrib/drivers",children:"https://github.com/gogf/gf/tree/master/contrib/drivers"})}),"\n"]}),"\n",(0,n.jsxs)(d.h2,{id:"\u6570\u636E\u5E93\u6253\u5F00-debug-\u65E5\u5FD7\u540E\u67E5\u8BE2\u7684-sql-\u8BED\u53E5\u4E2D\u53D1\u73B0\u51FA\u73B0-where-01-\u7684\u8BED\u53E5",children:["\u6570\u636E\u5E93\u6253\u5F00 ",(0,n.jsx)(d.code,{children:"DEBUG"})," \u65E5\u5FD7\u540E\uFF0C\u67E5\u8BE2\u7684 ",(0,n.jsx)(d.code,{children:"SQL"})," \u8BED\u53E5\u4E2D\u53D1\u73B0\u51FA\u73B0 ",(0,n.jsx)(d.code,{children:"WHERE 0=1"})," \u7684\u8BED\u53E5"]}),"\n",(0,n.jsxs)(d.p,{children:["\u51FA\u73B0 ",(0,n.jsx)(d.code,{children:"WHERE 0=1"})," \u7684\u60C5\u51B5\u662F\u7531\u4E8E\u67E5\u8BE2\u6761\u4EF6\u4E2D\u5B58\u5728\u6570\u7EC4\u6761\u4EF6\uFF0C\u5E76\u4E14\u6570\u7EC4\u7684\u957F\u5EA6\u4E3A ",(0,n.jsx)(d.code,{children:"0"}),"\u3002\u8FD9\u79CD\u60C5\u51B5 ",(0,n.jsx)(d.code,{children:"ORM"})," \u65E0\u6CD5\u81EA\u52A8\u8FC7\u6EE4\u8FD9\u79CD\u7A7A\u6570\u7EC4\u6761\u4EF6\uFF08\u8FD9\u79CD\u6761\u4EF6\u8FC7\u6EE4\u53EF\u80FD\u4F1A\u5F15\u8D77\u4E1A\u52A1\u5F02\u5E38\uFF09\uFF0C\u9700\u8981\u5F00\u53D1\u8005\u6839\u636E\u4E1A\u52A1\u573A\u666F\uFF0C\u663E\u793A\u8C03\u7528 ",(0,n.jsx)(d.code,{children:"OmitEmpty"})," \u6216\u8005 ",(0,n.jsx)(d.code,{children:"OmitEmptyWhere"})," \u6765\u544A\u8BC9 ",(0,n.jsx)(d.code,{children:"ORM"})," \u53EF\u4EE5\u8FC7\u6EE4\u8FD9\u4E9B\u7A7A\u6570\u7EC4\u7684\u6761\u4EF6\u3002"]}),"\n",(0,n.jsx)(d.h2,{id:"mysql\u4E2D\u7684\u8868\u60C5\u7528sql\u67E5\u8BE2\u540E\u4E71\u7801\u95EE\u9898",children:"MYSQL\u4E2D\u7684\u8868\u60C5,\u7528SQL\u67E5\u8BE2\u540E,\u4E71\u7801\u95EE\u9898"}),"\n",(0,n.jsx)(d.p,{children:(0,n.jsx)(d.img,{src:i(40736).Z+"",width:"242",height:"87"})}),"\n",(0,n.jsx)(d.p,{children:"\u89E3\u51B3\u529E\u6CD5:"}),"\n",(0,n.jsxs)(d.p,{children:[(0,n.jsx)(d.code,{children:"config.toml"})," \u6587\u4EF6 \u6570\u636E\u5E93\u914D\u7F6E\u7684 ",(0,n.jsx)(d.code,{children:"charset"})," \u8BBE\u7F6E\u4E3A ",(0,n.jsx)(d.code,{children:"utf8mb4"})," \u9ED8\u8BA4\u662F ",(0,n.jsx)(d.code,{children:"utf8"})]}),"\n",(0,n.jsxs)(d.p,{children:[(0,n.jsx)(d.code,{children:"MySQL"})," \u5B58\u50A8\u8868\u60C5\u65F6\u6CE8\u610F\uFF1A"]}),"\n",(0,n.jsxs)(d.ul,{children:["\n",(0,n.jsxs)(d.li,{children:["\u6570\u636E\u5E93\u7F16\u7801 ",(0,n.jsx)(d.code,{children:"utf8mb4"})]}),"\n",(0,n.jsxs)(d.li,{children:["\u8868\u7684\u7F16\u7801\u662F ",(0,n.jsx)(d.code,{children:"utf8mb4"})]}),"\n",(0,n.jsxs)(d.li,{children:["\u8868\u4E2D\u5185\u5BB9\u5B57\u6BB5\u662F ",(0,n.jsx)(d.code,{children:"utf8mb4"})]}),"\n"]})]})}function h(e={}){let{wrapper:d}={...(0,s.a)(),...e.components};return d?(0,n.jsx)(d,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},391141:function(e,d,i){i.d(d,{Z:function(){return r}});let r=i.p+"assets/images/7b384b6f57115b11938d9c0a30dde732-2f9af306f3cbc5efe6a8eb12f1a5eb95.png"},40736:function(e,d,i){i.d(d,{Z:function(){return r}});let r=i.p+"assets/images/867e951b823bb2652a6b7d62f70a1ff3-81f4a16885143f2c2f2bcc8f52a64e10.png"},250065:function(e,d,i){i.d(d,{Z:function(){return t},a:function(){return c}});var r=i(667294);let n={},s=r.createContext(n);function c(e){let d=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(d):{...d,...e}},[d,e])}function t(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),r.createElement(s.Provider,{value:d},e.children)}}}]);