"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["82304"],{942228:function(e,n,r){r.r(n),r.d(n,{metadata:()=>o,contentTitle:()=>s,default:()=>p,assets:()=>c,toc:()=>l,frontMatter:()=>a});var o=JSON.parse('{"id":"course/proxima-book/\u7B2C\u56DB\u7AE0-\u4E1A\u52A1\u7F51\u5173/4.5.\u8C03\u7528\u5FAE\u670D\u52A1","title":"4.5.\u8C03\u7528\u5FAE\u670D\u52A1","description":"\u8BE6\u7EC6\u8BF4\u660E\u4E86\u5982\u4F55\u5728\u4E1A\u52A1\u7F51\u5173\u4E2D\u8C03\u7528\u5FAE\u670D\u52A1\uFF0C\u5305\u62EC\u7528\u6237\u670D\u52A1\u548C\u5355\u8BCD\u670D\u52A1\u7684\u8C03\u7528\u5B9E\u73B0\uFF0C\u4EE5\u53CA\u4E1A\u52A1\u903B\u8F91\u7684\u5C01\u88C5\u65B9\u5F0F\u3002","source":"@site/docs/course/proxima-book/\u7B2C\u56DB\u7AE0-\u4E1A\u52A1\u7F51\u5173/4.5.\u8C03\u7528\u5FAE\u670D\u52A1.md","sourceDirName":"course/proxima-book/\u7B2C\u56DB\u7AE0-\u4E1A\u52A1\u7F51\u5173","slug":"/course/proxima-book/gateway-call","permalink":"/course/proxima-book/gateway-call","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/course/proxima-book/\u7B2C\u56DB\u7AE0-\u4E1A\u52A1\u7F51\u5173/4.5.\u8C03\u7528\u5FAE\u670D\u52A1.md","tags":[],"version":"current","lastUpdatedBy":"oldme","lastUpdatedAt":1734398801000,"frontMatter":{"title":"4.5.\u8C03\u7528\u5FAE\u670D\u52A1","hide_title":true,"slug":"/course/proxima-book/gateway-call","keywords":["GoFrame","microservices integration","service invocation","gRPC communication","gateway implementation","service orchestration"],"description":"\u8BE6\u7EC6\u8BF4\u660E\u4E86\u5982\u4F55\u5728\u4E1A\u52A1\u7F51\u5173\u4E2D\u8C03\u7528\u5FAE\u670D\u52A1\uFF0C\u5305\u62EC\u7528\u6237\u670D\u52A1\u548C\u5355\u8BCD\u670D\u52A1\u7684\u8C03\u7528\u5B9E\u73B0\uFF0C\u4EE5\u53CA\u4E1A\u52A1\u903B\u8F91\u7684\u5C01\u88C5\u65B9\u5F0F\u3002"},"sidebar":"courseProximaBookSidebar","previous":{"title":"4.4.\u5C01\u88C5gRPC\u5BA2\u6237\u7AEF","permalink":"/course/proxima-book/gateway-client"},"next":{"title":"\u7B2C\u4E94\u7AE0-\u8FDB\u4E00\u6B65\u7684\u65B9\u5411","permalink":"/course/proxima-book/appendix"}}'),t=r("785893"),i=r("250065");let a={title:"4.5.\u8C03\u7528\u5FAE\u670D\u52A1",hide_title:!0,slug:"/course/proxima-book/gateway-call",keywords:["GoFrame","microservices integration","service invocation","gRPC communication","gateway implementation","service orchestration"],description:"\u8BE6\u7EC6\u8BF4\u660E\u4E86\u5982\u4F55\u5728\u4E1A\u52A1\u7F51\u5173\u4E2D\u8C03\u7528\u5FAE\u670D\u52A1\uFF0C\u5305\u62EC\u7528\u6237\u670D\u52A1\u548C\u5355\u8BCD\u670D\u52A1\u7684\u8C03\u7528\u5B9E\u73B0\uFF0C\u4EE5\u53CA\u4E1A\u52A1\u903B\u8F91\u7684\u5C01\u88C5\u65B9\u5F0F\u3002"},s=void 0,c={},l=[{value:"\u7528\u6237\u670D\u52A1",id:"\u7528\u6237\u670D\u52A1",level:2},{value:"\u5355\u8BCD\u670D\u52A1",id:"\u5355\u8BCD\u670D\u52A1",level:2}];function d(e){let n={blockquote:"blockquote",code:"code",em:"em",h2:"h2",hr:"hr",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u8981\u5728\u63A7\u5236\u5668\u91CC\u8C03\u7528\u5FAE\u670D\u52A1\uFF0C\u5B8C\u6210\u5177\u4F53\u7684\u4E1A\u52A1\u903B\u8F91\u3002"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["\u5B9E\u9645\u5F00\u53D1\u4E2D\uFF0C\u590D\u6742\u4E1A\u52A1\u903B\u8F91\u9700\u8981\u5C01\u88C5\u5230",(0,t.jsx)(n.code,{children:"logic"}),"\u4E2D\uFF0C\u50CF",(0,t.jsx)(n.code,{children:"Web"}),"\u5355\u4F53\u670D\u52A1\u4E00\u6837\uFF0C\u7531\u63A7\u5236\u5668\u8C03\u7528\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u7528\u6237\u670D\u52A1",children:"\u7528\u6237\u670D\u52A1"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"app/gateway/internal/controller/user/user_v1_login.go"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'package user  \n  \nimport (  \n    "context"  \n  \n    account "proxima/app/user/api/account/v1"  \n  \n    "proxima/app/gateway/api/user/v1"\n)  \n  \nfunc (c *ControllerV1) Login(ctx context.Context, req *v1.LoginReq) (res *v1.LoginRes, err error) {  \n    user, err := c.AccountClient.UserLogin(ctx, &account.UserLoginReq{  \n       Username: req.Username,  \n       Password: req.Password,  \n    })  \n  \n    if err != nil {  \n       return nil, err  \n    }  \n  \n    return &v1.LoginRes{  \n       Token: user.GetToken(),  \n    }, nil  \n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u53D1\u8D77\u8BF7\u6C42\u6D4B\u8BD5\uFF0C\u7F51\u5173\u8C03\u7528\u5FAE\u670D\u52A1\u662F\u5426\u6210\u529F\uFF1A"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'$ curl -X POST http://127.0.0.1:8000/v1/users/login \\\n     -H "Content-Type: application/json" \\\n     -d \'{\n           "username": "oldme",\n           "password": "12345678"\n         }\'\n\n{\n\xa0   "code": 0,\n\xa0   "message": "",\n\xa0   "data": {\n\xa0       "token": "I am token"\n\xa0   }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u770B\u5230\u8FD9\u4E2A\u8FD4\u56DE\u7ED3\u679C\uFF0C\u606D\u559C\u60A8\uFF0C\u5927\u529F\u544A\u6210\u3002\u63A5\u4E0B\u6765\uFF0C\u60A8\u53EF\u4EE5\u5C1D\u8BD5\u628A\u5176\u4ED6\u7684\u51E0\u4E2A\u670D\u52A1\u4E5F\u5F00\u53D1\u51FA\u6765\u3002\u8FD9\u91CC\u6211\u8D34\u51FA\u6E90\u7801\uFF0C\u60A8\u53EF\u4EE5\u5BF9\u7167\u7740\u770B\u770B\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u5355\u8BCD\u670D\u52A1",children:"\u5355\u8BCD\u670D\u52A1"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"app/gateway/internal/controller/words/words_v1_create.go"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'package words  \n  \nimport (  \n    "context"  \n  \n    words "proxima/app/word/api/words/v1"  \n  \n    "proxima/app/gateway/api/words/v1"\n)  \n  \nfunc (c *ControllerV1) Create(ctx context.Context, req *v1.CreateReq) (res *v1.CreateRes, err error) {  \n    _, err = c.WordsClient.Create(ctx, &words.CreateReq{  \n       Uid:        1,  \n       Word:       req.Word,  \n       Definition: req.Definition,  \n    })  \n  \n    if err != nil {  \n       return nil, err  \n    }  \n  \n    return &v1.CreateRes{}, nil  \n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"app/gateway/internal/controller/words/words_v1_detail.go"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'package words  \n  \nimport (  \n    "context"  \n  \n    "github.com/gogf/gf/v2/errors/gerror"\n    words "proxima/app/word/api/words/v1"  \n  \n    "proxima/app/gateway/api/words/v1"\n)  \n  \nfunc (c *ControllerV1) Detail(ctx context.Context, req *v1.DetailReq) (res *v1.DetailRes, err error) {  \n    word, err := c.WordsClient.Get(ctx, &words.GetReq{  \n       Id: uint32(req.Id),  \n    })  \n  \n    if err != nil {  \n       return nil, err  \n    }  \n  \n    if word == nil {  \n       return nil, gerror.New("word not found")  \n    }  \n  \n    return &v1.DetailRes{  \n       Id:         uint(word.Words.Id),  \n       Word:       word.Words.Word,  \n       Definition: word.Words.Definition,  \n    }, nil  \n}\n'})})]})}function p(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},250065:function(e,n,r){r.d(n,{Z:function(){return s},a:function(){return a}});var o=r(667294);let t={},i=o.createContext(t);function a(e){let n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);