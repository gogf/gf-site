---
slug: '/docs/design/error-stack'
title: 'Full Error Stack Trace Design'
sidebar_position: 5
hide_title: true
---

## 1. Project Error Handling Pain Points

In business projects, we often encounter the following pain points.

### 1. Lack of Unified Error Handling Scheme, Ubiquitous Logging in Code

To facilitate problem location when an interface fails, logging is ubiquitous in the code, which is considered a matter of course. However, the unregulated large volume of logs not only increases the maintenance workload but often fails to achieve its intended purpose.

### 2. Lack of Error Stack Trace After Request Execution Failure, Difficult to Quickly Locate Issues

As shown below, when an `error` level error occurs at the bottom layer, only an error message is seen at the top layer. How can we troubleshoot this?

![](/markdown/d0a2ecfa83e3b3107e38a519bacf0f17.png)

A real-world case screenshot for troubleshooting

### 3. Errors Returned by Third-Party Components Do Not Come with Stack Trace Information

Not only third-party components, but even the standard library's methods return `error` without stack trace information, which poses a significant challenge for unified error handling in the business layer. Almost all business layer code that calls back errors needs to be wrapped again with a method similar to `Wrap` to facilitate the business layer's own implementation of error stack trace returns. This maintenance cost is relatively high and can only be manually ensured through `CodeReview`. It's easy to miss the `Wrap` processing if not careful.

### 4. Diverse Error Components, and Projects Often Unnecessarily Encapsulate Another Layer

There are many third-party components for error handling. How to choose? Even business projects often want to encapsulate another layer, further increasing the maintenance cost of error handling components.

## 2. Framework Full Error Stack Trace Design

### 1. Unified Error Component

The `GoFrame` framework provides the most powerful error handling component in the industry, which is also the widely used error component within the framework, reducing the choice cost for business teams.

### 2. Unified Error Handling Scheme

The `GoFrame` framework provides strong engineering design specifications, including a necessary unified error handling scheme. Following the unified framework's engineering design, some common pain points have been solved through components and tools, allowing business teams to focus on the business itself, making development work more efficient.

Under the unified error handling scheme, all method calls in the project will use the `error` return value as the basis for successful execution. If the `error` is not `nil`, return promptly and pass it up layer by layer,ç»Ÿä¸€ do error handling at the top layer. Moreover, the framework's key components already provide default error handling logic.

![](/markdown/0237be84e57c222bd476dad67a883253.png)

### 3. Full Component Support for Stack Trace Errors

ðŸ”¥ All basic components of the `GoFrame` framework's `error` return objects come with error stack traces! ðŸ”¥

ðŸ”¥ All basic components of the `GoFrame` framework's `error` return objects come with error stack traces! ðŸ”¥

ðŸ”¥ All basic components of the `GoFrame` framework's `error` return objects come with error stack traces! ðŸ”¥

ðŸ”¥ Important things are said three times! ðŸ”¥

This is a difficult thing to achieve because the components provided by the framework can cover almost all the needs of most business projects, but the framework has indeed done it. Although the framework's investment in this area is relatively large (a separate version was implemented for this feature), it is a one-time investment with long-term benefits. This means that if business projects use the unified `GoFrame` basic framework, error handling will be more convenient, the risk of losing error stack traces will be greatly reduced, and the project will be more robust and easy to troubleshoot quickly.

### 4. Key Components Support Error Stack Trace Printing

In the framework's key components, default handling for error stack trace printing is provided to improve usability and simplify the burden on users. These key components are the entry points of the program, such as `HTTP/GRPC Server`, `Command` command line.
