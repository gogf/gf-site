<!doctype html><html lang=en-US dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-community/社区投稿/Go语言中何时使用panic是合适的" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>When to Use Panic? Deep Dive into Go Error Handling Best Practices | GoFrame - A powerful framework for faster, easier, and more efficient project development</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://goframe.org/en/articles/when-to-use-panic-in-go><meta data-rh=true property=og:locale content=en_US><meta data-rh=true property=og:locale:alternate content=zh_Hans><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="When to Use Panic? Deep Dive into Go Error Handling Best Practices | GoFrame - A powerful framework for faster, easier, and more efficient project development"><meta data-rh=true name=description content="A deep dive into when to use panic instead of returning errors in Go, analyzing the differences between expected errors and code defects, and exploring best error handling strategies in safety checks, configuration loading, and other scenarios."><meta data-rh=true property=og:description content="A deep dive into when to use panic instead of returning errors in Go, analyzing the differences between expected errors and code defects, and exploring best error handling strategies in safety checks, configuration loading, and other scenarios."><meta data-rh=true name=keywords content="GoFrame,panic,recover,error handling,code defects,expected errors,Go best practices,safety checks"><link data-rh=true rel=icon href=/en/img/favicon.ico><link data-rh=true rel=canonical href=https://goframe.org/en/articles/when-to-use-panic-in-go><link data-rh=true rel=alternate href=https://goframe.org/articles/when-to-use-panic-in-go hreflang=zh-Hans><link data-rh=true rel=alternate href=https://goframe.org/en/articles/when-to-use-panic-in-go hreflang=en-US><link data-rh=true rel=alternate href=https://goframe.org/articles/when-to-use-panic-in-go hreflang=x-default><link data-rh=true rel=preconnect href=https://ZQUL8VI47R-dsn.algolia.net crossorigin><link rel=search type=application/opensearchdescription+xml title="GoFrame - A powerful framework for faster, easier, and more efficient project development" href=/en/opensearch.xml><script src=https://hm.baidu.com/hm.js?38f38a0626fd7805722db06243cd0fa7 async></script><script src=https://cdn.wwads.cn/js/makemoney.js async></script><link rel=stylesheet href=/en/assets/css/styles.6c91788d.css><script src=/en/assets/js/runtime~main.b16cb8a4.js defer></script><script src=/en/assets/js/main.659ae798.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/en/><div class=navbar__logo><img src=/en/img/logo2.png alt="GoFrame Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/en/img/logo2.png alt="GoFrame Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" sidebarid=quickSidebar href=/en/quick/install>Quick Start</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/en/docs/core>Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button sidebarid=courseSidebar href=/en/course>Courses</a><ul class=dropdown__menu><li><a class=dropdown__link sidebarid=courseSidebar href=/en/course/bilibili-video>Video Tutorial(Chinese)</a><li><a class=dropdown__link sidebarid=courseStarBookSidebar href=/en/course/starbook>Practical Tutorial - Star English Book</a><li><a class=dropdown__link sidebarid=courseProximaBookSidebar href=/en/course/proxima-book>Microservice Tutorial - Proxima Book</a></ul></div><a class="navbar__item navbar__link" href=/en/examples/grpc>Examples</a><a class="navbar__item navbar__link" href=/en/showcase>Show Case</a><a class="navbar__item navbar__link" href=/en/release/note>Release</a><a class="navbar__item navbar__link" sidebarid=communitySidebar href=/en/share/group>Community</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/en/articles/when-to-use-panic-in-go>2.8.x(Latest)</a><ul class=dropdown__menu><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/en/articles/when-to-use-panic-in-go>2.8.x(Latest)</a><li><a class=dropdown__link href=/en/2.8.x/docs/cli>2.8.x</a><li><a class=dropdown__link href=/en/2.7.x/docs/design>2.7.x</a><li><a class=dropdown__link href=/en/2.6.x/项目开发>2.6.x</a><li><a class=dropdown__link href=/en/2.5.x/项目开发>2.5.x</a><li><a class=dropdown__link href=/en/2.4.x/开发工具>2.4.x</a><li><a class=dropdown__link href=/en/2.3.x/开发工具>2.3.x</a><li><a class=dropdown__link href=/en/2.2.x/开发工具>2.2.x</a><li><a class=dropdown__link href=/en/2.1.x/开发工具>2.1.x</a><li><a class=dropdown__link href=/en/2.0.x/开发工具>2.0.x</a><li><a class=dropdown__link href=/en/1.16.x/开发工具>1.16.x</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/articles/when-to-use-panic-in-go rel="noopener noreferrer" class=dropdown__link lang=zh-Hans>简体中文</a><li><a href=/en/articles/when-to-use-panic-in-go rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en-US>English</a></ul></div><a href=https://github.com/gogf/gf target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/share>Community Exchange</a><button aria-label="Expand sidebar category 'Community Exchange'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/supportus>Support Us</a><button aria-label="Expand sidebar category 'Support Us'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/en/articles>Community Articles</a><button aria-label="Collapse sidebar category 'Community Articles'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/articles/framework-comparison-goframe-beego-iris-gin>Golang Framework Comparison: GoFrame, Beego, Iris and Gin</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/articles/database-transaction-practice>Go Transaction Processing Best Practices: The Right Way to Ensure Data Consistency</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/articles/use-error-code-gracefully-in-golang>How to Use Error Codes Gracefully in Go Development</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/en/articles/when-to-use-panic-in-go>When to Use Panic? Deep Dive into Go Error Handling Best Practices</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/articles/sql-migrate-database-migration>SQL Migrate Database Migration and Version Management: Effective Methods for Managing Database Structure Changes</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/articles/techempower-web-benchmarks-r23>TechEmpower Web Benchmarks Latest Performance Evaluation</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/articles/rbac-permission-authentication-in-goframe>Implementing Complete Permission Authentication in Go Applications</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/articles/go-sse-implementation-guide>Building High-Performance Real-Time Communication: Go Language SSE Implementation Guide</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/articles/database-sharding-in-go>Database Sharding in Go: A Practical E-commerce Case Study</a></ul></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/en/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/en/articles><span itemprop=name>Community Articles</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>When to Use Panic? Deep Dive into Go Error Handling Best Practices</span><meta itemprop=position content=2></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.8.x(Latest)</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id=comparing-panic-and-error-returns>Comparing panic and Error Returns<a href=#comparing-panic-and-error-returns class=hash-link aria-label="Direct link to Comparing panic and Error Returns" title="Direct link to Comparing panic and Error Returns">​</a></h2>
<p>Let's start with a simple example. Suppose we want to create a <code>timeIn</code> function that takes a timezone name and returns the current time in that timezone.</p>
<p>In <code>Go</code>, when the <code>timeIn</code> function encounters an error, the standard practice is to return the error to the caller, allowing them to decide how to handle it. The code looks like this:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>package</span><span class="token plain"> main</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token string" style=color:#a6e22e>"fmt"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token string" style=color:#a6e22e>"os"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token string" style=color:#a6e22e>"time"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>func</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>timeIn</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">zone </span><span class="token builtin" style=color:#e6db74>string</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">time</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Time</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token builtin" style=color:#e6db74>error</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    loc</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> err </span><span class="token operator" style=color:#66d9ef>:=</span><span class="token plain"> time</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>LoadLocation</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">zone</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> err </span><span class="token operator" style=color:#66d9ef>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#ae81ff>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> time</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Time</span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> err  </span><span class="token comment" style=color:#8292a2;font-style:italic>// Return any error produced by time.LoadLocation()</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> time</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>Now</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>In</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">loc</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token boolean" style=color:#ae81ff>nil</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>func</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>main</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    tz </span><span class="token operator" style=color:#66d9ef>:=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Asia/Shang"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    t</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> err </span><span class="token operator" style=color:#66d9ef>:=</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>timeIn</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">tz</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> err </span><span class="token operator" style=color:#66d9ef>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#ae81ff>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        fmt</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>Println</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"Error:"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> err</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        os</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>Exit</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token number" style=color:#ae81ff>1</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    fmt</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>Println</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"Current time in"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> tz</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"is"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> t</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">$ go run main.go</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">Error: unknown </span><span class="token function" style=color:#e6db74>time</span><span class="token plain"> zone Asia/Shang</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token builtin class-name" style=color:#e6db74>exit</span><span class="token plain"> status </span><span class="token number" style=color:#ae81ff>1</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Of course, you could choose another approach: using <code>panic</code> to handle errors inside the <code>timeIn</code> function instead of returning the error to the caller. The code could be written like this:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>package</span><span class="token plain"> main</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token string" style=color:#a6e22e>"fmt"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token string" style=color:#a6e22e>"time"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>func</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>timeIn</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">zone </span><span class="token builtin" style=color:#e6db74>string</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> time</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Time </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    loc</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> err </span><span class="token operator" style=color:#66d9ef>:=</span><span class="token plain"> time</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>LoadLocation</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">zone</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> err </span><span class="token operator" style=color:#66d9ef>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#ae81ff>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token function" style=color:#e6db74>panic</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">err</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token comment" style=color:#8292a2;font-style:italic>// Call panic() with the error as an argument</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> time</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>Now</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>In</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">loc</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>func</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>main</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    tz </span><span class="token operator" style=color:#66d9ef>:=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"Asia/Shang"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    t </span><span class="token operator" style=color:#66d9ef>:=</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>timeIn</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">tz</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    fmt</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>Println</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"Current time in"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> tz</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"is"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> t</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">$ go run main.go</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">panic: unknown </span><span class="token function" style=color:#e6db74>time</span><span class="token plain"> zone Asia/Shang</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">goroutine </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">running</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain">:</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">main.timeIn</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain">0x4c2c7e?, 0x7d40fe626108?</span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    /tmp/main.go:11 +0xc5</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">main.main</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    /tmp/main.go:20 +0x2b</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token builtin class-name" style=color:#e6db74>exit</span><span class="token plain"> status </span><span class="token number" style=color:#ae81ff>2</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>When using <code>panic</code> in <code>Go</code> code, the following four steps occur:</p>
<ol>
<li><strong>Immediately stop the current function</strong>: Code after the <code>panic</code> statement in the function will not be executed.</li>
<li><strong>Execute all <code>defer</code> functions</strong>: All <code>defer</code> statements in the current goroutine are executed in "last in, first out" order.</li>
<li><strong>Print error information</strong>: Output "panic:" followed by the error message passed to <code>panic</code>, and display the call stack of the current goroutine.</li>
<li><strong>Terminate the program</strong>: End the program execution with exit code <code>2</code>.</li>
</ol>
<p>However, there is a way to prevent program termination: use the <code>recover</code> function in a <code>defer</code> function to catch and handle the <code>panic</code>. This will only execute up to step <code>2</code>, and steps <code>3</code> and <code>4</code> will not occur.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=why-is-panic-considered-bad>Why is panic Considered Bad?<a href=#why-is-panic-considered-bad class=hash-link aria-label="Direct link to Why is panic Considered Bad?" title="Direct link to Why is panic Considered Bad?">​</a></h2>
<p><code>panic</code> itself is not a bad thing. In fact, it provides some useful features, such as executing all <code>defer</code> functions and printing detailed stack information.</p>
<p>But in most cases, returning errors is a better choice. The reason is:</p>
<p>When using <code>panic</code>, the program follows a fixed process (stop function, execute <code>defer</code>, print error, terminate program), but you cannot control this process.</p>
<p>When a function returns an error, the caller has complete freedom to decide how to handle the error. For example, the caller can:</p>
<ul>
<li>Log the error</li>
<li>Display the error message to the user</li>
<li>Retry calling the function</li>
<li>Ignore the error</li>
<li>Pass the error up to a higher-level caller</li>
</ul>
<p>This flexibility allows the program to handle various error situations more elegantly.</p>
<p>Returning errors has other benefits:</p>
<ul>
<li><strong>Richer context information</strong>: When passing errors up the call stack, you can choose to "wrap" them, providing additional context information at each step. This extra context can make errors more informative and useful, and potentially easier to debug than relying solely on the stack trace from a <code>panic</code>.</li>
<li><strong>Easier to test</strong>: It's easier to write unit tests for functions that return errors. While it's not impossible to verify that a function triggers a <code>panic</code> as expected during testing, it's more awkward and less clear than simply checking error return values.</li>
<li><strong>Better library design</strong>: If you're creating a package for others to import and use, returning errors instead of triggering <code>panic</code> is more elegant. Remember: <code>panic</code> terminates the running application (current goroutine), which may not be what users of your package expect. It's better to return an error and let the caller decide what to do next. If they wish, they can actively call <code>panic</code> based on the returned error.</li>
<li><strong>Consistent with Go conventions</strong>: Finally, this is the Go way. Errors are typically returned - this is how the <code>Go</code> standard library does it, and it's the standard practice expected by other <code>Go</code> developers. By adhering to this convention, your code becomes more predictable and easier for others to understand.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=when-is-panic-appropriate>When is panic Appropriate?<a href=#when-is-panic-appropriate class=hash-link aria-label="Direct link to When is panic Appropriate?" title="Direct link to When is panic Appropriate?">​</a></h2>
<p>To answer this question, we need to distinguish between two different types of errors: "expected errors" and "code defects".</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=expected-errors>Expected Errors<a href=#expected-errors class=hash-link aria-label="Direct link to Expected Errors" title="Direct link to Expected Errors">​</a></h3>
<p><strong>Expected errors</strong> are those that may occur during normal operation. For example:</p>
<ul>
<li>Database connection failures</li>
<li>Network resources being unavailable</li>
<li>Insufficient file permissions</li>
<li>Operation timeouts</li>
<li>User input not meeting requirements</li>
</ul>
<p>These errors don't indicate that there's a problem with your program; they're caused by external factors. Since these errors are foreseeable, they should be handled by returning errors, not by using <code>panic</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=code-defects>Code Defects<a href=#code-defects class=hash-link aria-label="Direct link to Code Defects" title="Direct link to Code Defects">​</a></h3>
<p><strong>Code defects</strong> refer to errors that "should not happen". These errors are typically caused by:</p>
<ul>
<li>Developers writing incorrect code</li>
<li>Flaws in program logic</li>
<li>Using a function or feature incorrectly</li>
</ul>
<p>These types of errors should be discovered and resolved during development or testing, not in production.</p>
<p>When encountering code defects, it means the program is already in an unexpected, unpredictable state. In such cases, using <code>panic</code> might be an appropriate choice.</p>
<p>Despite the various benefits of returning errors mentioned earlier, there are specific situations where using <code>panic</code> might be a better choice.</p>
<p>Two main scenarios where using <code>panic</code> might be appropriate:</p>
<ol>
<li>
<p><strong>When errors are unrecoverable</strong>: When the encountered error makes it impossible for the program to continue running safely, and there's no reasonable way to handle such a situation.</p>
</li>
<li>
<p><strong>When error handling would make the code overly complex</strong>: If handling certain rare error situations would require adding a large amount of error handling code throughout the codebase, it might make the code very complex and difficult to maintain. Especially when these errors shouldn't occur under normal circumstances.</p>
</li>
</ol>
<p>There are many examples in the <code>Go</code> standard library that use <code>panic</code>, which well illustrate when using <code>panic</code> is appropriate:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=examples-of-panic-in-the-go-standard-library>Examples of panic in the Go Standard Library<a href=#examples-of-panic-in-the-go-standard-library class=hash-link aria-label="Direct link to Examples of panic in the Go Standard Library" title="Direct link to Examples of panic in the Go Standard Library">​</a></h3>
<ul>
<li>When dividing a number by <code>0</code></li>
<li>When accessing an out-of-bounds element in an array or slice</li>
<li>When attempting to use a <code>nil</code> pointer</li>
<li>When attempting to write data to a <code>nil</code> map</li>
<li>When unlocking an unlocked mutex</li>
<li>When sending data to a closed channel</li>
<li>When defining two flags with the same name in the same <code>flag.FlagSet</code></li>
<li>When passing an invalid HTTP status code (less than <code>100</code> or greater than <code>999</code>) to <code>http.ResponseWriter.WriteHeader()</code></li>
<li>When the counter of a <code>sync.WaitGroup</code> becomes negative</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=common-traits-in-these-examples>Common Traits in These Examples<a href=#common-traits-in-these-examples class=hash-link aria-label="Direct link to Common Traits in These Examples" title="Direct link to Common Traits in These Examples">​</a></h3>
<p>Looking carefully at these examples, we can identify two important common traits:</p>
<ol>
<li>
<p><strong>They are all code defects</strong>: These situations all indicate logical errors or improper usage in the code. In a normal program, these situations should be discovered and resolved during development or testing.</p>
</li>
<li>
<p><strong>Using error returns would make the code overly complex</strong>: Imagine how complex and bloated the code would become if you had to check for errors every time you perform a division operation, access an array element, or use a <code>map</code>.</p>
</li>
</ol>
<p>Therefore, using <code>panic</code> in these situations is a reasonable choice, as they are either unrecoverable errors or situations where using error returns would make the code overly complex.</p>
<p>Of course, determining what level of error handling complexity is "difficult to accept" varies from person to person and depends on the specific characteristics of the project. There is no absolute standard answer.</p>
<p>In addition to the situations mentioned above, there are two other common scenarios where using <code>panic</code> is appropriate:</p>
<ol>
<li>
<p><strong>As a last line of defense</strong>: Sometimes we add safety checks in the code to prevent situations that "absolutely should not happen". If these checks fail and trigger a <code>panic</code>, it usually indicates that there's a serious <code>bug</code> or logical error in the program.</p>
</li>
<li>
<p><strong>When the program cannot continue</strong>: In some cases, an error might put the program in a state where it cannot continue running, and there's no other suitable way to handle the error. In such cases, using <code>panic</code> might be the only option.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=practical-case-analysis>Practical Case Analysis<a href=#practical-case-analysis class=hash-link aria-label="Direct link to Practical Case Analysis" title="Direct link to Practical Case Analysis">​</a></h2>
<p>So far, we've discussed the theoretical principles of using <code>panic</code>. Now, let's look at how these principles apply through some practical code examples.</p>
<p>It's important to emphasize that <code>panic</code> should be used cautiously, only in truly appropriate situations. In my practical work experience, about half of the projects don't use <code>panic</code> at all, and even when they do, it's only in a few critical locations.</p>
<p>Below are several cases of using <code>panic</code> that I've encountered in real projects, which can help us better understand when using <code>panic</code> is appropriate.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=example-1-context-check-in-web-applications>Example 1: Context Check in Web Applications<a href=#example-1-context-check-in-web-applications class=hash-link aria-label="Direct link to Example 1: Context Check in Web Applications" title="Direct link to Example 1: Context Check in Web Applications">​</a></h3>
<p>This example comes from a web application where we need to get user information from the request context:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> contextKey </span><span class="token builtin" style=color:#e6db74>string</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>const</span><span class="token plain"> userContextKey </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>contextKey</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"user"</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>func</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>contextGetUser</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">r </span><span class="token operator" style=color:#66d9ef>*</span><span class="token plain">http</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Request</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> user</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">User </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    user</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> ok </span><span class="token operator" style=color:#66d9ef>:=</span><span class="token plain"> r</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>Context</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>Value</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">userContextKey</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">user</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">User</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>!</span><span class="token plain">ok </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token function" style=color:#e6db74>panic</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"missing user value in request context"</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> user</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>The design of this function is based on an important premise: <strong>we only call this function when we are certain that user information exists in the context</strong>. So, if the user information doesn't exist, it means there's a serious logical error in our code.</p>
<p>Of course, we could also make the <code>contextGetUser</code> function return an error instead of using <code>panic</code>. This way, the caller can handle the error, for example, by logging it and returning a 500 error to the user.</p>
<p>However, considering that this function is frequently called in the program, if we had to handle this error that shouldn't occur under normal circumstances every time we call it, it would lead to a lot of error handling logic in the code. Therefore, using <code>panic</code> in this case is an appropriate choice.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=example-2-environment-variable-configuration-loading>Example 2: Environment Variable Configuration Loading<a href=#example-2-environment-variable-configuration-loading class=hash-link aria-label="Direct link to Example 2: Environment Variable Configuration Loading" title="Direct link to Example 2: Environment Variable Configuration Loading">​</a></h3>
<p>This example demonstrates handling configuration during program startup:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>func</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>getEnvInt</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">key </span><span class="token builtin" style=color:#e6db74>string</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> defaultValue </span><span class="token builtin" style=color:#e6db74>int</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token builtin" style=color:#e6db74>int</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    value</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> exists </span><span class="token operator" style=color:#66d9ef>:=</span><span class="token plain"> os</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>LookupEnv</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">key</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>!</span><span class="token plain">exists </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> defaultValue</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    intValue</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> err </span><span class="token operator" style=color:#66d9ef>:=</span><span class="token plain"> strconv</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>Atoi</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">value</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> err </span><span class="token operator" style=color:#66d9ef>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#ae81ff>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token function" style=color:#e6db74>panic</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">err</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> intValue</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>The purpose of this <code>getEnvInt</code> function is to read values from environment variables and convert them to integers. If the environment variable doesn't exist, it returns the default value; but if the environment variable exists but cannot be converted to an integer, it triggers a <code>panic</code>.</p>
<p>At first glance, this might not seem to align with the principles of using <code>panic</code>. After all, an environment variable value that cannot be converted to an integer is a completely possible situation and should be classified as an "expected error".</p>
<p>But the usage scenario of this function is special: it's only used to load basic configurations when the program starts, such as:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">httpPort </span><span class="token operator" style=color:#66d9ef>:=</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>getEnvInt</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"HTTP_PORT"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>3939</span><span class="token punctuation" style=color:#f8f8f2>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>At this stage, other parts of the program (including the logging system) haven't been fully initialized. If configuration loading fails, the program cannot run normally, and there's no suitable way to handle this error (like logging).</p>
<p>In this case, using <code>panic</code> is reasonable because:</p>
<ol>
<li>The program cannot continue running without the correct configuration</li>
<li>There's no better error handling mechanism at this early stage</li>
</ol>
<p>Of course, we could also make the <code>getEnvInt</code> function return an error, and then let the caller decide whether to trigger a <code>panic</code>. But this would add extra error handling code, and the end result might still be the same. Therefore, directly triggering a <code>panic</code> inside the <code>getEnvInt</code> function is a more concise approach.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=example-3-sql-injection-protection>Example 3: SQL Injection Protection<a href=#example-3-sql-injection-protection class=hash-link aria-label="Direct link to Example 3: SQL Injection Protection" title="Direct link to Example 3: SQL Injection Protection">​</a></h3>
<p>This example shows how to use <code>panic</code> as a security protection mechanism:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>var</span><span class="token plain"> safeChars </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> regexp</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>MustCompile</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"^[a-z0-9_]+$"</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> SortValues </span><span class="token keyword" style=color:#66d9ef>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    Column    </span><span class="token builtin" style=color:#e6db74>string</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    Ascending </span><span class="token builtin" style=color:#e6db74>bool</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>func</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">sv </span><span class="token operator" style=color:#66d9ef>*</span><span class="token plain">SortValues</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token function" style=color:#e6db74>OrderBySQL</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token builtin" style=color:#e6db74>string</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>!</span><span class="token plain">safeChars</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>MatchString</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">sv</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Column</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token function" style=color:#e6db74>panic</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"unsafe sort column: "</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>+</span><span class="token plain"> sv</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Column</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> sv</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Ascending </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>Sprintf</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"ORDER BY %s ASC"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> sv</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Column</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>return</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>Sprintf</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"ORDER BY %s DESC"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> sv</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Column</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>The background of this code is: we need to generate <code>SQL</code> query statements based on user input, which includes a dynamic <code>ORDER BY</code> part.</p>
<p>There's a security issue here: <code>SQL</code> doesn't support using parameter placeholders (like <code>?</code> or <code>:param</code>) in the <code>ORDER BY</code> clause, so we must directly insert the column name into the <code>SQL</code> string. This brings the risk of <code>SQL</code> injection.</p>
<p>Under normal circumstances, before calling the <code>OrderBySQL</code> method, other code should have already verified whether the value of the <code>Column</code> field is in the allowed column name whitelist. But if this verification step is missed due to a <code>bug</code> in the program or developer oversight, it could lead to <code>SQL</code> injection attacks.</p>
<p>Therefore, we added an extra safety check in the <code>OrderBySQL</code> method to ensure that the <code>Column</code> field only contains safe characters (lowercase letters, numbers, and underscores). If unsafe characters are detected, a <code>panic</code> is triggered.</p>
<p>The reason for using <code>panic</code> instead of returning an error in this case is:</p>
<ol>
<li>This check is a "last line of defense" and shouldn't fail under normal circumstances</li>
<li>If this check fails, it means there's a serious security vulnerability in the program</li>
<li>In this situation, stopping the program immediately is safer than continuing to run and potentially causing database damage</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=summary>Summary<a href=#summary class=hash-link aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2>
<p>Through the above discussion and examples, we can draw the following conclusions:</p>
<p>In <code>Go</code> programming, in most cases, you should choose to return errors rather than use <code>panic</code>. This aligns with <code>Go</code>'s design philosophy and best practices.</p>
<p>However, in the following specific situations, using <code>panic</code> might be an appropriate choice:</p>
<ol>
<li>
<p><strong>When errors are unrecoverable</strong>: When the program encounters an error that makes it impossible to continue running safely.</p>
</li>
<li>
<p><strong>When error handling would make the code overly complex</strong>: When a large amount of additional error handling code would need to be added to handle very rare error situations.</p>
</li>
<li>
<p><strong>As a security protection mechanism</strong>: Adding safety checks in the code to prevent situations that absolutely should not happen.</p>
</li>
<li>
<p><strong>When there's no better way to handle errors</strong>: Such as configuration loading errors during program startup.</p>
</li>
</ol>
<p>Most importantly, remember that <code>panic</code> causes the program to terminate (unless caught by <code>recover</code>), so it should be used cautiously, only in truly appropriate situations.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/gogf/gf-site/blob/main/docs/community/社区投稿/Go语言中何时使用panic是合适的.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2025-04-08T05:08:50.000Z itemprop=dateModified>Apr 8, 2025</time></b> by <b>John</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/en/articles/use-error-code-gracefully-in-golang><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>How to Use Error Codes Gracefully in Go Development</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/en/articles/sql-migrate-database-migration><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>SQL Migrate Database Migration and Version Management: Effective Methods for Managing Database Structure Changes</div></a></nav><div class=docusaurus-mt-lg></div></div></div><div class="col col--3"><div class=tocContainer_PXzm><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#comparing-panic-and-error-returns class="table-of-contents__link toc-highlight">Comparing panic and Error Returns</a><li><a href=#why-is-panic-considered-bad class="table-of-contents__link toc-highlight">Why is panic Considered Bad?</a><li><a href=#when-is-panic-appropriate class="table-of-contents__link toc-highlight">When is panic Appropriate?</a><ul><li><a href=#expected-errors class="table-of-contents__link toc-highlight">Expected Errors</a><li><a href=#code-defects class="table-of-contents__link toc-highlight">Code Defects</a><li><a href=#examples-of-panic-in-the-go-standard-library class="table-of-contents__link toc-highlight">Examples of panic in the Go Standard Library</a><li><a href=#common-traits-in-these-examples class="table-of-contents__link toc-highlight">Common Traits in These Examples</a></ul><li><a href=#practical-case-analysis class="table-of-contents__link toc-highlight">Practical Case Analysis</a><ul><li><a href=#example-1-context-check-in-web-applications class="table-of-contents__link toc-highlight">Example 1: Context Check in Web Applications</a><li><a href=#example-2-environment-variable-configuration-loading class="table-of-contents__link toc-highlight">Example 2: Environment Variable Configuration Loading</a><li><a href=#example-3-sql-injection-protection class="table-of-contents__link toc-highlight">Example 3: SQL Injection Protection</a></ul><li><a href=#summary class="table-of-contents__link toc-highlight">Summary</a></ul></div><div class=tocAdBanner_imxD></div></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>Follow Us On WeChat</div><ul class="footer__items clean-list"><li class=footer__item><img src=/img/wechat.jpg width=110></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright ©2024 GoFrame OpenSource Team</div></div></div></footer></div>