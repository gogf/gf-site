"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["98486"],{429151:function(e,n,i){i.r(n),i.d(n,{metadata:()=>t,contentTitle:()=>d,default:()=>u,assets:()=>r,toc:()=>c,frontMatter:()=>s});var t=JSON.parse('{"id":"docs/\u5F00\u53D1\u5DE5\u5177/\u4EE3\u7801\u751F\u6210-gen/\u679A\u4E3E\u7EF4\u62A4-gen enums","title":"Enums Maintenance","description":"Use GoFrame command line tool to maintain and generate enum value information, especially for enum parameters in OpenAPIv3 documents. Automatically generate and load enum values by parsing source code to reduce manual maintenance costs, improve development efficiency, and enhance collaboration between backend and frontend.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u5F00\u53D1\u5DE5\u5177/\u4EE3\u7801\u751F\u6210-gen/\u679A\u4E3E\u7EF4\u62A4-gen enums.md","sourceDirName":"docs/\u5F00\u53D1\u5DE5\u5177/\u4EE3\u7801\u751F\u6210-gen","slug":"/docs/cli/gen-enums","permalink":"/en/docs/cli/gen-enums","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u5F00\u53D1\u5DE5\u5177/\u4EE3\u7801\u751F\u6210-gen/\u679A\u4E3E\u7EF4\u62A4-gen enums.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732541616000,"sidebarPosition":3,"frontMatter":{"slug":"/docs/cli/gen-enums","title":"Enums Maintenance","sidebar_position":3,"hide_title":true,"keywords":["GoFrame","GoFrame framework","Enum maintenance","OpenAPIv3","API documentation","Enum values","Source code analysis","Command line tool","Development efficiency","Data validation"],"description":"Use GoFrame command line tool to maintain and generate enum value information, especially for enum parameters in OpenAPIv3 documents. Automatically generate and load enum values by parsing source code to reduce manual maintenance costs, improve development efficiency, and enhance collaboration between backend and frontend."},"sidebar":"mainSidebar","previous":{"title":"Service Generating","permalink":"/en/docs/cli/gen-service"},"next":{"title":"Protobuf Compilation","permalink":"/en/docs/cli/gen-pb"}}'),o=i("785893"),a=i("250065");let s={slug:"/docs/cli/gen-enums",title:"Enums Maintenance",sidebar_position:3,hide_title:!0,keywords:["GoFrame","GoFrame framework","Enum maintenance","OpenAPIv3","API documentation","Enum values","Source code analysis","Command line tool","Development efficiency","Data validation"],description:"Use GoFrame command line tool to maintain and generate enum value information, especially for enum parameters in OpenAPIv3 documents. Automatically generate and load enum values by parsing source code to reduce manual maintenance costs, improve development efficiency, and enhance collaboration between backend and frontend."},d=void 0,r={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Addressed Pain Points",id:"addressed-pain-points",level:2},{value:"Pain Points Description",id:"pain-points-description",level:3},{value:"Pain Points Resolution",id:"pain-points-resolution",level:3},{value:"Command Usage",id:"command-usage",level:2},{value:"Usage of the Generated File",id:"usage-of-the-generated-file",level:2},{value:"Further Reading",id:"further-reading",level:2},{value:"How to Standardize Enum Values",id:"how-to-standardize-enum-values",level:3},{value:"How to Validate Enum Values",id:"how-to-validate-enum-values",level:3}];function l(e){let n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["This feature is an ",(0,o.jsx)(n.strong,{children:"experimental feature"}),", available from version ",(0,o.jsx)(n.code,{children:"v2.4"}),"."]})}),"\n",(0,o.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,o.jsxs)(n.p,{children:["This command is used to analyze the source code in the specified code directory and generate enum values and ",(0,o.jsx)(n.code,{children:"Go"})," code files according to specifications, ",(0,o.jsxs)(n.strong,{children:["mainly to improve the maintenance of enum values in ",(0,o.jsx)(n.code,{children:"OpenAPIv3"})," documents"]}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"addressed-pain-points",children:"Addressed Pain Points"}),"\n",(0,o.jsx)(n.h3,{id:"pain-points-description",children:"Pain Points Description"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The issue of not displaying the optional items of enum values in the ",(0,o.jsx)(n.code,{children:"API"})," documentation."]}),"\n",(0,o.jsxs)(n.li,{children:["The difficulty in maintaining enum values in the ",(0,o.jsx)(n.code,{children:"API"})," documentation, and the issue of code and documentation being maintained separately. This reduces the collaboration efficiency with the caller, especially between frontend and backend."]}),"\n"]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"For example, in the following API definition, tasks have multiple states which are enum values. It's costly for the backend to maintain and easy to miss states maintenance, causing incomplete state enum values."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:i(585169).Z+"",width:"2414",height:"814"})}),"\n",(0,o.jsx)(n.h3,{id:"pain-points-resolution",children:"Pain Points Resolution"}),"\n",(0,o.jsxs)(n.p,{children:["The tool parses source code and generates enum values into the startup package ",(0,o.jsx)(n.code,{children:"Go"})," file, automatically loading enum values when the service runs, reducing manual maintenance costs and avoiding omitted enum value maintenance."]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"For example, in the following API definition, using the tool to maintain enum values improves development efficiency."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:i(556043).Z+"",width:"2396",height:"850"})}),"\n",(0,o.jsx)(n.h2,{id:"command-usage",children:"Command Usage"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:"$ gf gen enums -h\nUSAGE\n    gf gen enums [OPTION]\n\nOPTION\n    -s, --src        source folder path to be parsed\n    -p, --path       output go file path storing enums content\n    -x, --prefixes   only exports packages that starts with specified prefixes\n    -h, --help       more information about this command\n\nEXAMPLE\n    gf gen enums\n    gf gen enums -p internal/boot/boot_enums.go\n    gf gen enums -p internal/boot/boot_enums.go -s .\n    gf gen enums -x github.com/gogf\n"})}),"\n",(0,o.jsx)(n.p,{children:"Parameter Description:"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Name"}),(0,o.jsx)(n.th,{children:"Required"}),(0,o.jsx)(n.th,{children:"Default"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"src"})}),(0,o.jsx)(n.td,{children:"No"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"."})}),(0,o.jsx)(n.td,{children:"Specify the source code directory path for analysis, default is the current project root directory"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"path"})}),(0,o.jsx)(n.td,{children:"No"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"internal/boot/boot_enums.go"})}),(0,o.jsx)(n.td,{children:"Specify the path for the generated enum registration Go code file"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"prefixes"})}),(0,o.jsx)(n.td,{children:"No"}),(0,o.jsx)(n.td,{children:"-"}),(0,o.jsx)(n.td,{children:"Only generate enum values for package names with specified prefixes, supports multiple prefix configurations"})]})]})]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["This command uses ",(0,o.jsx)(n.code,{children:"AST"})," parsing to recursively analyze ",(0,o.jsx)(n.code,{children:"enums"})," definitions for all dependency packages. If the business project dependencies are complex, the generated ",(0,o.jsx)(n.code,{children:"enums"})," may be many, but most of the time we only care about the ",(0,o.jsx)(n.code,{children:"enums"})," definitions of our own project or specific dependency packages, hence the ",(0,o.jsx)(n.code,{children:"prefixes"})," parameter can be used to control the generation of ",(0,o.jsx)(n.code,{children:"enums"})," for only specific package name prefixes."]})}),"\n",(0,o.jsxs)(n.p,{children:["Example of the tool configuration item in ",(0,o.jsx)(n.code,{children:"yaml"})," format:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",metastring:'title="hack/config.yaml"',children:'gfcli:\n  gen:\n    enums:\n      src:  "api"\n      path: "internal/boot/boot_enums.go"\n      prefixes: \n      - github.com/gogf\n      - myexample/project\n'})}),"\n",(0,o.jsx)(n.h2,{id:"usage-of-the-generated-file",children:"Usage of the Generated File"}),"\n",(0,o.jsxs)(n.p,{children:["Execute the ",(0,o.jsx)(n.code,{children:"gf gen enums"})," command to generate the enum analysis file ",(0,o.jsx)(n.code,{children:"internal/boot/boot_enums.go"}),". After generating the file, it needs to be anonymously imported in the project's entry file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'import (\n    _ "project_module_name/internal/boot"\n)\n'})}),"\n",(0,o.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,o.jsx)(n.h3,{id:"how-to-standardize-enum-values",children:"How to Standardize Enum Values"}),"\n",(0,o.jsxs)(n.p,{children:["Please refer to the section: ",(0,o.jsx)(n.a,{href:"/en/docs/design/enums",children:"Golang Enums"})]}),"\n",(0,o.jsx)(n.h3,{id:"how-to-validate-enum-values",children:"How to Validate Enum Values"}),"\n",(0,o.jsxs)(n.p,{children:["If enum values are standardized and files are generated by command for enum value maintenance, then in parameter validation, the ",(0,o.jsx)(n.code,{children:"enums"})," rule can be used to validate enum value fields. For specific rule introduction, please refer to the section: ",(0,o.jsx)(n.a,{href:"/en/docs/core/gvalid-rules",children:"Data Validation - Rules"})]})]})}function u(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},585169:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/3e2d58612c094dcf26ed2f17371ae482-f8448296e2711e70c08791a5c713ec23.png"},556043:function(e,n,i){i.d(n,{Z:function(){return t}});let t=i.p+"assets/images/4f5b0d82a3fa65b8c83fcd3f93a8c02a-685d8db346d83f3e41bbfef9a3340d42.png"},250065:function(e,n,i){i.d(n,{Z:function(){return d},a:function(){return s}});var t=i(667294);let o={},a=t.createContext(o);function s(e){let n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);