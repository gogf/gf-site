"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["32638"],{742532:function(e,t,n){n.r(t),n.d(t,{metadata:()=>i,contentTitle:()=>s,default:()=>h,assets:()=>c,toc:()=>d,frontMatter:()=>o});var i=JSON.parse('{"id":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6A21\u677F\u5F15\u64CE/\u6A21\u677F\u5F15\u64CE","title":"Template Engine","description":"GoFrame framework\'s template engine offers simple, easy-to-use, and powerful features, supporting multiple template directory searches, layout template design, and automatic updates of template files, among others. Through the gview module, general view management is implemented, supporting singleton pattern for template objects and the use of view object managers, facilitating configuration of template directories and rendering of template variables and functions.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6A21\u677F\u5F15\u64CE/\u6A21\u677F\u5F15\u64CE.md","sourceDirName":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6A21\u677F\u5F15\u64CE","slug":"/docs/core/gview","permalink":"/en/docs/core/gview","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6A21\u677F\u5F15\u64CE/\u6A21\u677F\u5F15\u64CE.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732716970000,"sidebarPosition":9,"frontMatter":{"slug":"/docs/core/gview","title":"Template Engine","sidebar_position":9,"hide_title":true,"keywords":["GoFrame","GoFrame Framework","Template Engine","gview","Template Management","Cache Mechanism","Auto-detect Updates","Template Directory","Template Variables","Template Functions"],"description":"GoFrame framework\'s template engine offers simple, easy-to-use, and powerful features, supporting multiple template directory searches, layout template design, and automatic updates of template files, among others. Through the gview module, general view management is implemented, supporting singleton pattern for template objects and the use of view object managers, facilitating configuration of template directories and rendering of template variables and functions."},"sidebar":"mainSidebar","previous":{"title":"Caching - Methods","permalink":"/en/docs/core/gcache-funcs"},"next":{"title":"Template Engine - Configuration","permalink":"/en/docs/core/gview-config"}}'),a=n("785893"),r=n("250065"),l=n("203105");let o={slug:"/docs/core/gview",title:"Template Engine",sidebar_position:9,hide_title:!0,keywords:["GoFrame","GoFrame Framework","Template Engine","gview","Template Management","Cache Mechanism","Auto-detect Updates","Template Directory","Template Variables","Template Functions"],description:"GoFrame framework's template engine offers simple, easy-to-use, and powerful features, supporting multiple template directory searches, layout template design, and automatic updates of template files, among others. Through the gview module, general view management is implemented, supporting singleton pattern for template objects and the use of view object managers, facilitating configuration of template directories and rendering of template variables and functions."},s=void 0,c={},d=[{value:"Features of the Template Engine",id:"features-of-the-template-engine",level:2},{value:"General View Management",id:"general-view-management",level:2},{value:"Example 1: Parsing a Template File",id:"example-1-parsing-a-template-file",level:3},{value:"Example 2: Parsing Template Content",id:"example-2-parsing-template-content",level:3},{value:"Example 3: Custom Template Delimiters",id:"example-3-custom-template-delimiters",level:3},{value:"Directory Configuration Method",id:"directory-configuration-method",level:2},{value:"Modifying the Template Directory",id:"modifying-the-template-directory",level:2},{value:"Automatic Update Detection",id:"automatic-update-detection",level:2},{value:"Documentation",id:"documentation",level:2}];function m(e){let t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"features-of-the-template-engine",children:"Features of the Template Engine"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:"Simple, easy to use, powerful;"}),"\n",(0,a.jsx)(t.li,{children:"Supports multiple template directory searches;"}),"\n",(0,a.jsxs)(t.li,{children:["Supports ",(0,a.jsx)(t.code,{children:"layout"})," template design;"]}),"\n",(0,a.jsx)(t.li,{children:"Supports singleton mode for template view objects;"}),"\n",(0,a.jsx)(t.li,{children:"Natively integrated with the configuration management module, easy to use;"}),"\n",(0,a.jsx)(t.li,{children:"Utilizes a two-level cache design at the core, offering high performance;"}),"\n",(0,a.jsx)(t.li,{children:"Adds new template tags and numerous built-in template variables and functions;"}),"\n",(0,a.jsx)(t.li,{children:"Supports automatic cache update mechanism upon template file modification, which is more developer-friendly;"}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"define"}),"/",(0,a.jsx)(t.code,{children:"template"})," tags support cross-template invocation (including template files under the same template path with subdirectories);"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"include"})," tag supports importing template files from any path;"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"general-view-management",children:"General View Management"}),"\n",(0,a.jsxs)(t.p,{children:["General view management involves using the native template engine ",(0,a.jsx)(t.code,{children:"gview"})," module to implement template management, including template reading and display, template variable rendering, etc. You can use the method ",(0,a.jsx)(t.code,{children:"gview.Instance"})," to obtain a view singleton object and retrieve it according to the singleton object name. You can also obtain the default singleton ",(0,a.jsx)(t.code,{children:"gview"})," object through the object manager ",(0,a.jsx)(t.code,{children:"g.View()"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Interface Documentation"}),":"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{href:"https://pkg.go.dev/github.com/gogf/gf/v2/os/gview",children:"https://pkg.go.dev/github.com/gogf/gf/v2/os/gview"})}),"\n",(0,a.jsx)(t.p,{children:"Brief Explanation:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"gview.Get"})," is used to obtain the corresponding singleton template engine object based on a given template directory path;"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"gview.New"})," can also create a template engine object based on the given template directory path but without singleton management;"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"SetPath/AddPath"})," is used to set/add the template directory path of the current template engine object, where ",(0,a.jsx)(t.code,{children:"SetPath"})," will overwrite all template directory settings, and ",(0,a.jsx)(t.code,{children:"AddPath"})," is recommended;"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"Assign/Assigns"})," is used to set template variables, and all templates parsed by the template engine can use these template variables;"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"BindFunc"})," is used to bind template functions; for detailed usage, refer to subsequent examples;"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"Parse/ParseContent"})," is used to parse template files/content, allowing for temporary template variables and template functions to be given during parsing;"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"SetDelimiters"})," is used to set the template parsing delimiters of the template engine object, defaulting to ",(0,a.jsx)(t.code,{children:"{{ }}"})," (conflicts with the ",(0,a.jsx)(t.code,{children:"vuejs"})," front-end framework);"]}),"\n"]}),"\n",(0,a.jsx)(t.admonition,{type:"warning",children:(0,a.jsxs)(t.p,{children:["Note: Starting with ",(0,a.jsx)(t.code,{children:"goframe v1.16"}),", all template parsing methods have an additional first input parameter which is the ",(0,a.jsx)(t.code,{children:"Context"}),"."]})}),"\n",(0,a.jsx)(t.h3,{id:"example-1-parsing-a-template-file",children:"Example 1: Parsing a Template File"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.code,{children:"index.tpl"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"id:{{.id}}, name:{{.name}}\n"})}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.code,{children:"main.go"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-go",children:'package main\n\nimport (\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/net/ghttp"\n)\n\nfunc main() {\n    s := g.Server()\n    s.BindHandler("/template", func(r *ghttp.Request) {\n        r.Response.WriteTpl("index.tpl", g.Map{\n            "id":   123,\n            "name": "john",\n        })\n    })\n    s.SetPort(8199)\n    s.Run()\n}\n'})}),"\n",(0,a.jsxs)(t.p,{children:["After execution, visiting ",(0,a.jsx)(t.a,{href:"http://127.0.0.1:8199/template",children:"http://127.0.0.1:8199/template"})," will show the parsed content as: ",(0,a.jsx)(t.code,{children:"id:123, name:john"})]}),"\n",(0,a.jsx)(t.h3,{id:"example-2-parsing-template-content",children:"Example 2: Parsing Template Content"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-go",children:'package main\n\nimport (\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/net/ghttp"\n)\n\nfunc main() {\n    s := g.Server()\n    s.BindHandler("/template", func(r *ghttp.Request){\n        tplContent := `id:{{.id}}, name:{{.name}}`\n        r.Response.WriteTplContent(tplContent, g.Map{\n            "id"   : 123,\n            "name" : "john",\n        })\n    })\n    s.SetPort(8199)\n    s.Run()\n}\n'})}),"\n",(0,a.jsxs)(t.p,{children:["After execution, visiting ",(0,a.jsx)(t.a,{href:"http://127.0.0.1:8199/template",children:"http://127.0.0.1:8199/template"})," will show the parsed content as: ",(0,a.jsx)(t.code,{children:"id:123, name:john"})]}),"\n",(0,a.jsx)(t.h3,{id:"example-3-custom-template-delimiters",children:"Example 3: Custom Template Delimiters"}),"\n",(0,a.jsxs)(t.p,{children:["In projects, we often encounter a conflict between ",(0,a.jsx)(t.code,{children:"Golang"})," default template variable delimiters and ",(0,a.jsx)(t.code,{children:"Vue"})," variable delimiters (both use ",(0,a.jsx)(t.code,{children:"{{ }}"}),"). We can use the ",(0,a.jsx)(t.code,{children:"SetDelimiters"})," method to customize the global ",(0,a.jsx)(t.code,{children:"Golang"})," template variable delimiters:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-go",children:'// main.go\npackage main\n\nimport (\n    "context"\n    "fmt"\n    "github.com/gogf/gf/v2/frame/g"\n)\n\nfunc main() {\n    v := g.View()\n    v.SetDelimiters("${", "}")\n    b, err := v.Parse(\n        context.TODO(),\n        "gview_delimiters.tpl",\n        map[string]interface{}{\n            "k": "v",\n        })\n    fmt.Println(err)\n    fmt.Println(b)\n}\n'})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-html",children:"\x3c!-- gview_delimiters.tpl --\x3e\ntest.tpl content, vars: ${.}\n"})}),"\n",(0,a.jsx)(t.p,{children:"After execution, the resulting output is:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-html",children:"<nil>\ntest.tpl content, vars: map[k:v]\n"})}),"\n",(0,a.jsx)(t.h2,{id:"directory-configuration-method",children:"Directory Configuration Method"}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"GoFrame"})," framework's template engine supports a highly flexible multi-directory auto-search function. The ",(0,a.jsx)(t.code,{children:"SetPath"})," can modify the template directory to a single directory address. Additionally, the ",(0,a.jsx)(t.code,{children:"AddPath"})," method can add multiple search directories, and the template engine will prioritize the added directories according to the order they were added, performing automatic retrieval. It searches until it finds a matching file path. If no template file is found in all search directories, it returns failure."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Default Directory Configuration"}),":"]}),"\n",(0,a.jsxs)(t.p,{children:["When initializing the ",(0,a.jsx)(t.code,{children:"gview"})," view object, the following template file search directories are automatically added by default:"]}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsxs)(t.strong,{children:["The current working directory and its ",(0,a.jsx)(t.code,{children:"template"})," subdirectory"]}),": For example, if the current working directory is ",(0,a.jsx)(t.code,{children:"/home/www"}),", ",(0,a.jsx)(t.code,{children:"/home/www"})," and ",(0,a.jsx)(t.code,{children:"/home/www/template"})," will be added;"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsxs)(t.strong,{children:["The directory where the current executable is located and its ",(0,a.jsx)(t.code,{children:"template"})," subdirectory"]}),": For example, if the binary file is located in ",(0,a.jsx)(t.code,{children:"/tmp"}),", ",(0,a.jsx)(t.code,{children:"/tmp"})," and ",(0,a.jsx)(t.code,{children:"/tmp/template"})," will be added;"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsxs)(t.strong,{children:["The directory where the ",(0,a.jsx)(t.code,{children:"main"})," source code package is located and its ",(0,a.jsx)(t.code,{children:"template"})," subdirectory"]})," (effective only in the source code development environment): For example, if the ",(0,a.jsx)(t.code,{children:"main"})," package is located in ",(0,a.jsx)(t.code,{children:"/home/john/workspace/gf-app"}),", ",(0,a.jsx)(t.code,{children:"/home/john/workspace/gf-app"})," and ",(0,a.jsx)(t.code,{children:"/home/john/workspace/gf-app/template"})," will be added;"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"modifying-the-template-directory",children:"Modifying the Template Directory"}),"\n",(0,a.jsx)(t.p,{children:"The view object's template file search directory can be modified in the following ways. The view object will only perform configuration file retrieval in the specified directory:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["(Recommended) Retrieve the global View object in singleton mode and modify it via the ",(0,a.jsx)(t.code,{children:"SetPath"})," method;"]}),"\n",(0,a.jsxs)(t.li,{children:["Modify command line start parameters - ",(0,a.jsx)(t.code,{children:"gf.gview.path"}),";"]}),"\n",(0,a.jsxs)(t.li,{children:["Modify specified environment variables - ",(0,a.jsx)(t.code,{children:"GF_GVIEW_PATH"}),";"]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["For example, if our executable file is ",(0,a.jsx)(t.code,{children:"main"}),", the template engine's template directory can be modified in the following ways on Linux:"]}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:"(Recommended) Through singleton mode"}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-go",children:'g.View().SetPath("/opt/template")\n'})}),"\n",(0,a.jsxs)(t.ol,{start:"2",children:["\n",(0,a.jsx)(t.li,{children:"Via command line parameters"}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell",children:"./main --gf.gview.path=/opt/template/\n"})}),"\n",(0,a.jsxs)(t.ol,{start:"3",children:["\n",(0,a.jsxs)(t.li,{children:["Via environment variables","\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Modify the environment variable at startup:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell",children:"GF_GVIEW_PATH=/opt/config/; ./main\n"})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Use the ",(0,a.jsx)(t.code,{children:"genv"})," module to modify the environment variable:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-go",children:'genv.Set("GF_GVIEW_PATH", "/opt/template")\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"automatic-update-detection",children:"Automatic Update Detection"}),"\n",(0,a.jsxs)(t.p,{children:["The template engine uses a carefully designed ",(0,a.jsx)(t.strong,{children:"cache mechanism"}),". When a template file is first read, it is cached in memory, and future reads will directly access the cache to improve execution efficiency. Additionally, the template engine provides an ",(0,a.jsx)(t.strong,{children:"automatic update detection mechanism"})," for template files. When a template file is modified externally, the template engine can promptly detect it and refresh the cache content of the template file."]}),"\n",(0,a.jsx)(t.h2,{id:"documentation",children:"Documentation"}),"\n","\n",(0,a.jsx)(l.Z,{})]})}function h(e={}){let{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}},203105:function(e,t,n){n.d(t,{Z:()=>j});var i=n("785893");n("667294");var a=n("467026"),r=n("96693"),l=n("531183"),o=n("633876"),s=n("266026"),c=n("434751"),d=n("58608");let m={cardContainer:"cardContainer_fWXF",cardTitle:"cardTitle_rnsV",cardDescription:"cardDescription_PWke"};function h(e){let{href:t,children:n}=e;return(0,i.jsx)(l.Z,{href:t,className:(0,a.Z)("card padding--lg",m.cardContainer),children:n})}function p(e){let{href:t,icon:n,title:r,description:l}=e;return(0,i.jsxs)(h,{href:t,children:[(0,i.jsxs)(d.Z,{as:"h2",className:(0,a.Z)("text--truncate",m.cardTitle),title:r,children:[n," ",r]}),l&&(0,i.jsx)("p",{className:(0,a.Z)("text--truncate",m.cardDescription),title:l,children:l})]})}function u(e){let{item:t}=e,n=(0,r.LM)(t),a=function(){let{selectMessage:e}=(0,o.c)();return t=>e(t,(0,c.I)({message:"1 item|{count} items",id:"theme.docs.DocCard.categoryDescription.plurals",description:"The default description for a category card in the generated index about how many items this category includes"},{count:t}))}();return n?(0,i.jsx)(p,{href:n,icon:"\uD83D\uDDC3\uFE0F",title:t.label,description:t.description??a(t.items.length)}):null}function g(e){let{item:t}=e,n=(0,s.Z)(t.href)?"\uD83D\uDCC4\uFE0F":"\uD83D\uDD17",a=(0,r.xz)(t.docId??void 0);return(0,i.jsx)(p,{href:t.href,icon:n,title:t.label,description:t.description??a?.description})}function f(e){let{item:t}=e;switch(t.type){case"link":return(0,i.jsx)(g,{item:t});case"category":return(0,i.jsx)(u,{item:t});default:throw Error(`unknown item type ${JSON.stringify(t)}`)}}function x(e){let{className:t}=e,n=(0,r.jA)();return(0,i.jsx)(j,{items:n.items,className:t})}function j(e){let{items:t,className:n}=e;if(!t)return(0,i.jsx)(x,{...e});let l=(0,r.MN)(t);return(0,i.jsx)("section",{className:(0,a.Z)("row",n),children:l.map((e,t)=>(0,i.jsx)("article",{className:"col col--6 margin-bottom--lg",children:(0,i.jsx)(f,{item:e})},t))})}},633876:function(e,t,n){n.d(t,{c:function(){return s}});var i=n(667294),a=n(49931);let r=["zero","one","two","few","many","other"];function l(e){return r.filter(t=>e.includes(t))}let o={locale:"en",pluralForms:l(["one","other"]),select:e=>1===e?"one":"other"};function s(){let e=function(){let{i18n:{currentLocale:e}}=(0,a.Z)();return(0,i.useMemo)(()=>{try{return function(e){let t=new Intl.PluralRules(e);return{locale:e,pluralForms:l(t.resolvedOptions().pluralCategories),select:e=>t.select(e)}}(e)}catch(t){return console.error(`Failed to use Intl.PluralRules for locale "${e}".
Docusaurus will fallback to the default (English) implementation.
Error: ${t.message}
`),o}},[e])}();return{selectMessage:(t,n)=>(function(e,t,n){let i=e.split("|");if(1===i.length)return i[0];i.length>n.pluralForms.length&&console.error(`For locale=${n.locale}, a maximum of ${n.pluralForms.length} plural forms are expected (${n.pluralForms.join(",")}), but the message contains ${i.length}: ${e}`);let a=n.select(t);return i[Math.min(n.pluralForms.indexOf(a),i.length-1)]})(n,t,e)}}},250065:function(e,t,n){n.d(t,{Z:function(){return o},a:function(){return l}});var i=n(667294);let a={},r=i.createContext(a);function l(e){let t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);