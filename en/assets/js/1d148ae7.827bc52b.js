"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["26774"],{363301:function(e,r,n){n.r(r),n.d(r,{metadata:()=>s,contentTitle:()=>t,default:()=>l,assets:()=>d,toc:()=>i,frontMatter:()=>a});var s=JSON.parse('{"id":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u94FE\u5F0F\u64CD\u4F5C/ORM\u94FE\u5F0F\u64CD\u4F5C-\u6570\u636E\u67E5\u8BE2/ORM\u67E5\u8BE2-\u5B50\u67E5\u8BE2\u7279\u6027","title":"Model Query - Subquery","description":"Three subquery features supported by the ORM component in the GoFrame framework: Where subquery, Having subquery, and From subquery. Examples demonstrate how to use subqueries in Where, Having conditions, and when using the Model method to create models to enhance database query efficiency.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u94FE\u5F0F\u64CD\u4F5C/ORM\u94FE\u5F0F\u64CD\u4F5C-\u6570\u636E\u67E5\u8BE2/ORM\u67E5\u8BE2-\u5B50\u67E5\u8BE2\u7279\u6027.md","sourceDirName":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u94FE\u5F0F\u64CD\u4F5C/ORM\u94FE\u5F0F\u64CD\u4F5C-\u6570\u636E\u67E5\u8BE2","slug":"/docs/core/gdb-chaining-query-sub-query","permalink":"/en/docs/core/gdb-chaining-query-sub-query","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u94FE\u5F0F\u64CD\u4F5C/ORM\u94FE\u5F0F\u64CD\u4F5C-\u6570\u636E\u67E5\u8BE2/ORM\u67E5\u8BE2-\u5B50\u67E5\u8BE2\u7279\u6027.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732440306000,"sidebarPosition":8,"frontMatter":{"slug":"/docs/core/gdb-chaining-query-sub-query","title":"Model Query - Subquery","sidebar_position":8,"hide_title":true,"keywords":["ORM","Subquery","Where Subquery","Having Subquery","From Subquery","GoFrame","GoFrame Framework","Database Query","Data Model","Subquery Statement"],"description":"Three subquery features supported by the ORM component in the GoFrame framework: Where subquery, Having subquery, and From subquery. Examples demonstrate how to use subqueries in Where, Having conditions, and when using the Model method to create models to enhance database query efficiency."},"sidebar":"mainSidebar","previous":{"title":"Model Query - Union/UnionAll","permalink":"/en/docs/core/gdb-chaining-query-union"},"next":{"title":"Model Query - Operators","permalink":"/en/docs/core/gdb-chaining-query-example"}}'),u=n("785893"),o=n("250065");let a={slug:"/docs/core/gdb-chaining-query-sub-query",title:"Model Query - Subquery",sidebar_position:8,hide_title:!0,keywords:["ORM","Subquery","Where Subquery","Having Subquery","From Subquery","GoFrame","GoFrame Framework","Database Query","Data Model","Subquery Statement"],description:"Three subquery features supported by the ORM component in the GoFrame framework: Where subquery, Having subquery, and From subquery. Examples demonstrate how to use subqueries in Where, Having conditions, and when using the Model method to create models to enhance database query efficiency."},t=void 0,d={},i=[{value:"<code>Where</code> Subquery",id:"where-subquery",level:2},{value:"<code>Having</code> Subquery",id:"having-subquery",level:2},{value:"<code>From</code> Subquery",id:"from-subquery",level:2}];function c(e){let r={code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(r.p,{children:["The ",(0,u.jsx)(r.code,{children:"ORM"})," component currently supports three common subquery syntaxes: ",(0,u.jsx)(r.code,{children:"Where"})," subquery, ",(0,u.jsx)(r.code,{children:"Having"})," subquery, and ",(0,u.jsx)(r.code,{children:"From"})," subquery."]}),"\n",(0,u.jsxs)(r.h2,{id:"where-subquery",children:[(0,u.jsx)(r.code,{children:"Where"})," Subquery"]}),"\n",(0,u.jsxs)(r.p,{children:["We can use subquery statements in the ",(0,u.jsx)(r.code,{children:"Where"})," condition, for example:"]}),"\n",(0,u.jsx)(r.pre,{children:(0,u.jsx)(r.code,{className:"language-go",children:'g.Model("orders").Where("amount > ?", g.Model("orders").Fields("AVG(amount)")).Scan(&orders)\n// SELECT * FROM "orders" WHERE amount > (SELECT AVG(amount) FROM "orders")\n'})}),"\n",(0,u.jsxs)(r.h2,{id:"having-subquery",children:[(0,u.jsx)(r.code,{children:"Having"})," Subquery"]}),"\n",(0,u.jsxs)(r.p,{children:["We can use subquery statements in the ",(0,u.jsx)(r.code,{children:"Having"})," condition, for example:"]}),"\n",(0,u.jsx)(r.pre,{children:(0,u.jsx)(r.code,{className:"language-go",children:'subQuery := g.Model("users").Fields("AVG(age)").WhereLike("name", "name%")\ng.Model("users").Fields("AVG(age) as avgage").Group("name").Having("AVG(age) > ?", subQuery).Scan(&results)\n// SELECT AVG(age) as avgage FROM `users` GROUP BY `name` HAVING AVG(age) > (SELECT AVG(age) FROM `users` WHERE name LIKE "name%")\n'})}),"\n",(0,u.jsxs)(r.h2,{id:"from-subquery",children:[(0,u.jsx)(r.code,{children:"From"})," Subquery"]}),"\n",(0,u.jsxs)(r.p,{children:["We can use subquery statements when creating models using the ",(0,u.jsx)(r.code,{children:"Model"})," method, for example:"]}),"\n",(0,u.jsx)(r.pre,{children:(0,u.jsx)(r.code,{className:"language-go",children:'g.Model("? as u", g.Model("users").Fields("name", "age")).Where("age", 18).Scan(&users)\n// SELECT * FROM (SELECT `name`,`age` FROM `users`) as u WHERE `age` = 18\n\nsubQuery1 := g.Model("users").Fields("name")\nsubQuery2 := g.Model("pets").Fields("name")\ng.Model("? as u, ? as p", subQuery1, subQuery2).Scan(&users)\n// SELECT * FROM (SELECT `name` FROM `users`) as u, (SELECT `name` FROM `pets`) as p\n'})})]})}function l(e={}){let{wrapper:r}={...(0,o.a)(),...e.components};return r?(0,u.jsx)(r,{...e,children:(0,u.jsx)(c,{...e})}):c(e)}},250065:function(e,r,n){n.d(r,{Z:function(){return t},a:function(){return a}});var s=n(667294);let u={},o=s.createContext(u);function a(e){let r=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(u):e.components||u:a(e.components),s.createElement(o.Provider,{value:r},e.children)}}}]);