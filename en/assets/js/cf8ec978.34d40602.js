"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["52311"],{473163:function(e,n,i){i.r(n),i.d(n,{metadata:()=>r,contentTitle:()=>s,default:()=>u,assets:()=>l,toc:()=>d,frontMatter:()=>o});var r=JSON.parse('{"id":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C/\u6570\u636E\u6821\u9A8C-\u81EA\u5B9A\u4E49\u9519\u8BEF","title":"Data Validation - Error Msg","description":"When using the data validation component of the GoFrame framework, customize error messages and support the i18n internationalization feature. By combining with the i18n component, you can easily set error messages in different languages. The document explains in detail how to configure i18n files in English and Chinese, and how to set the error message language through middleware, helping developers to handle internationalization more efficiently.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C/\u6570\u636E\u6821\u9A8C-\u81EA\u5B9A\u4E49\u9519\u8BEF.md","sourceDirName":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C","slug":"/docs/core/gvalid-custom-validating-message","permalink":"/en/docs/core/gvalid-custom-validating-message","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C/\u6570\u636E\u6821\u9A8C-\u81EA\u5B9A\u4E49\u9519\u8BEF.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732541616000,"sidebarPosition":7,"frontMatter":{"slug":"/docs/core/gvalid-custom-validating-message","title":"Data Validation - Error Msg","sidebar_position":7,"hide_title":true,"keywords":["Data Validation","Custom Error","GoFrame","GoFrame Framework","i18n","Internationalization","Validation Message","Chinese Error Message","English Error Message","Error Message Configuration"],"description":"When using the data validation component of the GoFrame framework, customize error messages and support the i18n internationalization feature. By combining with the i18n component, you can easily set error messages in different languages. The document explains in detail how to configure i18n files in English and Chinese, and how to set the error message language through middleware, helping developers to handle internationalization more efficiently."},"sidebar":"mainSidebar","previous":{"title":"Custom Rule - Input Object","permalink":"/en/docs/core/gvalid-custom-rules-handle-input-parameters"},"next":{"title":"Data Validation - Methods","permalink":"/en/docs/core/gvalid-funcs"}}'),t=i("785893"),a=i("250065");let o={slug:"/docs/core/gvalid-custom-validating-message",title:"Data Validation - Error Msg",sidebar_position:7,hide_title:!0,keywords:["Data Validation","Custom Error","GoFrame","GoFrame Framework","i18n","Internationalization","Validation Message","Chinese Error Message","English Error Message","Error Message Configuration"],description:"When using the data validation component of the GoFrame framework, customize error messages and support the i18n internationalization feature. By combining with the i18n component, you can easily set error messages in different languages. The document explains in detail how to configure i18n files in English and Chinese, and how to set the error message language through middleware, helping developers to handle internationalization more efficiently."},s=void 0,l={},d=[{value:"Configuration Example",id:"configuration-example",level:2},{value:"Default <code>i18n</code> Error Message",id:"default-i18n-error-message",level:3},{value:"Chinese Error Message",id:"chinese-error-message",level:3},{value:"Default Error Message",id:"default-error-message",level:3},{value:"Development Example",id:"development-example",level:2},{value:"Directory Structure",id:"directory-structure",level:3},{value:"<code>i18n</code> Files",id:"i18n-files",level:3},{value:"Example Code",id:"example-code",level:3}];function c(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["The data validation component supports the ",(0,t.jsx)(n.code,{children:"i18n"})," feature, implemented internally using the unified ",(0,t.jsx)(n.code,{children:"i18n"})," component of the ",(0,t.jsx)(n.code,{children:"goframe"})," framework. By default, it uses the default ",(0,t.jsx)(n.code,{children:"i18n"})," singleton object, i.e., the ",(0,t.jsx)(n.code,{children:"g.I18n()"})," object."]}),"\n",(0,t.jsxs)(n.p,{children:["Before further use, please refer to the chapter on configuring and using the ",(0,t.jsx)(n.code,{children:"i18n"})," internationalization feature: ",(0,t.jsx)(n.a,{href:"/en/docs/core/gi18n",children:"I18N"})]}),"\n",(0,t.jsx)(n.h2,{id:"configuration-example",children:"Configuration Example"}),"\n",(0,t.jsxs)(n.h3,{id:"default-i18n-error-message",children:["Default ",(0,t.jsx)(n.code,{children:"i18n"})," Error Message"]}),"\n",(0,t.jsxs)(n.p,{children:["The reference for the default English internationalization language configuration file: ",(0,t.jsx)(n.a,{href:"https://github.com/gogf/gf/tree/master/util/gvalid/i18n/en",children:"https://github.com/gogf/gf/tree/master/util/gvalid/i18n/en"})]}),"\n",(0,t.jsx)(n.h3,{id:"chinese-error-message",children:"Chinese Error Message"}),"\n",(0,t.jsxs)(n.p,{children:["We provide a recommended Chinese ",(0,t.jsx)(n.code,{children:"i18n"})," internationalization language configuration file: ",(0,t.jsx)(n.a,{href:"https://github.com/gogf/gf/tree/master/util/gvalid/i18n/cn",children:"https://github.com/gogf/gf/tree/master/util/gvalid/i18n/cn"})]}),"\n",(0,t.jsx)(n.h3,{id:"default-error-message",children:"Default Error Message"}),"\n",(0,t.jsxs)(n.p,{children:["When the corresponding rule's error message cannot be found in ",(0,t.jsx)(n.code,{children:"i18n"}),", it will use the error message configured in ",(0,t.jsx)(n.code,{children:"__default__"}),". This is often used in custom rules."]}),"\n",(0,t.jsx)(n.h2,{id:"development-example",children:"Development Example"}),"\n",(0,t.jsxs)(n.p,{children:["We set the error message ",(0,t.jsx)(n.code,{children:"i18n"})," language for requests uniformly through middleware."]}),"\n",(0,t.jsx)(n.h3,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["Pay attention to the project directory structure so that the default ",(0,t.jsx)(n.code,{children:"g.i18n()"})," object can automatically read the configuration. A significant number of users stumble here."]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u251C\u2500\u2500 main.go\n\u2514\u2500\u2500 i18n\n    \u251C\u2500\u2500 en.toml\n    \u2514\u2500\u2500 zh-CN.toml\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"i18n-files",children:[(0,t.jsx)(n.code,{children:"i18n"})," Files"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"en.toml"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'"ReuiredUserName" = "Please input user name"\n"ReuiredUserType" = "Please select user type"\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"zh-CN.toml"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'"ReuiredUserName" = "\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0"\n"ReuiredUserType" = "\u8BF7\u9009\u62E9\u7528\u6237\u7C7B\u578B"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"example-code",children:"Example Code"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/i18n/gi18n"\n    "github.com/gogf/gf/v2/os/gctx"\n    "github.com/gogf/gf/v2/util/gconv"\n)\n\nfunc main() {\n    type User struct {\n        Name string `v:"required#ReuiredUserName"`\n        Type int    `v:"required#ReuiredUserType"`\n    }\n    var (\n        ctx  = gctx.New()\n        data = g.Map{\n            "name": "john",\n        }\n        user  = User{}\n        ctxEn = gi18n.WithLanguage(ctx, "en")\n        ctxCh = gi18n.WithLanguage(ctx, "zh-CN")\n    )\n\n    if err := gconv.Scan(data, &user); err != nil {\n        panic(err)\n    }\n    // English\n    if err := g.Validator().Assoc(data).Data(user).Run(ctxEn); err != nil {\n        g.Dump(err.String())\n    }\n    // Chinese\n    if err := g.Validator().Assoc(data).Data(user).Run(ctxCh); err != nil {\n        g.Dump(err.String())\n    }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"After execution, the terminal output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Please select user type\n\u8BF7\u9009\u62E9\u7528\u6237\u7C7B\u578B\n"})})]})}function u(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},250065:function(e,n,i){i.d(n,{Z:function(){return s},a:function(){return o}});var r=i(667294);let t={},a=r.createContext(t);function o(e){let n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);