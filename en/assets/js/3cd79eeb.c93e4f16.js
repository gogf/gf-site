"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["97264"],{753243:function(e,n,t){t.r(n),t.d(n,{metadata:()=>o,contentTitle:()=>l,default:()=>u,assets:()=>a,toc:()=>c,frontMatter:()=>s});var o=JSON.parse('{"id":"quick/\u9879\u76EE\u811A\u624B\u67B6/\u63A5\u53E3\u5F00\u53D1/Step4 - \u751F\u6210controller\u4EE3\u7801","title":"Step4 - Generate Controller","description":"Generate controller code based on API definition, including API API files, route object management, and route implementation code, using GoFrame framework\'s command tool to quickly generate relevant code templates, ensuring complete implementation of the API, and demonstrating how to implement specific business logic through files.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/quick/\u9879\u76EE\u811A\u624B\u67B6/\u63A5\u53E3\u5F00\u53D1/Step4 - \u751F\u6210controller\u4EE3\u7801.md","sourceDirName":"quick/\u9879\u76EE\u811A\u624B\u67B6/\u63A5\u53E3\u5F00\u53D1","slug":"/quick/scaffold-api-controller","permalink":"/en/quick/scaffold-api-controller","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/quick/\u9879\u76EE\u811A\u624B\u67B6/\u63A5\u53E3\u5F00\u53D1/Step4 - \u751F\u6210controller\u4EE3\u7801.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732541616000,"sidebarPosition":4,"frontMatter":{"slug":"/quick/scaffold-api-controller","title":"Step4 - Generate Controller","hide_title":true,"sidebar_position":4,"keywords":["GoFrame","API Code Generation","Controller Code","Generate Controller","Code Auto Generation","API Implementation","GoFrame Framework","Route Object Management","API Route Implementation","Code Template"],"description":"Generate controller code based on API definition, including API API files, route object management, and route implementation code, using GoFrame framework\'s command tool to quickly generate relevant code templates, ensuring complete implementation of the API, and demonstrating how to implement specific business logic through files."},"sidebar":"quickSidebar","previous":{"title":"Step3 - Write API Definition","permalink":"/en/quick/scaffold-api-definition"},"next":{"title":"Step5 - Implement API Logic","permalink":"/en/quick/scaffold-api-implements"}}'),r=t("785893"),i=t("250065");let s={slug:"/quick/scaffold-api-controller",title:"Step4 - Generate Controller",hide_title:!0,sidebar_position:4,keywords:["GoFrame","API Code Generation","Controller Code","Generate Controller","Code Auto Generation","API Implementation","GoFrame Framework","Route Object Management","API Route Implementation","Code Template"],description:"Generate controller code based on API definition, including API API files, route object management, and route implementation code, using GoFrame framework's command tool to quickly generate relevant code templates, ensuring complete implementation of the API, and demonstrating how to implement specific business logic through files."},l=void 0,a={},c=[{value:"Generate Codes From API Definition",id:"generate-codes-from-api-definition",level:2},{value:"Abstraction API For API",id:"abstraction-api-for-api",level:2},{value:"Controller Router Object",id:"controller-router-object",level:2},{value:"Controller Router Implementation",id:"controller-router-implementation",level:2},{value:"Learning Summary",id:"learning-summary",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"generate-codes-from-api-definition",children:"Generate Codes From API Definition"}),"\n",(0,r.jsxs)(n.p,{children:["Once the ",(0,r.jsx)(n.code,{children:"api"})," definition is completed, we generate the controller code through the ",(0,r.jsx)(n.code,{children:"make ctrl"})," command (or ",(0,r.jsx)(n.code,{children:"gf gen ctrl"}),")."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"$ make ctrl\ngenerated: /Users/john/Temp/demo/api/user/user.go\ngenerated: /Users/john/Temp/demo/internal/controller/user/user.go\ngenerated: /Users/john/Temp/demo/internal/controller/user/user_new.go\ngenerated: /Users/john/Temp/demo/internal/controller/user/user_v1_create.go\ngenerated: /Users/john/Temp/demo/internal/controller/user/user_v1_update.go\ngenerated: /Users/john/Temp/demo/internal/controller/user/user_v1_delete.go\ngenerated: /Users/john/Temp/demo/internal/controller/user/user_v1_get_one.go\ngenerated: /Users/john/Temp/demo/internal/controller/user/user_v1_get_list.go\ndone!\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"goframe api API controller",src:t(32737).Z+"",width:"3420",height:"2002"})}),"\n",(0,r.jsxs)(n.p,{children:["The generated codes mainly include ",(0,r.jsx)(n.code,{children:"3"})," types of files."]}),"\n",(0,r.jsx)(n.h2,{id:"abstraction-api-for-api",children:"Abstraction API For API"}),"\n",(0,r.jsxs)(n.p,{children:["Defines the ",(0,r.jsx)(n.code,{children:"api API"})," to ensure the completeness of the controller's API implementation, avoiding issues of missing API implementations in ",(0,r.jsx)(n.code,{children:"controller"}),". Since ",(0,r.jsx)(n.code,{children:"GoFrame"})," is a rigorous development framework, it controls such details well. Whether or not this feature is used by developers can be decided based on specific scenarios and needs."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"/Users/john/Temp/demo/api/user/user.go\n"})}),"\n",(0,r.jsx)(n.p,{children:"This file is maintained by the development tool, and developers do not need to worry about it."}),"\n",(0,r.jsx)(n.p,{children:"Content is as follows:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",metastring:'title="api/user/user.go"',children:'// =================================================================================\n// Code generated and maintained by GoFrame CLI tool. DO NOT EDIT.\n// =================================================================================\n\npackage user\n\nimport (\n    "context"\n\n    "demo/api/user/v1"\n)\n\ntype IUserV1 interface {\n    Create(ctx context.Context, req *v1.CreateReq) (res *v1.CreateRes, err error)\n    Update(ctx context.Context, req *v1.UpdateReq) (res *v1.UpdateRes, err error)\n    Delete(ctx context.Context, req *v1.DeleteReq) (res *v1.DeleteRes, err error)\n    GetOne(ctx context.Context, req *v1.GetOneReq) (res *v1.GetOneRes, err error)\n    GetList(ctx context.Context, req *v1.GetListReq) (res *v1.GetListRes, err error)\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"controller-router-object",children:"Controller Router Object"}),"\n",(0,r.jsx)(n.p,{children:"Used to manage the initialization of the controller, as well as data structures and constant definitions used internally by the control."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"generated: /Users/john/Temp/demo/internal/controller/user/user.go\ngenerated: /Users/john/Temp/demo/internal/controller/user/user_new.go\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Among them, ",(0,r.jsx)(n.code,{children:"internal/controller/user/user.go"})," is an empty source file, which can be used to define data structures, constants, and other content used by the controller internally."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",metastring:'title="internal/controller/user/user.go"',children:"// =================================================================================\n// This is auto-generated by GoFrame CLI tool only once. Fill this file as you wish.\n// =================================================================================\n\npackage user\n\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Another file ",(0,r.jsx)(n.code,{children:"internal/controller/user/user_new.go"})," is an auto-generated route object creation file."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",metastring:'title="internal/controller/user/user_new.go"',children:'// =================================================================================\n// This is auto-generated by GoFrame CLI tool only once. Fill this file as you wish.\n// =================================================================================\n\npackage user\n\nimport (\n    "demo/api/user"\n)\n\ntype ControllerV1 struct{}\n\nfunc NewV1() user.IUserV1 {\n    return &ControllerV1{}\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Both of these files will only be generated once, after which developers can freely modify and extend them."}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["If later we need to define a ",(0,r.jsx)(n.code,{children:"v2"})," API, the ",(0,r.jsx)(n.code,{children:"make ctrl"})," command will similarly generate a ",(0,r.jsx)(n.code,{children:"type ControllerV2 struct{}"})," structure definition and a ",(0,r.jsx)(n.code,{children:"func NewV2() user.IUserV2"})," initialization method."]})}),"\n",(0,r.jsx)(n.h2,{id:"controller-router-implementation",children:"Controller Router Implementation"}),"\n",(0,r.jsxs)(n.p,{children:["Used for the implementation code files of specific ",(0,r.jsx)(n.code,{children:"api"})," APIs. By default, codes are generated in the form of one source file per ",(0,r.jsx)(n.code,{children:"api"})," API. Of course, it is also possible to control the aggregation of APIs defined in ",(0,r.jsx)(n.code,{children:"api"})," files into a corresponding single source file. For specific command introductions and configurations, please refer to the chapter ",(0,r.jsx)(n.a,{href:"/en/docs/cli/gen-ctrl",children:"Controller Generating"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"generated: /Users/john/Temp/demo/internal/controller/user/user_v1_create.go\ngenerated: /Users/john/Temp/demo/internal/controller/user/user_v1_update.go\ngenerated: /Users/john/Temp/demo/internal/controller/user/user_v1_delete.go\ngenerated: /Users/john/Temp/demo/internal/controller/user/user_v1_get_one.go\ngenerated: /Users/john/Temp/demo/internal/controller/user/user_v1_get_list.go\n"})}),"\n",(0,r.jsx)(n.p,{children:"Let's open one of the files to view the generated code template:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",metastring:'title="internal/controller/user/user_v1_create.go"',children:'package user\n\nimport (\n    "context"\n\n    "github.com/gogf/gf/v2/errors/gcode"\n    "github.com/gogf/gf/v2/errors/gerror"\n\n    "demo/api/user/v1"\n)\n\nfunc (c *ControllerV1) Create(ctx context.Context, req *v1.CreateReq) (res *v1.CreateRes, err error) {\n    return nil, gerror.NewCode(gcode.CodeNotImplemented)\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"As we can see, this is just the implementation template for the create API we defined. We just need to complete the specific business logic of this route function."}),"\n",(0,r.jsx)(n.h2,{id:"learning-summary",children:"Learning Summary"}),"\n",(0,r.jsxs)(n.p,{children:["Example source code for this chapter: ",(0,r.jsx)(n.a,{href:"https://github.com/gogf/quick-demo/tree/main/internal/controller/user",children:"https://github.com/gogf/quick-demo/tree/main/internal/controller/user"})]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"GoFrame"})," scaffolding tool helps us generate all the code unrelated to business logic. We only need to focus on the implementation of the business logic. Moreover, these auto-generated code files are mostly fully maintained by the tool, except for a few code files that developers can extend, thus we do not need to worry about their future maintenance."]}),"\n",(0,r.jsxs)(n.p,{children:["Yes, the goal of the ",(0,r.jsx)(n.code,{children:"GoFrame"})," scaffolding tool is to allow developers to focus on the business logic itself, while all work other than business logic is handled by the development framework and scaffolding tool."]}),"\n",(0,r.jsx)(n.p,{children:"Such a development method is extremely convenient, not too comfortable! Do you think that\u2019s all? Of course not, in the Quick Start chapter we only introduce some beginner-level features. When you delve deeper into her, you will discover more of her goodness and her understanding nature."}),"\n",(0,r.jsxs)(n.p,{children:["Next, we will complete the business logic implementation of the API and feel the charm of the ",(0,r.jsx)(n.code,{children:"GoFrame"})," database ",(0,r.jsx)(n.code,{children:"ORM"})," component."]})]})}function u(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},32737:function(e,n,t){t.d(n,{Z:function(){return o}});let o=t.p+"assets/images/QQ_1731678085194-a0391f874abac07b097c3e537a376098.png"},250065:function(e,n,t){t.d(n,{Z:function(){return l},a:function(){return s}});var o=t(667294);let r={},i=o.createContext(r);function s(e){let n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);