"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["57927"],{988906:function(e,n,t){t.r(n),t.d(n,{metadata:()=>s,contentTitle:()=>i,default:()=>m,assets:()=>d,toc:()=>c,frontMatter:()=>a});var s=JSON.parse('{"id":"docs/WEB\u670D\u52A1\u5F00\u53D1/\u8BF7\u6C42\u8F93\u5165/\u8BF7\u6C42\u8F93\u5165-JSONXML","title":"Request - JSON/XML","description":"GoFrame framework\'s native support for JSON and XML data formats, detailing how to handle client-submitted data formats through the Request object of the GoFrame framework to improve development efficiency. The documentation includes sample code demonstrating how to parse and validate submitted data, as well as how to perform data format conversion, providing developers with convenient data acquisition and processing capabilities.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/WEB\u670D\u52A1\u5F00\u53D1/\u8BF7\u6C42\u8F93\u5165/\u8BF7\u6C42\u8F93\u5165-JSONXML.md","sourceDirName":"docs/WEB\u670D\u52A1\u5F00\u53D1/\u8BF7\u6C42\u8F93\u5165","slug":"/docs/web/request-json-xml-parameter","permalink":"/en/docs/web/request-json-xml-parameter","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/WEB\u670D\u52A1\u5F00\u53D1/\u8BF7\u6C42\u8F93\u5165/\u8BF7\u6C42\u8F93\u5165-JSONXML.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732451468000,"sidebarPosition":3,"frontMatter":{"slug":"/docs/web/request-json-xml-parameter","title":"Request - JSON/XML","sidebar_position":3,"hide_title":true,"keywords":["GoFrame","GoFrame framework","request input","JSON","XML","data format","GoFrame documentation","data validation","API development","web framework"],"description":"GoFrame framework\'s native support for JSON and XML data formats, detailing how to handle client-submitted data formats through the Request object of the GoFrame framework to improve development efficiency. The documentation includes sample code demonstrating how to parse and validate submitted data, as well as how to perform data format conversion, providing developers with convenient data acquisition and processing capabilities."},"sidebar":"mainSidebar","previous":{"title":"Request - Validation","permalink":"/en/docs/web/request-validation"},"next":{"title":"Request - Default Value","permalink":"/en/docs/web/request-default-value"}}'),r=t("785893"),o=t("250065");let a={slug:"/docs/web/request-json-xml-parameter",title:"Request - JSON/XML",sidebar_position:3,hide_title:!0,keywords:["GoFrame","GoFrame framework","request input","JSON","XML","data format","GoFrame documentation","data validation","API development","web framework"],description:"GoFrame framework's native support for JSON and XML data formats, detailing how to handle client-submitted data formats through the Request object of the GoFrame framework to improve development efficiency. The documentation includes sample code demonstrating how to parse and validate submitted data, as well as how to perform data format conversion, providing developers with convenient data acquisition and processing capabilities."},i=void 0,d={},c=[{value:"Example 1, Simple Example",id:"example-1-simple-example",level:2},{value:"Example 2, Object Conversion and Validation",id:"example-2-object-conversion-and-validation",level:2}];function l(e){let n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Starting from version ",(0,r.jsx)(n.code,{children:"GoFrame v1.11"}),", the ",(0,r.jsx)(n.code,{children:"Request"})," object provides native support for client-submitted ",(0,r.jsx)(n.code,{children:"JSON/XML"})," data formats, offering developers more convenient data acquisition features to further improve development efficiency."]}),"\n",(0,r.jsx)(n.h2,{id:"example-1-simple-example",children:"Example 1, Simple Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/net/ghttp"\n)\n\nfunc main() {\n    s := g.Server()\n    s.BindHandler("/", func(r *ghttp.Request) {\n        r.Response.Writef("name: %v, pass: %v", r.Get("name"), r.Get("pass"))\n    })\n    s.SetPort(8199)\n    s.Run()\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["After execution, we use the ",(0,r.jsx)(n.code,{children:"curl"})," tool to submit data for testing:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Query"})," Data Format"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'$ curl "http://127.0.0.1:8199/?name=john&pass=123"\nname: john, pass: 123\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Form"})," Submit Form"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'$ curl -d "name=john&pass=123" "http://127.0.0.1:8199/"\nname: john, pass: 123\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"JSON"})," Data Format"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'$ curl -d \'{"name":"john","pass":"123"}\' "http://127.0.0.1:8199/"\nname: john, pass: 123\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"XML"})," Data Format"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'$ curl -d \'<?xml version="1.0" encoding="UTF-8"?><doc><name>john</name><pass>123</pass></doc>\' "http://127.0.0.1:8199/"\nname: john, pass: 123\n\n\n$ curl -d \'<doc><name>john</name><pass>123</pass></doc>\' "http://127.0.0.1:8199/"\nname: john, pass: 123\n'})}),"\n",(0,r.jsx)(n.h2,{id:"example-2-object-conversion-and-validation",children:"Example 2, Object Conversion and Validation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/net/ghttp"\n    "github.com/gogf/gf/v2/util/gvalid"\n)\n\ntype RegisterReq struct {\n    Name  string `p:"username"  v:"required|length:6,30#Please enter account|Account length should be between:{min} to:{max}"`\n    Pass  string `p:"password1" v:"required|length:6,30#Please enter password|Password is too short"`\n    Pass2 string `p:"password2" v:"required|length:6,30|same:password1#Please confirm password|Password is too short|Passwords do not match"`\n}\n\ntype RegisterRes struct {\n    Code  int         `json:"code"`\n    Error string      `json:"error"`\n    Data  interface{} `json:"data"`\n}\n\nfunc main() {\n    s := g.Server()\n    s.BindHandler("/register", func(r *ghttp.Request) {\n        var req *RegisterReq\n        if err := r.Parse(&req); err != nil {\n            // Validation error.\n            if v, ok := err.(gvalid.Error); ok {\n                r.Response.WriteJsonExit(RegisterRes{\n                    Code:  1,\n                    Error: v.FirstString(),\n                })\n            }\n            // Other error.\n            r.Response.WriteJsonExit(RegisterRes{\n                Code:  1,\n                Error: err.Error(),\n            })\n        }\n        // ...\n        r.Response.WriteJsonExit(RegisterRes{\n            Data: req,\n        })\n    })\n    s.SetPort(8199)\n    s.Run()\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["After execution, we use the ",(0,r.jsx)(n.code,{children:"curl"})," tool to submit data for testing:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"JSON"})," Data Format"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'$ curl -d \'{"username":"johngcn","password1":"123456","password2":"123456"}\' "http://127.0.0.1:8199/register"\n{"code":0,"error":"","data":{"Name":"johngcn","Pass":"123456","Pass2":"123456"}}\n\n\n$ curl -d \'{"username":"johngcn","password1":"123456","password2":"1234567"}\' "http://127.0.0.1:8199/register"\n{"code":1,"error":"Passwords do not match","data":null}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["As you can see, the ",(0,r.jsx)(n.code,{children:"JSON"})," content we submitted is intelligently converted into a structure object by the ",(0,r.jsx)(n.code,{children:"Parse"})," method."]}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"XML"})," Data Format"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'$ curl -d \'<?xml version="1.0" encoding="UTF-8"?><doc><username>johngcn</username><password1>123456</password1><password2>123456</password2></doc>\' "http://127.0.0.1:8199/register"\n{"code":0,"error":"","data":{"Name":"johngcn","Pass":"123456","Pass2":"123456"}}\n\n\n$ curl -d \'<?xml version="1.0" encoding="UTF-8"?><doc><username>johngcn</username><password1>123456</password1><password2>1234567</password2></doc>\' "http://127.0.0.1:8199/register"\n{"code":1,"error":"Passwords do not match","data":null}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["As you can see, the ",(0,r.jsx)(n.code,{children:"XML"})," content we submitted is also intelligently converted into a structure object by the ",(0,r.jsx)(n.code,{children:"Parse"})," method."]})]})}function m(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return i},a:function(){return a}});var s=t(667294);let r={},o=s.createContext(r);function a(e){let n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);