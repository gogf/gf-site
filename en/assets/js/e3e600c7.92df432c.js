"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["13072"],{935182:function(e,n,o){o.r(n),o.d(n,{metadata:()=>c,contentTitle:()=>s,default:()=>a,assets:()=>r,toc:()=>d,frontMatter:()=>t});var c=JSON.parse('{"id":"\u6A21\u5757\u5217\u8868/\u7CFB\u7EDF\u76F8\u5173/gflock -\u6587\u4EF6\u9501\u6A21\u5757","title":"gflock (\u6587\u4EF6\u9501\u6A21\u5757)","description":"\u6587\u4EF6\u9501\u5E38\u7528\u4E8E\u591A\u8FDB\u7A0B\u7684\u4E92\u65A5\u9501\u64CD\u4F5C\uFF0C\u5F53\u4E00\u4E2A\u8FDB\u7A0B\u5BF9\u6307\u5B9A\u6587\u4EF6\u9501\u8FDB\u7A0B Lock \u4E4B\u540E\uFF0C\u5176\u4ED6\u8FDB\u7A0B\u5C06\u4F1A\u88AB\u963B\u585E\u7B49\u5F85\uFF0C\u76F4\u5230\u8BE5\u6587\u4EF6\u9501\u88AB\u540C\u4E00\u4E2A\u8FDB\u7A0B Unlock(\u6216\u8005\u5BF9\u5E94\u8FDB\u7A0B\u9000\u51FA)\u3002\u540C\u65F6\uFF0C gflock \u4E5F\u652F\u6301\u7C7B TryLock/TryRLock \u7279\u6027\u3002 gflock \u7684\u6587\u4EF6\u9501\u7279\u6027\u662F\u4F9D\u9760\u5E95\u5C42\u7CFB\u7EDF\u63D0\u4F9B\u7684\u6587\u4EF6\u9501API\u5B9E\u73B0\u7684\u3002","source":"@site/versioned_docs/version-1.16.x/\u6A21\u5757\u5217\u8868/\u7CFB\u7EDF\u76F8\u5173/gflock -\u6587\u4EF6\u9501\u6A21\u5757.md","sourceDirName":"\u6A21\u5757\u5217\u8868/\u7CFB\u7EDF\u76F8\u5173","slug":"/\u6A21\u5757\u5217\u8868/\u7CFB\u7EDF\u76F8\u5173/gflock -\u6587\u4EF6\u9501\u6A21\u5757","permalink":"/en/1.16.x/\u6A21\u5757\u5217\u8868/\u7CFB\u7EDF\u76F8\u5173/gflock -\u6587\u4EF6\u9501\u6A21\u5757","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/versioned_docs/version-1.16.x/\u6A21\u5757\u5217\u8868/\u7CFB\u7EDF\u76F8\u5173/gflock -\u6587\u4EF6\u9501\u6A21\u5757.md","tags":[],"version":"1.16.x","lastUpdatedBy":"John","lastUpdatedAt":1730365530000,"sidebarPosition":9,"frontMatter":{"title":"gflock (\u6587\u4EF6\u9501\u6A21\u5757)","sidebar_position":9,"hide_title":true},"sidebar":"tutorialSidebar","previous":{"title":"gmutex (\u9AD8\u7EA7\u4E92\u65A5\u9501)","permalink":"/en/1.16.x/\u6A21\u5757\u5217\u8868/\u7CFB\u7EDF\u76F8\u5173/gmutex -\u9AD8\u7EA7\u4E92\u65A5\u9501"},"next":{"title":"gmlock (\u5185\u5B58\u9501\u6A21\u5757)","permalink":"/en/1.16.x/\u6A21\u5757\u5217\u8868/\u7CFB\u7EDF\u76F8\u5173/gmlock -\u5185\u5B58\u9501\u6A21\u5757"}}'),l=o("785893"),i=o("250065");let t={title:"gflock (\u6587\u4EF6\u9501\u6A21\u5757)",sidebar_position:9,hide_title:!0},s=void 0,r={},d=[];function g(e){let n={a:"a",blockquote:"blockquote",code:"code",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.p,{children:["\u6587\u4EF6\u9501\u5E38\u7528\u4E8E\u591A\u8FDB\u7A0B\u7684\u4E92\u65A5\u9501\u64CD\u4F5C\uFF0C\u5F53\u4E00\u4E2A\u8FDB\u7A0B\u5BF9\u6307\u5B9A\u6587\u4EF6\u9501\u8FDB\u7A0B ",(0,l.jsx)(n.code,{children:"Lock"})," \u4E4B\u540E\uFF0C\u5176\u4ED6\u8FDB\u7A0B\u5C06\u4F1A\u88AB\u963B\u585E\u7B49\u5F85\uFF0C\u76F4\u5230\u8BE5\u6587\u4EF6\u9501\u88AB\u540C\u4E00\u4E2A\u8FDB\u7A0B ",(0,l.jsx)(n.code,{children:"Unlock"}),"(\u6216\u8005\u5BF9\u5E94\u8FDB\u7A0B\u9000\u51FA)\u3002\u540C\u65F6\uFF0C ",(0,l.jsx)(n.code,{children:"gflock"})," \u4E5F\u652F\u6301\u7C7B ",(0,l.jsx)(n.code,{children:"TryLock/TryRLock"})," \u7279\u6027\u3002 ",(0,l.jsx)(n.code,{children:"gflock"})," \u7684\u6587\u4EF6\u9501\u7279\u6027\u662F\u4F9D\u9760\u5E95\u5C42\u7CFB\u7EDF\u63D0\u4F9B\u7684\u6587\u4EF6\u9501API\u5B9E\u73B0\u7684\u3002"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\u6CE8\u610F\u6587\u4EF6\u9501\u662F\u9488\u5BF9\u4E8E\u591A\u8FDB\u7A0B\u4E92\u65A5\u64CD\u4F5C\uFF0C\u800C\u4E0D\u662F\u5355\u8FDB\u7A0B\u591A\u534F\u7A0B\u4E92\u65A5\u3002\u5728\u591A\u8FDB\u7A0B\u9700\u8981\u63A7\u5236\u4E1A\u52A1\u4E92\u65A5\u64CD\u4F5C\u7684\u65F6\u5019\u7279\u522B\u6709\u7528\uFF0C\u4F8B\u5982\u591A\u8FDB\u7A0B\u7684\u5B9A\u65F6\u4EFB\u52A1\u7BA1\u7406\u573A\u666F\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5B89\u88C5\u6A21\u5757"}),"\uFF1A"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"go get -u github.com/gogf/gflock\n\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u4F7F\u7528\u65B9\u5F0F"}),"\uFF1A"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'import "github.com/gogf/gflock"\n\n'})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u63A5\u53E3\u6587\u6863"}),"\uFF1A"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://godoc.org/github.com/gogf/gflock",children:"https://godoc.org/github.com/gogf/gflock"})}),"\n",(0,l.jsxs)(n.p,{children:["\u65B9\u6CD5\u6BD4\u8F83\u5B9E\u7528\u4E5F\u5F88\u7B80\u5355\uFF0C\u6211\u4EEC\u8FD9\u91CC\u6765\u5C55\u793A\u4E00\u4E2A ",(0,l.jsx)(n.code,{children:"Lock/Unlock"})," \u7684\u793A\u4F8B\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "time"\n    "github.com/gogf/gf/os/glog"\n    "github.com/gogf/gf/os/gproc"\n    "github.com/gogf/gflock"\n)\n\nfunc main() {\n    l := gflock.New("demo.lock")\n    l.Lock()\n    glog.Printf("locked by pid: %d", gproc.Pid())\n    time.Sleep(10*time.Second)\n    l.Unlock()\n    glog.Printf("unlocked by pid: %d", gproc.Pid())\n}\n\n'})}),"\n",(0,l.jsxs)(n.p,{children:["\u6211\u4EEC\u5C06\u8FD9\u4E2A\u7A0B\u5E8F\u8FD0\u884C\u4E24\u6B21\uFF0C\u4F1A\u751F\u6210\u4E24\u4E2A\u8FDB\u7A0B\uFF0C\u8FDB\u7A0BID\u5206\u522B\u4E3A ",(0,l.jsx)(n.code,{children:"25694"})," \u53CA ",(0,l.jsx)(n.code,{children:"25737"}),"(\u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"ps"})," \u547D\u4EE4\u6216\u8005\u8FDB\u7A0B\u7BA1\u7406\u5668\u67E5\u770B)\u3002\u4E24\u4E2A\u8FDB\u7A0B\u90FD\u4F1A\u64CD\u4F5C\u540C\u4E00\u4E2A\u6587\u4EF6\u9501 ",(0,l.jsx)(n.code,{children:"demo.lock"})," \u6587\u4EF6\uFF0C\u4F46\u662F\u53EA\u6709\u7B2C\u4E00\u4E2A\u8FDB\u7A0B ",(0,l.jsx)(n.code,{children:"25694"})," \u5F97\u5230\u4E86\u8BE5\u6587\u4EF6\u9501\u64CD\u4F5C\u6743\u9650\uFF0C\u7B2C\u4E8C\u4E2A\u8FDB\u7A0B ",(0,l.jsx)(n.code,{children:"25737"})," \u53EA\u6709\u7B49\u5F85\u8BE5\u6587\u4EF6\u9501\u91CA\u653E\u4E4B\u540E\u624D\u80FD\u8FDB\u4E00\u6B65\u64CD\u4F5C\uFF0C\u56E0\u6B64\u88AB\u963B\u585E\u3002\u7A0B\u5E8F\u4E2D\u7684 ",(0,l.jsx)(n.code,{children:"Sleep"})," \u64CD\u4F5C\u6B63\u662F\u4E3A\u4E86\u6F14\u793A\u8FD9\u4E00\u963B\u585E\u7ED3\u679C\u800C\u7279\u610F\u8BBE\u5B9A\u7684\u3002\u5F53\u7B2C\u4E00\u4E2A\u8FDB\u7A0B ",(0,l.jsx)(n.code,{children:"25694"})," \u91CA\u653E\u6587\u4EF6\u9501\u4E4B\u540E\uFF0C\u7B2C\u4E8C\u4E2A\u8FDB\u7A0B ",(0,l.jsx)(n.code,{children:"25737"})," \u5C06\u4F1A\u7ACB\u5373\u5F00\u59CB\u6267\u884C\u3002\u6700\u7EC8\u7684\u6267\u884C\u7ED3\u679C\u5982\u4E0B\uFF08\u6CE8\u610F\u6253\u5370\u65F6\u95F4\u7684\u5DEE\u5F02\uFF09\uFF1A"]}),"\n",(0,l.jsxs)(n.p,{children:["\u8FDB\u7A0B1\uFF08 ",(0,l.jsx)(n.code,{children:"25694"}),"\uFF09\uFF1A"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"2018-05-18 13:51:31.191 locked by pid: 25694\n2018-05-18 13:51:34.191 unlocked by pid: 25694\n\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u8FDB\u7A0B2\uFF08 ",(0,l.jsx)(n.code,{children:"25737"}),"\uFF09\uFF1A"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"2018-05-18 13:51:34.191 locked by pid: 25737\n2018-05-18 13:51:37.191 unlocked by pid: 25737\n\n"})})]})}function a(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(g,{...e})}):g(e)}},250065:function(e,n,o){o.d(n,{Z:function(){return s},a:function(){return t}});var c=o(667294);let l={},i=c.createContext(l);function t(e){let n=c.useContext(i);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),c.createElement(i.Provider,{value:n},e.children)}}}]);