"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["13695"],{361441:function(e,n,t){t.r(n),t.d(n,{metadata:()=>i,contentTitle:()=>a,default:()=>d,assets:()=>m,toc:()=>l,frontMatter:()=>r});var i=JSON.parse('{"id":"docs/\u7EC4\u4EF6\u5217\u8868/\u7CFB\u7EDF\u76F8\u5173/\u65F6\u95F4\u7BA1\u7406-gtime/\u65F6\u95F4\u7BA1\u7406-\u65F6\u533A\u8BBE\u7F6E","title":"Time - Time Zone","description":"Use the gtime component in the GoFrame framework for global time zone settings, explain the usage limitations and precautions of the SetTimeZone method, and provide code examples to demonstrate how to correctly manage and convert time in programs, especially in business scenarios involving multiple time zones.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u7EC4\u4EF6\u5217\u8868/\u7CFB\u7EDF\u76F8\u5173/\u65F6\u95F4\u7BA1\u7406-gtime/\u65F6\u95F4\u7BA1\u7406-\u65F6\u533A\u8BBE\u7F6E.md","sourceDirName":"docs/\u7EC4\u4EF6\u5217\u8868/\u7CFB\u7EDF\u76F8\u5173/\u65F6\u95F4\u7BA1\u7406-gtime","slug":"/docs/components/os-gtime-timezone","permalink":"/en/docs/components/os-gtime-timezone","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u7EC4\u4EF6\u5217\u8868/\u7CFB\u7EDF\u76F8\u5173/\u65F6\u95F4\u7BA1\u7406-gtime/\u65F6\u95F4\u7BA1\u7406-\u65F6\u533A\u8BBE\u7F6E.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732443619000,"sidebarPosition":3,"frontMatter":{"slug":"/docs/components/os-gtime-timezone","title":"Time - Time Zone","sidebar_position":3,"hide_title":true,"keywords":["GoFrame","Time Zone Settings","SetTimeZone","Time Management","gtime","Standard Library","Time Conversion","Log Output","Global Settings","Programming Guide"],"description":"Use the gtime component in the GoFrame framework for global time zone settings, explain the usage limitations and precautions of the SetTimeZone method, and provide code examples to demonstrate how to correctly manage and convert time in programs, especially in business scenarios involving multiple time zones."},"sidebar":"mainSidebar","previous":{"title":"Time - Examples","permalink":"/en/docs/components/os-gtime-common-funcs"},"next":{"title":"Time - Methods","permalink":"/en/docs/components/os-gtime-funcs"}}'),o=t("785893"),s=t("250065");let r={slug:"/docs/components/os-gtime-timezone",title:"Time - Time Zone",sidebar_position:3,hide_title:!0,keywords:["GoFrame","Time Zone Settings","SetTimeZone","Time Management","gtime","Standard Library","Time Conversion","Log Output","Global Settings","Programming Guide"],description:"Use the gtime component in the GoFrame framework for global time zone settings, explain the usage limitations and precautions of the SetTimeZone method, and provide code examples to demonstrate how to correctly manage and convert time in programs, especially in business scenarios involving multiple time zones."},a=void 0,m={},l=[{value:"<code>SetTimeZone</code> Setting Global Time Zone",id:"settimezone-setting-global-time-zone",level:2},{value:"Time Zone Settings Precautions",id:"time-zone-settings-precautions",level:2},{value:"<code>SetTimeZone</code> Method Multiple Calls Error",id:"settimezone-method-multiple-calls-error",level:3},{value:"Initialization Issue with the <code>time</code> Package in Business Projects",id:"initialization-issue-with-the-time-package-in-business-projects",level:3}];function c(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.h2,{id:"settimezone-setting-global-time-zone",children:[(0,o.jsx)(n.code,{children:"SetTimeZone"})," Setting Global Time Zone"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n    "time"\n\n    "github.com/gogf/gf/v2/os/gtime"\n)\n\nfunc main() {\n    // Set the global time zone for the process\n    err := gtime.SetTimeZone("Asia/Tokyo")\n    if err != nil {\n        panic(err)\n    }\n\n    // Use gtime to get the current time\n    fmt.Println(gtime.Now().String())\n\n    // Use standard library to get the current time\n    fmt.Println(time.Now().String())\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"After execution, the output result is:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"2023-01-06 15:27:38\n2023-01-06 15:27:38.753909 +0900 JST m=+0.002758145\n"})}),"\n",(0,o.jsx)(n.h2,{id:"time-zone-settings-precautions",children:"Time Zone Settings Precautions"}),"\n",(0,o.jsxs)(n.h3,{id:"settimezone-method-multiple-calls-error",children:[(0,o.jsx)(n.code,{children:"SetTimeZone"})," Method Multiple Calls Error"]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"SetTimeZone"})," method allows setting the global time zone only once. If called multiple times with different time zones, subsequent calls will fail and return an ",(0,o.jsx)(n.code,{children:"error"}),"."]}),"\n",(0,o.jsxs)(n.h3,{id:"initialization-issue-with-the-time-package-in-business-projects",children:["Initialization Issue with the ",(0,o.jsx)(n.code,{children:"time"})," Package in Business Projects"]}),"\n",(0,o.jsxs)(n.p,{children:["The global setting of the program's time zone must be called before importing the standard library's ",(0,o.jsx)(n.code,{children:"time"})," package, as it initializes upon import, preventing further global time zone changes. Time zone conversions on specific time objects can only be done using the ",(0,o.jsx)(n.code,{children:"ToLocation"})," method (or the standard library's ",(0,o.jsx)(n.code,{children:"In"})," method). An example of converting using ",(0,o.jsx)(n.code,{children:"ToLocation"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n    "time"\n\n    "github.com/gogf/gf/v2/os/gtime"\n)\n\nfunc main() {\n    // Set the global time zone for the process\n    err := gtime.SetTimeZone("Asia/Tokyo")\n    if err != nil {\n        panic(err)\n    }\n\n    // Use gtime to get the current time\n    fmt.Println(gtime.Now())\n\n    // Use standard library to get the current time\n    fmt.Println(time.Now())\n\n    // Perform time zone conversion on a specific time object\n    local, err := time.LoadLocation("Asia/Shanghai")\n    if err != nil {\n        panic(err)\n    }\n    fmt.Println(gtime.Now().ToLocation(local))\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"After execution, the terminal outputs:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"2023-01-06 15:37:38\n2023-01-06 15:37:38.753909 +0900 JST m=+0.002758145\n2023-01-06 14:37:38\n"})}),"\n",(0,o.jsxs)(n.p,{children:["In business projects, there are often many business packages ",(0,o.jsx)(n.code,{children:"import"})," before the ",(0,o.jsx)(n.code,{children:"main"})," package, which can cause initialization issues with the ",(0,o.jsx)(n.code,{children:"time"})," package. Therefore, if you need to set the time zone globally, it is recommended to call the ",(0,o.jsx)(n.code,{children:"SetTimeZone"})," method through an independent package and execute ",(0,o.jsx)(n.code,{children:"import"})," at the very beginning of the ",(0,o.jsx)(n.code,{children:"main"})," package to avoid initialization issues with the ",(0,o.jsx)(n.code,{children:"time"})," package. For example:"]}),"\n",(0,o.jsxs)(n.p,{children:["Related reference link: ",(0,o.jsx)(n.a,{href:"https://stackoverflow.com/questions/54363451/setting-timezone-globally-in-golang",children:"https://stackoverflow.com/questions/54363451/setting-timezone-globally-in-golang"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    _ "boot/time"\n\n    "fmt"\n    "time"\n)\n\nfunc main() {\n    // Use gtime to get the current time\n    fmt.Println(gtime.Now().String())\n\n    // Use standard library to get the current time\n    fmt.Println(time.Now().String())\n}\n'})})]})}function d(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return a},a:function(){return r}});var i=t(667294);let o={},s=i.createContext(o);function r(e){let n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);