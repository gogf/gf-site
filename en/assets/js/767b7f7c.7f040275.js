"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["68393"],{696033:function(e,n,i){i.r(n),i.d(n,{metadata:()=>s,contentTitle:()=>t,default:()=>h,assets:()=>c,toc:()=>l,frontMatter:()=>r});var s=JSON.parse('{"id":"docs/\u7EC4\u4EF6\u5217\u8868/NoSQL Redis/Redis-\u914D\u7F6E\u7BA1\u7406","title":"Redis - Configuration","description":"Use the gredis component in the GoFrame framework for Redis configuration management. We recommend managing Redis configurations through configuration files, supporting both single instance and cluster configurations. Additionally, detailed instructions on various configuration items are provided, along with related code examples for reference.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u7EC4\u4EF6\u5217\u8868/NoSQL Redis/Redis-\u914D\u7F6E\u7BA1\u7406.md","sourceDirName":"docs/\u7EC4\u4EF6\u5217\u8868/NoSQL Redis","slug":"/docs/components/contrib-nosql-redis-config","permalink":"/en/docs/components/contrib-nosql-redis-config","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u7EC4\u4EF6\u5217\u8868/NoSQL Redis/Redis-\u914D\u7F6E\u7BA1\u7406.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732451468000,"sidebarPosition":0,"frontMatter":{"slug":"/docs/components/contrib-nosql-redis-config","title":"Redis - Configuration","sidebar_position":0,"hide_title":true,"keywords":["GoFrame","GoFrame framework","gredis","Redis configuration","configuration management","configuration file","singleton object","cluster configuration","modularization","configuration method"],"description":"Use the gredis component in the GoFrame framework for Redis configuration management. We recommend managing Redis configurations through configuration files, supporting both single instance and cluster configurations. Additionally, detailed instructions on various configuration items are provided, along with related code examples for reference."},"sidebar":"mainSidebar","previous":{"title":"NoSQL Redis","permalink":"/en/docs/components/contrib-nosql-redis"},"next":{"title":"Redis - Examples","permalink":"/en/docs/components/contrib-nosql-redis-example"}}'),d=i("785893"),o=i("250065");let r={slug:"/docs/components/contrib-nosql-redis-config",title:"Redis - Configuration",sidebar_position:0,hide_title:!0,keywords:["GoFrame","GoFrame framework","gredis","Redis configuration","configuration management","configuration file","singleton object","cluster configuration","modularization","configuration method"],description:"Use the gredis component in the GoFrame framework for Redis configuration management. We recommend managing Redis configurations through configuration files, supporting both single instance and cluster configurations. Additionally, detailed instructions on various configuration items are provided, along with related code examples for reference."},t=void 0,c={},l=[{value:"Configuration File (Recommended)",id:"configuration-file-recommended",level:2},{value:"Single Instance Configuration",id:"single-instance-configuration",level:3},{value:"Cluster Configuration",id:"cluster-configuration",level:3},{value:"Configuration Item Description",id:"configuration-item-description",level:3},{value:"Configuration Method (Advanced)",id:"configuration-method-advanced",level:2}];function a(e){let n={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"gredis"})," component supports two methods for managing ",(0,d.jsx)(n.code,{children:"redis"})," configurations and obtaining ",(0,d.jsx)(n.code,{children:"redis"})," objects: one is through the ",(0,d.jsx)(n.strong,{children:"configuration component + singleton object"})," approach; the other is modularized using ",(0,d.jsx)(n.strong,{children:"configuration management methods"})," and object creation methods."]}),"\n",(0,d.jsx)(n.h2,{id:"configuration-file-recommended",children:"Configuration File (Recommended)"}),"\n",(0,d.jsxs)(n.p,{children:["In most cases, it is recommended to use the ",(0,d.jsx)(n.code,{children:"g.Redis"})," singleton approach to operate ",(0,d.jsx)(n.code,{children:"redis"}),". Therefore, using configuration files to manage ",(0,d.jsx)(n.code,{children:"Redis"})," configurations is also recommended. An example configuration in ",(0,d.jsx)(n.code,{children:"config.yaml"})," is as follows:"]}),"\n",(0,d.jsx)(n.h3,{id:"single-instance-configuration",children:"Single Instance Configuration"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"# Redis Configuration Example\nredis:\n  # Single Instance Example 1\n  default:\n    address: 127.0.0.1:6379\n    db:      1\n\n  # Single Instance Example 2\n  cache:\n    address:     127.0.0.1:6379\n    db:          1\n    pass:        123456\n    idleTimeout: 600\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Here, ",(0,d.jsx)(n.code,{children:"default"})," and ",(0,d.jsx)(n.code,{children:"cache"})," represent configuration group names. In the program, you can obtain the corresponding ",(0,d.jsx)(n.code,{children:"redis"})," singleton object using this name. If no group name is passed, the ",(0,d.jsx)(n.code,{children:"redis.default"})," configuration group is used by default to obtain the corresponding ",(0,d.jsx)(n.code,{children:"redis"})," client singleton object."]}),"\n",(0,d.jsx)(n.h3,{id:"cluster-configuration",children:"Cluster Configuration"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"# Redis Configuration Example\nredis:\n   # Cluster Mode Configuration Method\n  default:\n    address: 127.0.0.1:6379,127.0.0.1:6370\n    db:      1\n"})}),"\n",(0,d.jsx)(n.h3,{id:"configuration-item-description",children:"Configuration Item Description"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Configuration Item"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Default"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"address"})}),(0,d.jsx)(n.td,{children:"Yes"}),(0,d.jsx)(n.td,{children:"-"}),(0,d.jsxs)(n.td,{children:["Format: ",(0,d.jsx)(n.code,{children:"Address:Port"}),(0,d.jsx)("br",{}),"Supports ",(0,d.jsx)(n.code,{children:"Redis"})," single instance mode and cluster mode configuration, using ",(0,d.jsx)(n.code,{children:","})," to separate multiple addresses. For example:",(0,d.jsx)("br",{}),(0,d.jsx)(n.code,{children:"192.168.1.1:6379, 192.168.1.2:6379"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"db"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"0"})}),(0,d.jsx)(n.td,{children:"Database index"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"user"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})}),(0,d.jsx)(n.td,{children:"Authorized user for access"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"pass"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})}),(0,d.jsx)(n.td,{children:"Authorized password for access"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"minIdle"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"0"})}),(0,d.jsx)(n.td,{children:"Minimum number of idle connections allowed"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"maxIdle"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"10"})}),(0,d.jsxs)(n.td,{children:["Maximum number of idle connections allowed (",(0,d.jsx)(n.code,{children:"0"})," means no limit)"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"maxActive"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"100"})}),(0,d.jsxs)(n.td,{children:["Maximum connection limit (",(0,d.jsx)(n.code,{children:"0"})," means no limit)"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"idleTimeout"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"10"})}),(0,d.jsxs)(n.td,{children:["Maximum idle time for connections, using a time string such as ",(0,d.jsx)(n.code,{children:"30s/1m/1d"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"maxConnLifetime"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"30"})}),(0,d.jsxs)(n.td,{children:["Maximum lifetime for connections, using a time string such as ",(0,d.jsx)(n.code,{children:"30s/1m/1d"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"waitTimeout"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"0"})}),(0,d.jsxs)(n.td,{children:["Timeout for waiting on a connection pool, using a time string such as ",(0,d.jsx)(n.code,{children:"30s/1m/1d"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"dialTimeout"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"0"})}),(0,d.jsxs)(n.td,{children:["Timeout for ",(0,d.jsx)(n.code,{children:"TCP"})," connection, using a time string such as ",(0,d.jsx)(n.code,{children:"30s/1m/1d"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"readTimeout"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"0"})}),(0,d.jsxs)(n.td,{children:["Timeout for ",(0,d.jsx)(n.code,{children:"TCP"})," ",(0,d.jsx)(n.code,{children:"Read"})," operation, using a time string such as ",(0,d.jsx)(n.code,{children:"30s/1m/1d"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"writeTimeout"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"0"})}),(0,d.jsxs)(n.td,{children:["Timeout for ",(0,d.jsx)(n.code,{children:"TCP"})," ",(0,d.jsx)(n.code,{children:"Write"})," operation, using a time string such as ",(0,d.jsx)(n.code,{children:"30s/1m/1d"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"masterName"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"-"})}),(0,d.jsxs)(n.td,{children:["Used in Sentinel mode, set ",(0,d.jsx)(n.code,{children:"MasterName"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"tls"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"false"})}),(0,d.jsxs)(n.td,{children:["Whether to use ",(0,d.jsx)(n.code,{children:"TLS"})," authentication"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"tlsSkipVerify"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"false"})}),(0,d.jsxs)(n.td,{children:["Whether to disable server name verification when connecting via ",(0,d.jsx)(n.code,{children:"TLS"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cluster"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"false"})}),(0,d.jsxs)(n.td,{children:["Whether to force setting as cluster working mode. When ",(0,d.jsx)(n.code,{children:"address"})," is a single endpoint cluster, the system will automatically determine it as single instance mode, in which case this should be set to ",(0,d.jsx)(n.code,{children:"true"}),"."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"protocol"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"3"})}),(0,d.jsxs)(n.td,{children:["Set the ",(0,d.jsx)(n.code,{children:"RESP"})," protocol version for communication with ",(0,d.jsx)(n.code,{children:"Redis Server"}),"."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sentinelUsername"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{}),(0,d.jsxs)(n.td,{children:["Account for ",(0,d.jsx)(n.code,{children:"Sentinel"})," mode"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sentinelPassword"})}),(0,d.jsx)(n.td,{children:"No"}),(0,d.jsx)(n.td,{}),(0,d.jsxs)(n.td,{children:["Password for ",(0,d.jsx)(n.code,{children:"Sentinel"})," mode"]})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"Usage Example:"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"config.yaml"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'# Redis Configuration Example\nredis:\n  # Single Instance Example 1\n  default:\n    address: 127.0.0.1:6379\n    db:      1\n    pass:    "password" # Set password here, remove if not needed\n'})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n\n    _ "github.com/gogf/gf/contrib/nosql/redis/v2"\n\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/os/gctx"\n)\n\nfunc main() {\n    var ctx = gctx.New()\n    _, err := g.Redis().Set(ctx, "key", "value")\n    if err != nil {\n        g.Log().Fatal(ctx, err)\n    }\n    value, err := g.Redis().Get(ctx, "key")\n    if err != nil {\n        g.Log().Fatal(ctx, err)\n    }\n    fmt.Println(value.String())\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:"After execution, the output is:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-value"})}),"\n",(0,d.jsx)(n.h2,{id:"configuration-method-advanced",children:"Configuration Method (Advanced)"}),"\n",(0,d.jsxs)(n.p,{children:["Since ",(0,d.jsx)(n.code,{children:"GoFrame"})," is a modular framework, apart from using the coupled and convenient ",(0,d.jsx)(n.code,{children:"g"})," module to automatically parse configuration files and obtain singleton objects, it also supports modular use of the ",(0,d.jsx)(n.code,{children:"gredis"})," package by capable developers."]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"gredis"})," provides global group configuration capabilities, with related configuration management methods as follows:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:"func SetConfig(config Config, name ...string)\nfunc SetConfigByMap(m map[string]interface{}, name ...string) error\nfunc GetConfig(name ...string) (config Config, ok bool)\nfunc RemoveConfig(name ...string)\nfunc ClearConfig()\n"})}),"\n",(0,d.jsx)(n.p,{children:"Usage Example:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n\n    _ "github.com/gogf/gf/contrib/nosql/redis/v2"\n\n    "github.com/gogf/gf/v2/database/gredis"\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/os/gctx"\n)\n\nvar (\n    config = gredis.Config{\n        Address: "127.0.0.1:6379",\n        Db:      1,\n        Pass:    "password",\n    }\n    group = "cache"\n    ctx   = gctx.New()\n)\n\nfunc main() {\n    gredis.SetConfig(&config, group)\n\n    _, err := g.Redis(group).Set(ctx, "key", "value")\n    if err != nil {\n        g.Log().Fatal(ctx, err)\n    }\n    value, err := g.Redis(group).Get(ctx, "key")\n    if err != nil {\n        g.Log().Fatal(ctx, err)\n    }\n    fmt.Println(value.String())\n}\n'})})]})}function h(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},250065:function(e,n,i){i.d(n,{Z:function(){return t},a:function(){return r}});var s=i(667294);let d={},o=s.createContext(d);function r(e){let n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);