"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["66690"],{250818:function(e,t,i){i.r(t),i.d(t,{metadata:()=>o,contentTitle:()=>s,default:()=>u,assets:()=>d,toc:()=>l,frontMatter:()=>r});var o=JSON.parse('{"id":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C/\u6570\u636E\u6821\u9A8C-\u5E38\u89C1\u95EE\u9898","title":"Data Validation - FAQ","description":"The impact of Struct\'s default values on the required rule and its solutions when using the GoFrame framework for data validation, including using pointer types to bypass default value impacts, combined validation rules, and the Assoc joint validation method to ensure validation accuracy.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C/\u6570\u636E\u6821\u9A8C-\u5E38\u89C1\u95EE\u9898.md","sourceDirName":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C","slug":"/docs/core/gvalid-faq","permalink":"/en/docs/core/gvalid-faq","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C/\u6570\u636E\u6821\u9A8C-\u5E38\u89C1\u95EE\u9898.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732541616000,"sidebarPosition":9,"frontMatter":{"slug":"/docs/core/gvalid-faq","title":"Data Validation - FAQ","sidebar_position":9,"hide_title":true,"keywords":["GoFrame","GoFrame Framework","Data Validation","Struct Default Value","Required Rule","Pointer Type","Combined Validation Rules","Assoc Joint Validation","API Input/Output","Server"],"description":"The impact of Struct\'s default values on the required rule and its solutions when using the GoFrame framework for data validation, including using pointer types to bypass default value impacts, combined validation rules, and the Assoc joint validation method to ensure validation accuracy."},"sidebar":"mainSidebar","previous":{"title":"Data Validation - Methods","permalink":"/en/docs/core/gvalid-funcs"},"next":{"title":"Type Conversion","permalink":"/en/docs/core/gconv"}}'),a=i("785893"),n=i("250065");let r={slug:"/docs/core/gvalid-faq",title:"Data Validation - FAQ",sidebar_position:9,hide_title:!0,keywords:["GoFrame","GoFrame Framework","Data Validation","Struct Default Value","Required Rule","Pointer Type","Combined Validation Rules","Assoc Joint Validation","API Input/Output","Server"],description:"The impact of Struct's default values on the required rule and its solutions when using the GoFrame framework for data validation, including using pointer types to bypass default value impacts, combined validation rules, and the Assoc joint validation method to ensure validation accuracy."},s=void 0,d={},l=[{value:"Impact of <code>Struct</code> Default Values on the <code>required</code> Rule",id:"impact-of-struct-default-values-on-the-required-rule",level:2}];function c(e){let t={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,n.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.h2,{id:"impact-of-struct-default-values-on-the-required-rule",children:["Impact of ",(0,a.jsx)(t.code,{children:"Struct"})," Default Values on the ",(0,a.jsx)(t.code,{children:"required"})," Rule"]}),"\n",(0,a.jsxs)(t.p,{children:["The properties of a ",(0,a.jsx)(t.code,{children:"Struct"})," have ",(0,a.jsx)(t.code,{children:"default values"}),", which in some cases can cause the ",(0,a.jsx)(t.code,{children:"required"})," rule to become ineffective. For example:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-go",children:'type User struct {\n    Name string `v:"required"`\n    Age  uint   `v:"required"`\n}\n'})}),"\n",(0,a.jsxs)(t.p,{children:["In this structure validation, the ",(0,a.jsx)(t.code,{children:"required"})," check for the ",(0,a.jsx)(t.code,{children:"Age"})," property will fail because ",(0,a.jsx)(t.code,{children:"Age"})," will have a default value of ",(0,a.jsx)(t.code,{children:"0"})," even if no input is provided."]}),"\n",(0,a.jsxs)(t.p,{children:["There are ",(0,a.jsx)(t.strong,{children:"three"})," solutions:"]}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["Change the attribute to a pointer type, such as ",(0,a.jsx)(t.code,{children:"*int"}),", ",(0,a.jsx)(t.code,{children:"*float64"}),", ",(0,a.jsx)(t.code,{children:"*g.Var"}),", etc., taking advantage of the pointer type's default value of ",(0,a.jsx)(t.code,{children:"nil"})," to bypass this issue."]}),"\n",(0,a.jsxs)(t.li,{children:["Use a combined validation rule to compensate for the impact of default values on the ",(0,a.jsx)(t.code,{children:"required"})," rule. For example, modifying the validation rule of the ",(0,a.jsx)(t.code,{children:"Age"})," attribute in the example above to ",(0,a.jsx)(t.code,{children:"required|min:1"})," will achieve the desired business validation effect."]}),"\n",(0,a.jsxs)(t.li,{children:["Use the ",(0,a.jsx)(t.code,{children:"Assoc"})," joint validation method in ",(0,a.jsx)(t.code,{children:"Struct"})," validation to set joint validation parameters. When validating parameters of the ",(0,a.jsx)(t.code,{children:"Struct"})," type, the parameter values will be validated according to the parameters given in the ",(0,a.jsx)(t.code,{children:"Assoc"})," method. If using the framework's ",(0,a.jsx)(t.code,{children:"Server"}),", with structured ",(0,a.jsx)(t.code,{children:"API"})," input/output (",(0,a.jsx)(t.code,{children:"XxxReq/XxxRes"}),"), the ",(0,a.jsx)(t.code,{children:"Server"})," will automatically call ",(0,a.jsx)(t.code,{children:"Assoc"})," for validation, so developers need not worry about the impact of default values. Documentation link: ",(0,a.jsx)(t.a,{href:"/en/docs/core/gvalid-parameter-type-struct-assoc",children:"Struct Validation - Assoc"})]}),"\n"]})]})}function u(e={}){let{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},250065:function(e,t,i){i.d(t,{Z:function(){return s},a:function(){return r}});var o=i(667294);let a={},n=o.createContext(a);function r(e){let t=o.useContext(n);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),o.createElement(n.Provider,{value:t},e.children)}}}]);