"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["19530"],{529886:function(e,n,t){t.r(n),t.d(n,{metadata:()=>r,contentTitle:()=>d,default:()=>h,assets:()=>c,toc:()=>o,frontMatter:()=>a});var r=JSON.parse('{"id":"docs/WEB\u670D\u52A1\u5F00\u53D1/HTTPClient/HTTPClient-\u81EA\u5B9A\u4E49Header","title":"HTTPClient - Header","description":"With the HTTPClient feature of the GoFrame framework, users can customize the Header information of HTTP requests. This article introduces how to set and send Headers using methods like SetHeader, SetHeaderMap, and SetHeaderRaw, thus implementing custom tracing information such as Span-Id and Trace-Id. Simple code examples demonstrate how the client interacts with the server and returns results.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/WEB\u670D\u52A1\u5F00\u53D1/HTTPClient/HTTPClient-\u81EA\u5B9A\u4E49Header.md","sourceDirName":"docs/WEB\u670D\u52A1\u5F00\u53D1/HTTPClient","slug":"/docs/web/http-client-header","permalink":"/en/docs/web/http-client-header","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/WEB\u670D\u52A1\u5F00\u53D1/HTTPClient/HTTPClient-\u81EA\u5B9A\u4E49Header.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732451468000,"sidebarPosition":3,"frontMatter":{"slug":"/docs/web/http-client-header","title":"HTTPClient - Header","sidebar_position":3,"hide_title":true,"keywords":["HTTPClient","Custom Header","GoFrame","GoFrame Framework","SetHeader","Header Method","Span-Id","Trace-Id","HTTP Request","Client"],"description":"With the HTTPClient feature of the GoFrame framework, users can customize the Header information of HTTP requests. This article introduces how to set and send Headers using methods like SetHeader, SetHeaderMap, and SetHeaderRaw, thus implementing custom tracing information such as Span-Id and Trace-Id. Simple code examples demonstrate how the client interacts with the server and returns results."},"sidebar":"mainSidebar","previous":{"title":"HTTPClient - Cookie","permalink":"/en/docs/web/http-client-cookie"},"next":{"title":"HTTPClient - ContentType","permalink":"/en/docs/web/http-client-content-type"}}'),i=t("785893"),s=t("250065");let a={slug:"/docs/web/http-client-header",title:"HTTPClient - Header",sidebar_position:3,hide_title:!0,keywords:["HTTPClient","Custom Header","GoFrame","GoFrame Framework","SetHeader","Header Method","Span-Id","Trace-Id","HTTP Request","Client"],description:"With the HTTPClient feature of the GoFrame framework, users can customize the Header information of HTTP requests. This article introduces how to set and send Headers using methods like SetHeader, SetHeaderMap, and SetHeaderRaw, thus implementing custom tracing information such as Span-Id and Trace-Id. Simple code examples demonstrate how the client interacts with the server and returns results."},d=void 0,c={},o=[{value:"Server",id:"server",level:3},{value:"Client",id:"client",level:3}];function l(e){let n={code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["When the HTTP client sends a request, it can customize the ",(0,i.jsx)(n.code,{children:"Header"})," content sent to the server, a feature implemented using the ",(0,i.jsx)(n.code,{children:"SetHeader*"})," related methods."]}),"\n",(0,i.jsx)(n.p,{children:"Method List:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"func (c *Client) SetHeader(key, value string) *Client\nfunc (c *Client) SetHeaderMap(m map[string]string) *Client\nfunc (c *Client) SetHeaderRaw(headers string) *Client\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Let's take a look at an example where the client customizes the sending of custom tracing information ",(0,i.jsx)(n.code,{children:"Span-Id"})," and ",(0,i.jsx)(n.code,{children:"Trace-Id"})," message headers using ",(0,i.jsx)(n.code,{children:"Header"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"server",children:"Server"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/net/ghttp"\n)\n\nfunc main() {\n    s := g.Server()\n    s.BindHandler("/", func(r *ghttp.Request) {\n        r.Response.Writef(\n            "Span-Id:%s,Trace-Id:%s",\n            r.Header.Get("Span-Id"),\n            r.Header.Get("Trace-Id"),\n        )\n    })\n    s.SetPort(8199)\n    s.Run()\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Since this is an example, the server logic is straightforward, directly returning the received ",(0,i.jsx)(n.code,{children:"Span-Id"})," and ",(0,i.jsx)(n.code,{children:"Trace-Id"})," parameters to the client."]}),"\n",(0,i.jsx)(n.h3,{id:"client",children:"Client"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Using the ",(0,i.jsx)(n.code,{children:"SetHeader"})," Method"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n       "fmt"\n\n       "github.com/gogf/gf/v2/frame/g"\n       "github.com/gogf/gf/v2/os/gctx"\n)\n\nfunc main() {\n       c := g.Client()\n       c.SetHeader("Span-Id", "0.0.1")\n       c.SetHeader("Trace-Id", "NBC56410N97LJ016FQA")\n       if r, e := c.Get(gctx.New(), "http://127.0.0.1:8199/"); e != nil {\n           panic(e)\n       } else {\n           fmt.Println(r.ReadAllString())\n       }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Create a custom HTTP request client object using ",(0,i.jsx)(n.code,{children:"g.Client()"})," and set custom ",(0,i.jsx)(n.code,{children:"Header"})," information using ",(0,i.jsx)(n.code,{children:"c.SetHeader"}),"."]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["Using the ",(0,i.jsx)(n.code,{children:"SetHeaderRaw"})," Method"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This method is simpler and allows setting the client request Header via a raw Header string."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n       "fmt"\n\n       "github.com/gogf/gf/v2/frame/g"\n       "github.com/gogf/gf/v2/os/gctx"\n)\n\nfunc main() {\n       c := g.Client()\n       c.SetHeaderRaw(`\n           Referer: https://localhost\n           Span-Id: 0.0.1\n           Trace-Id: NBC56410N97LJ016FQA\n           User-Agent: MyTestClient\n       `)\n       if r, e := c.Get(gctx.New(), "http://127.0.0.1:8199/"); e != nil {\n           panic(e)\n       } else {\n           fmt.Println(r.ReadAllString())\n       }\n}\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Execution Result"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"After executing the client code, the terminal will print the result returned by the server, as follows:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Span-Id:0.0.1,Trace-Id:NBC56410N97LJ016FQA\n"})})]})}function h(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return d},a:function(){return a}});var r=t(667294);let i={},s=r.createContext(i);function a(e){let n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);