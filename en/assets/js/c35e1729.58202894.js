"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["249"],{860856(e,o,n){n.r(o),n.d(o,{metadata:()=>t,default:()=>h,frontMatter:()=>c,contentTitle:()=>l,toc:()=>d,assets:()=>a});var t=JSON.parse('{"id":"docs/\u7EC4\u4EF6\u5217\u8868/\u6570\u636E\u7ED3\u6784/\u5BF9\u8C61\u590D\u7528-gpool/\u5BF9\u8C61\u590D\u7528-gpool","title":"Pool","description":"The basic functions and use cases of the object reuse pool gpool in the GoFrame framework, including providing object cache reuse, expiration time, and the definition of creation and destruction methods. The difference between gpool design and sync.Pool lies in the support of expiration time and the different functions of alleviating GC pressure, it is concurrency safe.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u7EC4\u4EF6\u5217\u8868/\u6570\u636E\u7ED3\u6784/\u5BF9\u8C61\u590D\u7528-gpool/\u5BF9\u8C61\u590D\u7528-gpool.md","sourceDirName":"docs/\u7EC4\u4EF6\u5217\u8868/\u6570\u636E\u7ED3\u6784/\u5BF9\u8C61\u590D\u7528-gpool","slug":"/docs/components/container-gpool","permalink":"/en/docs/components/container-gpool","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u7EC4\u4EF6\u5217\u8868/\u6570\u636E\u7ED3\u6784/\u5BF9\u8C61\u590D\u7528-gpool/\u5BF9\u8C61\u590D\u7528-gpool.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732716970000,"sidebarPosition":8,"frontMatter":{"slug":"/docs/components/container-gpool","title":"Pool","sidebar_position":8,"hide_title":true,"keywords":["object reuse","GoFrame framework","gpool","expiration time","creation method","destruction method","concurrency safety","sync.Pool","GC pressure","cache reuse"],"description":"The basic functions and use cases of the object reuse pool gpool in the GoFrame framework, including providing object cache reuse, expiration time, and the definition of creation and destruction methods. The difference between gpool design and sync.Pool lies in the support of expiration time and the different functions of alleviating GC pressure, it is concurrency safe."},"sidebar":"mainSidebar","previous":{"title":"Tree - Methods","permalink":"/en/docs/components/container-gtree-funcs"},"next":{"title":"Pool - Usage","permalink":"/en/docs/components/container-gpool-example"}}'),r=n(474848),i=n(28453),s=n(711654);let c={slug:"/docs/components/container-gpool",title:"Pool",sidebar_position:8,hide_title:!0,keywords:["object reuse","GoFrame framework","gpool","expiration time","creation method","destruction method","concurrency safety","sync.Pool","GC pressure","cache reuse"],description:"The basic functions and use cases of the object reuse pool gpool in the GoFrame framework, including providing object cache reuse, expiration time, and the definition of creation and destruction methods. The difference between gpool design and sync.Pool lies in the support of expiration time and the different functions of alleviating GC pressure, it is concurrency safe."},l,a={},d=[{value:"Introduction",id:"introduction",level:2},{value:"<code>gpool</code> vs <code>sync.Pool</code>",id:"gpool-vs-syncpool",level:2},{value:"Documentation",id:"documentation",level:2}];function u(e){let o={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsxs)(o.p,{children:["Object reuse pool (concurrency safe). Provides cached reuse of objects with support for defining ",(0,r.jsx)(o.code,{children:"expiration time"}),", ",(0,r.jsx)(o.code,{children:"creation method"}),", and ",(0,r.jsx)(o.code,{children:"destruction method"}),"."]}),"\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.strong,{children:"Use Cases"}),":"]}),"\n",(0,r.jsx)(o.p,{children:"Any object reuse scenario that needs to support timed expiration."}),"\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.strong,{children:"Usage"}),":"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-go",children:'import "github.com/gogf/gf/v2/container/gpool"\n'})}),"\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.strong,{children:"API Documentation"}),":"]}),"\n",(0,r.jsx)(o.p,{children:(0,r.jsx)(o.a,{href:"https://pkg.go.dev/github.com/gogf/gf/v2/container/gpool",children:"https://pkg.go.dev/github.com/gogf/gf/v2/container/gpool"})}),"\n",(0,r.jsx)(o.p,{children:"Two points to note:"}),"\n",(0,r.jsxs)(o.ol,{children:["\n",(0,r.jsxs)(o.li,{children:["The expiration time type of the ",(0,r.jsx)(o.code,{children:"New"})," method is ",(0,r.jsx)(o.code,{children:"time.Duration"}),"."]}),"\n",(0,r.jsxs)(o.li,{children:["The object ",(0,r.jsx)(o.code,{children:"creation method"})," (",(0,r.jsx)(o.code,{children:"newFunc NewFunc"}),") return value includes an ",(0,r.jsx)(o.code,{children:"error"})," return, which can provide feedback on the reason for failure when object creation fails."]}),"\n",(0,r.jsxs)(o.li,{children:["The object ",(0,r.jsx)(o.code,{children:"destruction method"})," (",(0,r.jsx)(o.code,{children:"expireFunc...ExpireFunc"}),") is an optional parameter for automatically invoking custom methods to destroy objects when they timeout/pool closure."]}),"\n"]}),"\n",(0,r.jsxs)(o.h2,{id:"gpool-vs-syncpool",children:[(0,r.jsx)(o.code,{children:"gpool"})," vs ",(0,r.jsx)(o.code,{children:"sync.Pool"})]}),"\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.code,{children:"gpool"})," and ",(0,r.jsx)(o.code,{children:"sync.Pool"})," both achieve object reuse, but their design intentions and use cases are quite different."]}),"\n",(0,r.jsxs)(o.p,{children:["The object lifecycle in ",(0,r.jsx)(o.code,{children:"sync.Pool"})," does not support customizable expiration time because ",(0,r.jsx)(o.code,{children:"sync.Pool"})," is not a ",(0,r.jsx)(o.code,{children:"Cache"}),"; the original intention of ",(0,r.jsx)(o.code,{children:"sync.Pool"})," is to alleviate GC ",(0,r.jsx)(o.code,{children:"pressure"}),", and the objects in ",(0,r.jsx)(o.code,{children:"sync.Pool"})," are all cleared before ",(0,r.jsx)(o.code,{children:"GC"})," starts; furthermore, ",(0,r.jsx)(o.code,{children:"sync.Pool"})," does not support object creation and destruction methods."]}),"\n",(0,r.jsx)(o.h2,{id:"documentation",children:"Documentation"}),"\n","\n",(0,r.jsx)(s.A,{})]})}function h(e={}){let{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},711654(e,o,n){n.d(o,{A:()=>x});var t=n(474848);n(296540);var r=n(634164),i=n(259829),s=n(525863),c=n(484792),l=n(433605),a=n(233553),d=n(761190);function u({href:e,children:o}){return(0,t.jsx)(s.A,{href:e,className:(0,r.A)("card padding--lg","cardContainer_fWXF"),children:o})}function h({href:e,icon:o,title:n,description:i}){return(0,t.jsxs)(u,{href:e,children:[(0,t.jsxs)(d.A,{as:"h2",className:(0,r.A)("text--truncate","cardTitle_rnsV"),title:n,children:[o," ",n]}),i&&(0,t.jsx)("p",{className:(0,r.A)("text--truncate","cardDescription_PWke"),title:i,children:i})]})}function p({item:e}){let o=(0,i.Nr)(e),n=function(){let{selectMessage:e}=(0,c.W)();return o=>e(o,(0,a.T)({message:"1 item|{count} items",id:"theme.docs.DocCard.categoryDescription.plurals",description:"The default description for a category card in the generated index about how many items this category includes"},{count:o}))}();return o?(0,t.jsx)(h,{href:o,icon:"\u{1F5C3}\uFE0F",title:e.label,description:e.description??n(e.items.length)}):null}function f({item:e}){let o=(0,l.A)(e.href)?"\u{1F4C4}\uFE0F":"\u{1F517}",n=(0,i.cC)(e.docId??void 0);return(0,t.jsx)(h,{href:e.href,icon:o,title:e.label,description:e.description??n?.description})}function m({item:e}){switch(e.type){case"link":return(0,t.jsx)(f,{item:e});case"category":return(0,t.jsx)(p,{item:e});default:throw Error(`unknown item type ${JSON.stringify(e)}`)}}function g({className:e}){let o=(0,i.$S)();return(0,t.jsx)(x,{items:o.items,className:e})}function x(e){let{items:o,className:n}=e;if(!o)return(0,t.jsx)(g,{...e});let s=(0,i.d1)(o);return(0,t.jsx)("section",{className:(0,r.A)("row",n),children:s.map((e,o)=>(0,t.jsx)("article",{className:"col col--6 margin-bottom--lg",children:(0,t.jsx)(m,{item:e})},o))})}},484792(e,o,n){n.d(o,{W:()=>l});var t=n(296540),r=n(719087);let i=["zero","one","two","few","many","other"];function s(e){return i.filter(o=>e.includes(o))}let c={locale:"en",pluralForms:s(["one","other"]),select:e=>1===e?"one":"other"};function l(){let e=function(){let{i18n:{currentLocale:e}}=(0,r.A)();return(0,t.useMemo)(()=>{try{let o;return o=new Intl.PluralRules(e),{locale:e,pluralForms:s(o.resolvedOptions().pluralCategories),select:e=>o.select(e)}}catch(o){return console.error(`Failed to use Intl.PluralRules for locale "${e}".
Docusaurus will fallback to the default (English) implementation.
Error: ${o.message}
`),c}},[e])}();return{selectMessage:(o,n)=>(function(e,o,n){let t=e.split("|");if(1===t.length)return t[0];t.length>n.pluralForms.length&&console.error(`For locale=${n.locale}, a maximum of ${n.pluralForms.length} plural forms are expected (${n.pluralForms.join(",")}), but the message contains ${t.length}: ${e}`);let r=n.select(o);return t[Math.min(n.pluralForms.indexOf(r),t.length-1)]})(n,o,e)}}},28453(e,o,n){n.d(o,{R:()=>s,x:()=>c});var t=n(296540);let r={},i=t.createContext(r);function s(e){let o=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function c(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(i.Provider,{value:o},e.children)}}}]);