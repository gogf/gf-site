"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["66938"],{135371:function(e,n,t){t.r(n),t.d(n,{metadata:()=>i,contentTitle:()=>d,default:()=>m,assets:()=>a,toc:()=>c,frontMatter:()=>r});var i=JSON.parse('{"id":"docs/\u7EC4\u4EF6\u5217\u8868/NoSQL Redis/Redis-\u63A5\u53E3\u5316\u8BBE\u8BA1","title":"Redis - Interface","description":"Implement an interface-designed Redis component using gredis in the GoFrame framework, which has strong flexibility and extensibility. By implementing a custom Redis Adapter, you can easily override the default implementation methods. The text provides detailed examples showing how to achieve log printing in the custom Do method and use it in business operations.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u7EC4\u4EF6\u5217\u8868/NoSQL Redis/Redis-\u63A5\u53E3\u5316\u8BBE\u8BA1.md","sourceDirName":"docs/\u7EC4\u4EF6\u5217\u8868/NoSQL Redis","slug":"/docs/components/contrib-nosql-redis-interface","permalink":"/en/docs/components/contrib-nosql-redis-interface","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u7EC4\u4EF6\u5217\u8868/NoSQL Redis/Redis-\u63A5\u53E3\u5316\u8BBE\u8BA1.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732451468000,"sidebarPosition":4,"frontMatter":{"slug":"/docs/components/contrib-nosql-redis-interface","title":"Redis - Interface","sidebar_position":4,"hide_title":true,"keywords":["Redis","Interface Design","GoFrame","GoFrame Framework","gredis","Custom Redis Adapter","Extend Redis Methods","Redis Community Component","SetAdapter Method","GetAdapter Method"],"description":"Implement an interface-designed Redis component using gredis in the GoFrame framework, which has strong flexibility and extensibility. By implementing a custom Redis Adapter, you can easily override the default implementation methods. The text provides detailed examples showing how to achieve log printing in the custom Do method and use it in business operations."},"sidebar":"mainSidebar","previous":{"title":"Redis - Conn","permalink":"/en/docs/components/contrib-nosql-redis-conn"},"next":{"title":"WEB Service Development","permalink":"/en/docs/web"}}'),o=t("785893"),s=t("250065");let r={slug:"/docs/components/contrib-nosql-redis-interface",title:"Redis - Interface",sidebar_position:4,hide_title:!0,keywords:["Redis","Interface Design","GoFrame","GoFrame Framework","gredis","Custom Redis Adapter","Extend Redis Methods","Redis Community Component","SetAdapter Method","GetAdapter Method"],description:"Implement an interface-designed Redis component using gredis in the GoFrame framework, which has strong flexibility and extensibility. By implementing a custom Redis Adapter, you can easily override the default implementation methods. The text provides detailed examples showing how to achieve log printing in the custom Do method and use it in business operations."},d=void 0,a={},c=[{value:"Interface Definition",id:"interface-definition",level:2},{value:"Related Methods",id:"related-methods",level:2},{value:"Custom Redis Adapter",id:"custom-redis-adapter",level:2}];function l(e){let n={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"gredis"})," adopts an interface-based design, offering strong flexibility and extensibility."]}),"\n",(0,o.jsx)(n.h2,{id:"interface-definition",children:"Interface Definition"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://pkg.go.dev/github.com/gogf/gf/v2/database/gredis#Adapter",children:"https://pkg.go.dev/github.com/gogf/gf/v2/database/gredis#Adapter"})}),"\n",(0,o.jsx)(n.h2,{id:"related-methods",children:"Related Methods"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:"// SetAdapter sets custom adapter for current redis client.\nfunc (r *Redis) SetAdapter(adapter Adapter)\n\n// GetAdapter returns the adapter that is set in current redis client.\nfunc (r *Redis) GetAdapter() Adapter\n"})}),"\n",(0,o.jsx)(n.h2,{id:"custom-redis-adapter",children:"Custom Redis Adapter"}),"\n",(0,o.jsxs)(n.p,{children:["The framework community component provides a default implementation of the ",(0,o.jsx)(n.code,{children:"Redis Adapter"}),". If developers need to implement a custom ",(0,o.jsx)(n.code,{children:"Redis Adapter"})," or want to override certain methods, they can extend based on this implementation."]}),"\n",(0,o.jsxs)(n.p,{children:["Let's look at an example where we implement a custom ",(0,o.jsx)(n.code,{children:"Redis Adapter"})," and override its underlying ",(0,o.jsx)(n.code,{children:"Do"})," method. To simplify the example, we print a log in the custom ",(0,o.jsx)(n.code,{children:"Do"})," method, and subsequent logic follows the community ",(0,o.jsx)(n.code,{children:"Redis Adapter"})," implementation."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "context"\n    "fmt"\n\n    "github.com/gogf/gf/contrib/nosql/redis/v2"\n\n    "github.com/gogf/gf/v2/container/gvar"\n    "github.com/gogf/gf/v2/database/gredis"\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/os/gctx"\n)\n\nvar (\n    ctx    = gctx.New()\n    group  = "cache"\n    config = gredis.Config{\n        Address: "127.0.0.1:6379",\n        Db:      1,\n    }\n)\n\n// MyRedis description\ntype MyRedis struct {\n    *redis.Redis\n}\n\n// Do implements and overwrites the underlying function Do from Adapter.\nfunc (r *MyRedis) Do(ctx context.Context, command string, args ...interface{}) (*gvar.Var, error) {\n    fmt.Println("MyRedis Do:", command, args)\n    return r.Redis.Do(ctx, command, args...)\n}\n\nfunc main() {\n    gredis.RegisterAdapterFunc(func(config *gredis.Config) gredis.Adapter {\n        r := &MyRedis{redis.New(config)}\n        r.AdapterOperation = r // This is necessary.\n        return r\n    })\n    gredis.SetConfig(&config, group)\n\n    _, err := g.Redis(group).Set(ctx, "key", "value")\n    if err != nil {\n        g.Log().Fatal(ctx, err)\n    }\n    value, err := g.Redis(group).Get(ctx, "key")\n    if err != nil {\n        g.Log().Fatal(ctx, err)\n    }\n    fmt.Println(value.String())\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"After execution, the terminal outputs:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"MyRedis Do: Set [key value]\nMyRedis Do: Get [key]\nvalue\n"})})]})}function m(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return d},a:function(){return r}});var i=t(667294);let o={},s=i.createContext(o);function r(e){let n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);