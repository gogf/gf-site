"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["51189"],{313479:function(e,n,t){t.r(n),t.d(n,{metadata:()=>i,contentTitle:()=>s,default:()=>u,assets:()=>d,toc:()=>l,frontMatter:()=>a});var i=JSON.parse('{"id":"course/starbook/\u7B2C\u56DB\u7AE0-\u5355\u8BCD\u7BA1\u7406/4.6.\u5355\u8BCD\u8BE6\u60C5","title":"4.6 Word Detail","description":"The word detail interface obtains detailed information of a word not in the list through a GET request, including fields such as example sentence, Chinese translation, and pronunciation. It uses fuzzy routing to match and implements database query operations through the logic layer of the interface.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/course/starbook/\u7B2C\u56DB\u7AE0-\u5355\u8BCD\u7BA1\u7406/4.6.\u5355\u8BCD\u8BE6\u60C5.md","sourceDirName":"course/starbook/\u7B2C\u56DB\u7AE0-\u5355\u8BCD\u7BA1\u7406","slug":"/course/starbook/word-detail","permalink":"/en/course/starbook/word-detail","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/course/starbook/\u7B2C\u56DB\u7AE0-\u5355\u8BCD\u7BA1\u7406/4.6.\u5355\u8BCD\u8BE6\u60C5.md","tags":[],"version":"current","lastUpdatedBy":"oldme","lastUpdatedAt":1735822233000,"frontMatter":{"title":"4.6 Word Detail","hide_title":true,"slug":"/course/starbook/word-detail","keywords":["GoFrame","Word Detail","Chinese Translation","Fuzzy Routing","Example Sentence","Pronunciation","Interface Testing","GoFrame Framework","API","Detailed Information"],"description":"The word detail interface obtains detailed information of a word not in the list through a GET request, including fields such as example sentence, Chinese translation, and pronunciation. It uses fuzzy routing to match and implements database query operations through the logic layer of the interface."},"sidebar":"courseStarBookSidebar","previous":{"title":"4.5 Word Pagination","permalink":"/en/course/starbook/word-list"},"next":{"title":"4.7 Delete Word","permalink":"/en/course/starbook/word-delete"}}'),r=t("785893"),o=t("250065");let a={title:"4.6 Word Detail",hide_title:!0,slug:"/course/starbook/word-detail",keywords:["GoFrame","Word Detail","Chinese Translation","Fuzzy Routing","Example Sentence","Pronunciation","Interface Testing","GoFrame Framework","API","Detailed Information"],description:"The word detail interface obtains detailed information of a word not in the list through a GET request, including fields such as example sentence, Chinese translation, and pronunciation. It uses fuzzy routing to match and implements database query operations through the logic layer of the interface."},s=void 0,d={},l=[{value:"Add Api",id:"add-api",level:2},{value:"Write Logic",id:"write-logic",level:2},{value:"Controller Calls Logic",id:"controller-calls-logic",level:2},{value:"Interface Testing",id:"interface-testing",level:2}];function c(e){let n={code:"code",em:"em",h2:"h2",hr:"hr",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["The word detail also uses the ",(0,r.jsx)(n.code,{children:"GET"})," method to retrieve detailed information of a word, including fields not present in the list such as example sentences and Chinese translations."]}),"\n",(0,r.jsx)(n.h2,{id:"add-api",children:"Add Api"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"api/words/v1/words.go"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'...\n\ntype DetailReq struct {  \n    g.Meta `path:"words/{id}" method:"get" sm:"\u8BE6\u60C5" tags:"\u5355\u8BCD"`  \n    Id     uint `json:"id" v:"required"`  \n}  \n  \ntype DetailRes struct {  \n    Id                 uint        `json:"id"`  \n    Word               string      `json:"word"`  \n    Definition         string      `json:"definition"`  \n    ExampleSentence    string      `json:"exampleSentence"`  \n    ChineseTranslation string      `json:"chineseTranslation"`  \n    Pronunciation      string      `json:"pronunciation"`  \n    ProficiencyLevel   uint        `json:"proficiencyLevel"`  \n    CreatedAt          *gtime.Time `json:"createdAt"`  \n    UpdatedAt          *gtime.Time `json:"updatedAt"`  \n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"words/{id}"})," is a form of fuzzy routing matching, which recognizes routes like ",(0,r.jsx)(n.code,{children:"words/1"}),", ",(0,r.jsx)(n.code,{children:"words/2"}),", and ",(0,r.jsx)(n.code,{children:"words/abc"}),", and assigns the matched value to the ",(0,r.jsx)(n.code,{children:"Id"})," field. The type of the ",(0,r.jsx)(n.code,{children:"Id"})," field is ",(0,r.jsx)(n.code,{children:"uint"}),", and if the value is invalid, it will use the zero value of ",(0,r.jsx)(n.code,{children:"uint"}),". For example, accessing ",(0,r.jsx)(n.code,{children:"words/abc"}),", the value of the ",(0,r.jsx)(n.code,{children:"Id"})," field will be ",(0,r.jsx)(n.code,{children:"0"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"write-logic",children:"Write Logic"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"internal/logic/words/words.go"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'...\n\nfunc (w *Words) Detail(ctx context.Context, uid, id uint) (word *entity.Words, err error) {  \n    word = &entity.Words{}  \n    db := dao.Words.Ctx(ctx).Where("id", id)  \n    if uid > 0 {  \n       db = db.Where("uid", uid)  \n    }  \n    err = db.Scan(word)  \n    return  \n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"controller-calls-logic",children:"Controller Calls Logic"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"internal/controller/words/words_v1_detail.go"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'package words  \n  \nimport (  \n    "context"  \n  \n    "star/api/words/v1"\n)  \n  \nfunc (c *ControllerV1) Detail(ctx context.Context, req *v1.DetailReq) (res *v1.DetailRes, err error) {  \n    uid, err := c.users.GetUid(ctx)  \n    if err != nil {  \n       return nil, err  \n    }  \n  \n    word, err := c.words.Detail(ctx, uid, req.Id)  \n    if err != nil {  \n       return nil, err  \n    }  \n  \n    return &v1.DetailRes{  \n       Id:                 word.Id,  \n       Word:               word.Word,  \n       Definition:         word.Definition,  \n       ExampleSentence:    word.ExampleSentence,  \n       ChineseTranslation: word.ChineseTranslation,  \n       Pronunciation:      word.Pronunciation,  \n       ProficiencyLevel:   word.ProficiencyLevel,  \n       CreatedAt:          word.CreatedAt,  \n       UpdatedAt:          word.UpdatedAt,  \n    }, nil  \n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"interface-testing",children:"Interface Testing"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'$ curl -X GET http://127.0.0.1:8000/v1/words/1 \\\n     -H "Authorization: eyJhbGci...5U" \\\n     -H "Content-Type: application/json" \\\n\n{\n\xa0 \xa0 "code": 0,\n\xa0 \xa0 "message": "",\n\xa0 \xa0 "data": {\n\xa0 \xa0 \xa0 \xa0 "id": 1,\n\xa0 \xa0 \xa0 \xa0 "word": "example_update",\n\xa0 \xa0 \xa0 \xa0 "definition": "A representative form or pattern.",\n\xa0 \xa0 \xa0 \xa0 "exampleSentence": "This is an example sentence.",\n\xa0 \xa0 \xa0 \xa0 "chineseTranslation": "\u4F8B\u5B50",\n\xa0 \xa0 \xa0 \xa0 "pronunciation": "\u026A\u0261\u02C8z\u0251\u02D0mp(\u0259)l",\n\xa0 \xa0 \xa0 \xa0 "proficiencyLevel": 3,\n\xa0 \xa0 \xa0 \xa0 "createdAt": "2024-11-14 15:40:54",\n\xa0 \xa0 \xa0 \xa0 "updatedAt": "2024-11-14 16:09:37"\n\xa0 \xa0 }\n}\n'})})]})}function u(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return s},a:function(){return a}});var i=t(667294);let r={},o=i.createContext(r);function a(e){let n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);