"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["7621"],{613356:function(e,n,o){o.r(n),o.d(n,{metadata:()=>t,contentTitle:()=>s,default:()=>h,assets:()=>d,toc:()=>a,frontMatter:()=>r});var t=JSON.parse('{"id":"docs/WEB\u670D\u52A1\u5F00\u53D1/\u6570\u636E\u8FD4\u56DE/\u6570\u636E\u8FD4\u56DE-\u6587\u4EF6\u4E0B\u8F7D","title":"Response - File Downloading","description":"Implement file downloading in applications built with the GoFrame framework through the Response object. The ServeFile method can display file contents, while the ServeFileDownload method guides the client to download the specified file path, fully utilizing streaming download technology to reduce memory usage and improve performance.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/WEB\u670D\u52A1\u5F00\u53D1/\u6570\u636E\u8FD4\u56DE/\u6570\u636E\u8FD4\u56DE-\u6587\u4EF6\u4E0B\u8F7D.md","sourceDirName":"docs/WEB\u670D\u52A1\u5F00\u53D1/\u6570\u636E\u8FD4\u56DE","slug":"/docs/web/response-file-downloading","permalink":"/en/docs/web/response-file-downloading","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/WEB\u670D\u52A1\u5F00\u53D1/\u6570\u636E\u8FD4\u56DE/\u6570\u636E\u8FD4\u56DE-\u6587\u4EF6\u4E0B\u8F7D.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732451468000,"sidebarPosition":4,"frontMatter":{"slug":"/docs/web/response-file-downloading","title":"Response - File Downloading","sidebar_position":4,"hide_title":true,"keywords":["GoFrame","GoFrame framework","file downloading","ServeFile","ServeFileDownload","response file downloading","Go language","ghttp","server","streaming download"],"description":"Implement file downloading in applications built with the GoFrame framework through the Response object. The ServeFile method can display file contents, while the ServeFileDownload method guides the client to download the specified file path, fully utilizing streaming download technology to reduce memory usage and improve performance."},"sidebar":"mainSidebar","previous":{"title":"Response - Exit","permalink":"/en/docs/web/response-exit-exitall-exithook"},"next":{"title":"Response - Template Parsing","permalink":"/en/docs/web/response-template"}}'),i=o("785893"),l=o("250065");let r={slug:"/docs/web/response-file-downloading",title:"Response - File Downloading",sidebar_position:4,hide_title:!0,keywords:["GoFrame","GoFrame framework","file downloading","ServeFile","ServeFileDownload","response file downloading","Go language","ghttp","server","streaming download"],description:"Implement file downloading in applications built with the GoFrame framework through the Response object. The ServeFile method can display file contents, while the ServeFileDownload method guides the client to download the specified file path, fully utilizing streaming download technology to reduce memory usage and improve performance."},s=void 0,d={},a=[{value:"<code>ServeFile</code>",id:"servefile",level:2},{value:"<code>ServeFileDownload</code>",id:"servefiledownload",level:2}];function c(e){let n={a:"a",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,l.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"Response"})," object supports file downloading."]}),"\n",(0,i.jsx)(n.p,{children:"Related methods:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"func (r *Response) ServeFile(path string, allowIndex ...bool)\nfunc (r *Response) ServeFileDownload(path string, name ...string)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"servefile",children:(0,i.jsx)(n.code,{children:"ServeFile"})}),"\n",(0,i.jsxs)(n.p,{children:["With the given file path ",(0,i.jsx)(n.code,{children:"path"}),", the ",(0,i.jsx)(n.code,{children:"ServeFile"})," method will automatically recognize the file format. If it's a directory or text content, it will directly display the file content. If the ",(0,i.jsx)(n.code,{children:"path"})," parameter is a directory, then the second parameter ",(0,i.jsx)(n.code,{children:"allowIndex"})," controls whether the file list under the directory can be displayed."]}),"\n",(0,i.jsx)(n.p,{children:"Example usage:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:o(251865).Z+"",width:"1312",height:"734"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/net/ghttp"\n)\n\nfunc main() {\n    s := g.Server()\n    s.BindHandler("/", func(r *ghttp.Request) {\n        r.Response.ServeFile("test.txt")\n    })\n    s.SetPort(8999)\n    s.Run()\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Visit ",(0,i.jsx)(n.a,{href:"http://127.0.0.1:8999",children:"http://127.0.0.1:8999"})," to see that the file content is displayed on the page."]}),"\n",(0,i.jsx)(n.h2,{id:"servefiledownload",children:(0,i.jsx)(n.code,{children:"ServeFileDownload"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ServeFileDownload"})," is a relatively frequently used method for directly guiding the client to download a file from a specified path and can assign a new name for the downloaded file. The ",(0,i.jsx)(n.code,{children:"ServeFileDownload"})," method uses streaming download control, which has low memory usage. In the example below, we modify the ",(0,i.jsx)(n.code,{children:"ServeFile"})," method from the above example to the ",(0,i.jsx)(n.code,{children:"ServeFileDownload"})," method:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/net/ghttp"\n)\n\nfunc main() {\n    s := g.Server()\n    s.BindHandler("/", func(r *ghttp.Request) {\n        r.Response.ServeFileDownload("test.txt")\n    })\n    s.SetPort(8999)\n    s.Run()\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Visit ",(0,i.jsx)(n.a,{href:"http://127.0.0.1:8999",children:"http://127.0.0.1:8999"})," to see that the file is guided to download rather than displaying the page content."]})]})}function h(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},251865:function(e,n,o){o.d(n,{Z:function(){return t}});let t=o.p+"assets/images/2bb757548c004e021cf802495fe8d2be-eda9cca79fc294c2dff6d241649cf838.png"},250065:function(e,n,o){o.d(n,{Z:function(){return s},a:function(){return r}});var t=o(667294);let i={},l=t.createContext(i);function r(e){let n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);