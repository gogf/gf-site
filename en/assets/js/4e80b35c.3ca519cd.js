"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["58231"],{771686:function(e,n,t){t.r(n),t.d(n,{metadata:()=>i,contentTitle:()=>s,default:()=>u,assets:()=>d,toc:()=>l,frontMatter:()=>r});var i=JSON.parse('{"id":"quick/\u5FEB\u901F\u5F00\u59CB/\u751F\u6210\u63A5\u53E3\u6587\u6863","title":"API Documentation","description":"Using the GoFrame framework, standard-compliant API documentation can be easily generated. This article introduces how to enhance API definitions and combine them with the OpenAPIv3 protocol and Swagger UI to automatically generate and display API documentation. The code examples provide a detailed explanation of API data structure definitions, routing middleware settings, and how to optimize the API documentation generation process using GoFrame framework features.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/quick/\u5FEB\u901F\u5F00\u59CB/\u751F\u6210\u63A5\u53E3\u6587\u6863.md","sourceDirName":"quick/\u5FEB\u901F\u5F00\u59CB","slug":"/quick/api-doc","permalink":"/en/quick/api-doc","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/quick/\u5FEB\u901F\u5F00\u59CB/\u751F\u6210\u63A5\u53E3\u6587\u6863.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732612158000,"sidebarPosition":8,"frontMatter":{"slug":"/quick/api-doc","title":"API Documentation","hide_title":true,"sidebar_position":8,"keywords":["GoFrame","GoFrame Framework","API Documentation Generation","OpenAPIv3","Swagger UI","Automated API Documentation","API Data Structure","GoFrame Tutorial","Web Development","API Documentation"],"description":"Using the GoFrame framework, standard-compliant API documentation can be easily generated. This article introduces how to enhance API definitions and combine them with the OpenAPIv3 protocol and Swagger UI to automatically generate and display API documentation. The code examples provide a detailed explanation of API data structure definitions, routing middleware settings, and how to optimize the API documentation generation process using GoFrame framework features."},"sidebar":"quickSidebar","previous":{"title":"Response Structure","permalink":"/en/quick/common-response"},"next":{"title":"What\'s Next","permalink":"/en/quick-next"}}'),a=t("785893"),o=t("250065");let r={slug:"/quick/api-doc",title:"API Documentation",hide_title:!0,sidebar_position:8,keywords:["GoFrame","GoFrame Framework","API Documentation Generation","OpenAPIv3","Swagger UI","Automated API Documentation","API Data Structure","GoFrame Tutorial","Web Development","API Documentation"],description:"Using the GoFrame framework, standard-compliant API documentation can be easily generated. This article introduces how to enhance API definitions and combine them with the OpenAPIv3 protocol and Swagger UI to automatically generate and display API documentation. The code examples provide a detailed explanation of API data structure definitions, routing middleware settings, and how to optimize the API documentation generation process using GoFrame framework features."},s=void 0,d={},l=[{value:"Enhanced API Definitions",id:"enhanced-api-definitions",level:2},{value:"Complete Implementation",id:"complete-implementation",level:2},{value:"Understanding OpenAPIv3",id:"understanding-openapiv3",level:3},{value:"Understanding Swagger",id:"understanding-swagger",level:3},{value:"Running the Application",id:"running-the-application",level:2},{value:"Console Output",id:"console-output",level:3},{value:"Exploring the Swagger UI",id:"exploring-the-swagger-ui",level:3},{value:"Key Takeaways",id:"key-takeaways",level:2}];function c(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:["Generating API documentation with ",(0,a.jsx)(n.code,{children:"GoFrame"})," is straightforward. Let's enhance our API definitions from the previous sections to create more comprehensive documentation."]}),"\n",(0,a.jsx)(n.h2,{id:"enhanced-api-definitions",children:"Enhanced API Definitions"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'type HelloReq struct {\n    g.Meta `path:"/" method:"get" tags:"Test" summary:"Hello world test case"`\n    Name   string `v:"required" json:"name" dc:"User\'s name"`\n    Age    int    `v:"required" json:"age"  dc:"User\'s age"`\n}\ntype HelloRes struct {\n    Content string `json:"content" dc:"Response content"`\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["We've added two important tags to the ",(0,a.jsx)(n.code,{children:"g.Meta"})," field:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"tags"}),": Categorizes the API into logical groups"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"summary"}),": Provides a brief description of the API endpoint"]}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:["These tags are standard fields in the ",(0,a.jsx)(n.code,{children:"OpenAPIv3"})," specification. For a complete guide on API documentation generation and available tags, refer to the relevant section in our development manual."]})}),"\n",(0,a.jsx)(n.h2,{id:"complete-implementation",children:"Complete Implementation"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",metastring:'title="main.go"',children:'package main\n\nimport (\n    "context"\n    "fmt"\n\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/net/ghttp"\n)\n\ntype Response struct {\n    Message string      `json:"message" dc:"Response message"`\n    Data    interface{} `json:"data"    dc:"Response payload"`\n}\n\ntype HelloReq struct {\n    g.Meta `path:"/" method:"get" tags:"Test" summary:"Hello world test case"`\n    Name   string `v:"required" json:"name" dc:"User\'s name"`\n    Age    int    `v:"required" json:"age"  dc:"User\'s age"`\n}\ntype HelloRes struct {\n    Content string `json:"content" dc:"Response content"`\n}\n\ntype Hello struct{}\n\nfunc (Hello) Say(ctx context.Context, req *HelloReq) (res *HelloRes, err error) {\n    res = &HelloRes{\n        Content: fmt.Sprintf(\n            "Hello %s! Your Age is %d",\n            req.Name,\n            req.Age,\n        ),\n    }\n    return\n}\n\nfunc Middleware(r *ghttp.Request) {\n    r.Middleware.Next()\n\n    var (\n        msg string\n        res = r.GetHandlerResponse()\n        err = r.GetError()\n    )\n    if err != nil {\n        msg = err.Error()\n    } else {\n        msg = "OK"\n    }\n    r.Response.WriteJson(Response{\n        Message: msg,\n        Data:    res,\n    })\n}\n\nfunc main() {\n    s := g.Server()\n    s.Group("/", func(group *ghttp.RouterGroup) {\n        group.Middleware(Middleware)\n        group.Bind(\n            new(Hello),\n        )\n    })\n    s.SetOpenApiPath("/api.json")\n    s.SetSwaggerPath("/swagger")\n    s.SetPort(8000)\n    s.Run()\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"Key additions in this example:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:'s.SetOpenApiPath("/api.json")'})," enables OpenAPIv3 documentation generation at ",(0,a.jsx)(n.code,{children:"/api.json"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:'s.SetSwaggerPath("/swagger")'})," enables the built-in Swagger UI at ",(0,a.jsx)(n.code,{children:"/swagger"})," (the UI can be customized - see our development manual for details)"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"understanding-openapiv3",children:"Understanding OpenAPIv3"}),"\n",(0,a.jsx)(n.p,{children:"OpenAPIv3 is the industry standard for API documentation. It defines APIs in a machine-readable format (typically JSON) that can be consumed by various documentation tools like Swagger UI, Postman, and ApiFox."}),"\n",(0,a.jsx)(n.h3,{id:"understanding-swagger",children:"Understanding Swagger"}),"\n",(0,a.jsx)(n.p,{children:"Swagger is a popular tool for visualizing and interacting with APIs. It supports multiple documentation formats, with OpenAPIv3 being the most common."}),"\n",(0,a.jsxs)(n.p,{children:["To use the built-in Swagger UI in this example, we need both OpenAPIv3 and Swagger UI enabled via the ",(0,a.jsx)(n.code,{children:"SetOpenApiPath"})," and ",(0,a.jsx)(n.code,{children:"SetSwaggerPath"})," methods respectively."]}),"\n",(0,a.jsx)(n.h2,{id:"running-the-application",children:"Running the Application"}),"\n",(0,a.jsx)(n.h3,{id:"console-output",children:"Console Output"}),"\n",(0,a.jsx)(n.p,{children:"When you run the application, you'll see:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:"2024-10-28 21:56:42.747 [INFO] pid[87280]: http server started listening on [:8000]\n2024-10-28 21:56:42.747 [INFO] {d84db2976ea202187ba40f5d0657e4d7} swagger ui is serving at address: http://127.0.0.1:8000/swagger/\n2024-10-28 21:56:42.747 [INFO] {d84db2976ea202187ba40f5d0657e4d7} openapi specification is serving at address: http://127.0.0.1:8000/api.json\n\n  ADDRESS | METHOD |   ROUTE    |                        HANDLER                        |    MIDDLEWARE      \n----------|--------|------------|-------------------------------------------------------|--------------------\n  :8000   | GET    | /          | main.(*Hello).Say                                     | main.Middleware    \n----------|--------|------------|-------------------------------------------------------|--------------------\n  :8000   | ALL    | /api.json  | github.com/gogf/gf/v2/net/ghttp.(*Server).openapiSpec |                    \n----------|--------|------------|-------------------------------------------------------|--------------------\n  :8000   | ALL    | /swagger/* | github.com/gogf/gf/v2/net/ghttp.(*Server).swaggerUI   | HOOK_BEFORE_SERVE  \n----------|--------|------------|-------------------------------------------------------|--------------------\n"})}),"\n",(0,a.jsx)(n.p,{children:"Notable changes in the output:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["A link to the Swagger UI at ",(0,a.jsx)(n.code,{children:"http://127.0.0.1:8000/swagger/"})]}),"\n",(0,a.jsxs)(n.li,{children:["A link to the OpenAPI specification at ",(0,a.jsx)(n.code,{children:"http://127.0.0.1:8000/api.json"})]}),"\n",(0,a.jsxs)(n.li,{children:["Two additional routes for Swagger and OpenAPI endpoints. The Swagger route uses the Server's ",(0,a.jsx)(n.code,{children:"HOOK"})," feature, which provides more flexible request interception than middleware. The ",(0,a.jsx)(n.code,{children:"HOOK_BEFORE_SERVE"})," point used here is one of several predefined hook points (see the Web Server chapter in our manual for more details)."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"exploring-the-swagger-ui",children:"Exploring the Swagger UI"}),"\n",(0,a.jsxs)(n.p,{children:["Visit ",(0,a.jsx)(n.a,{href:"http://127.0.0.1:8000/swagger/",children:"http://127.0.0.1:8000/swagger/"})," to see your API documentation:"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"alt text",src:t(894962).Z+"",width:"3418",height:"1184"})}),"\n",(0,a.jsx)(n.p,{children:"The UI shows:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:'Our single API endpoint under the "Test" category with its description "Hello world test case"'}),"\n",(0,a.jsx)(n.li,{children:"Detailed input/output structures including parameter types, validation rules (like required fields), and descriptions"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,a.jsx)(n.p,{children:"We've learned two important concepts:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Structured API definitions make APIs more maintainable, which is crucial for complex projects with many endpoints"}),"\n",(0,a.jsx)(n.li,{children:"GoFrame's automatic documentation generation creates standard OpenAPIv3 docs and Swagger UI with minimal effort, significantly reducing maintenance overhead and improving team collaboration"}),"\n"]})]})}function u(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},894962:function(e,n,t){t.d(n,{Z:function(){return i}});let i=t.p+"assets/images/QQ_1730124029804-1835ad61671d5cffe9307bcde763ff02.png"},250065:function(e,n,t){t.d(n,{Z:function(){return s},a:function(){return r}});var i=t(667294);let a={},o=i.createContext(a);function r(e){let n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);