"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["49189"],{348283:function(e,n,t){t.r(n),t.d(n,{metadata:()=>o,contentTitle:()=>c,default:()=>p,assets:()=>a,toc:()=>d,frontMatter:()=>i});var o=JSON.parse('{"id":"docs/WEB\u670D\u52A1\u5F00\u53D1/\u6570\u636E\u8FD4\u56DE/\u6570\u636E\u8FD4\u56DE-JSONXML","title":"Response - JSON/XML","description":"Using the Response object of the GoFrame framework to implement data return functions, supporting JSON and XML format output. Through methods such as WriteJson and WriteXml, content output can be easily achieved. Sample code demonstrates how to use GoFrame to build an HTTP server and provide implementation with support for the JSONP protocol.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/WEB\u670D\u52A1\u5F00\u53D1/\u6570\u636E\u8FD4\u56DE/\u6570\u636E\u8FD4\u56DE-JSONXML.md","sourceDirName":"docs/WEB\u670D\u52A1\u5F00\u53D1/\u6570\u636E\u8FD4\u56DE","slug":"/docs/web/response-json-xml","permalink":"/en/docs/web/response-json-xml","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/WEB\u670D\u52A1\u5F00\u53D1/\u6570\u636E\u8FD4\u56DE/\u6570\u636E\u8FD4\u56DE-JSONXML.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732451468000,"sidebarPosition":1,"frontMatter":{"slug":"/docs/web/response-json-xml","title":"Response - JSON/XML","sidebar_position":1,"hide_title":true,"keywords":["GoFrame","GoFrame Framework","JSON","XML","Data Return","JSONP","Response","WriteJson","WriteXml","HTTP Server"],"description":"Using the Response object of the GoFrame framework to implement data return functions, supporting JSON and XML format output. Through methods such as WriteJson and WriteXml, content output can be easily achieved. Sample code demonstrates how to use GoFrame to build an HTTP server and provide implementation with support for the JSONP protocol."},"sidebar":"mainSidebar","previous":{"title":"Response - Buffering","permalink":"/en/docs/web/response-buffering"},"next":{"title":"Response - Redirect","permalink":"/en/docs/web/response-redirect"}}'),r=t("785893"),s=t("250065");let i={slug:"/docs/web/response-json-xml",title:"Response - JSON/XML",sidebar_position:1,hide_title:!0,keywords:["GoFrame","GoFrame Framework","JSON","XML","Data Return","JSONP","Response","WriteJson","WriteXml","HTTP Server"],description:"Using the Response object of the GoFrame framework to implement data return functions, supporting JSON and XML format output. Through methods such as WriteJson and WriteXml, content output can be easily achieved. Sample code demonstrates how to use GoFrame to build an HTTP server and provide implementation with support for the JSONP protocol."},c=void 0,a={},d=[{value:"<code>JSON</code>",id:"json",level:2},{value:"<code>JSONP</code>",id:"jsonp",level:2},{value:"<code>XML</code>",id:"xml",level:2}];function l(e){let n={admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Related methods:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"func (r *Response) WriteJson(content interface{}) error\nfunc (r *Response) WriteJsonExit(content interface{}) error\nfunc (r *Response) WriteJsonP(content interface{}) error\nfunc (r *Response) WriteJsonPExit(content interface{}) error\nfunc (r *Response) WriteXml(content interface{}, rootTag ...string) error\nfunc (r *Response) WriteXmlExit(content interface{}, rootTag ...string) error\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Response"})," provides native support for ",(0,r.jsx)(n.code,{children:"JSON/XML"})," data format output, implemented through the following methods:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WriteJson*"})," methods are used to return ",(0,r.jsx)(n.code,{children:"JSON"})," data format, with parameters of any type, such as ",(0,r.jsx)(n.code,{children:"string"}),", ",(0,r.jsx)(n.code,{children:"map"}),", ",(0,r.jsx)(n.code,{children:"struct"}),", etc. The returned ",(0,r.jsx)(n.code,{children:"Content-Type"})," is ",(0,r.jsx)(n.code,{children:"application/json"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WriteXml*"})," methods are used to return ",(0,r.jsx)(n.code,{children:"XML"})," data format, with parameters of any type, such as ",(0,r.jsx)(n.code,{children:"string"}),", ",(0,r.jsx)(n.code,{children:"map"}),", ",(0,r.jsx)(n.code,{children:"struct"}),", etc. The returned ",(0,r.jsx)(n.code,{children:"Content-Type"})," is ",(0,r.jsx)(n.code,{children:"application/xml"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["While supporting the ",(0,r.jsx)(n.code,{children:"JSON"})," data format, it also supports the ",(0,r.jsx)(n.code,{children:"JSONP"})," protocol."]})}),"\n",(0,r.jsx)(n.h2,{id:"json",children:(0,r.jsx)(n.code,{children:"JSON"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/net/ghttp"\n)\n\nfunc main() {\n    s := g.Server()\n    s.Group("/", func(group *ghttp.RouterGroup) {\n        group.ALL("/json", func(r *ghttp.Request) {\n            r.Response.WriteJson(g.Map{\n                "id":   1,\n                "name": "john",\n            })\n        })\n    })\n    s.SetPort(8199)\n    s.Run()\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["After execution, we test it using the ",(0,r.jsx)(n.code,{children:"curl"})," tool:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'$ curl -i http://127.0.0.1:8199/json\nHTTP/1.1 200 OK\nContent-Type: application/json\nServer: GoFrame HTTP Server\nDate: Sun, 05 Jan 2020 02:49:31 GMT\nContent-Length: 22\n\n{"id":1,"name":"john"}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"jsonp",children:(0,r.jsx)(n.code,{children:"JSONP"})}),"\n",(0,r.jsxs)(n.p,{children:["Note that when using the ",(0,r.jsx)(n.code,{children:"JSONP"})," protocol, you must provide the ",(0,r.jsx)(n.code,{children:"callback"})," parameter via ",(0,r.jsx)(n.code,{children:"Query"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/net/ghttp"\n)\n\nfunc main() {\n    s := g.Server()\n    s.Group("/", func(group *ghttp.RouterGroup) {\n        group.ALL("/jsonp", func(r *ghttp.Request) {\n            r.Response.WriteJsonP(g.Map{\n                "id":   1,\n                "name": "john",\n            })\n        })\n    })\n    s.SetPort(8199)\n    s.Run()\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["After execution, we test it using the ",(0,r.jsx)(n.code,{children:"curl"})," tool:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'$ curl -i "http://127.0.0.1:8199/jsonp?callback=MyCallback"\nHTTP/1.1 200 OK\nServer: GoFrame HTTP Server\nDate: Sun, 05 Jan 2020 02:50:42 GMT\nContent-Length: 34\nContent-Type: text/plain; charset=utf-8\n\nMyCallback({"id":1,"name":"john"})\n'})}),"\n",(0,r.jsx)(n.h2,{id:"xml",children:(0,r.jsx)(n.code,{children:"XML"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/net/ghttp"\n)\n\nfunc main() {\n    s := g.Server()\n    s.Group("/", func(group *ghttp.RouterGroup) {\n        group.ALL("/xml", func(r *ghttp.Request) {\n            r.Response.Write(`<?xml version="1.0" encoding="UTF-8"?>`)\n            r.Response.WriteXml(g.Map{\n                "id":   1,\n                "name": "john",\n            })\n        })\n    })\n    s.SetPort(8199)\n    s.Run()\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["After execution, we test it using the ",(0,r.jsx)(n.code,{children:"curl"})," tool:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'$ curl -i http://127.0.0.1:8199/xml\nHTTP/1.1 200 OK\nContent-Type: application/xml\nServer: GoFrame HTTP Server\nDate: Sun, 05 Jan 2020 03:00:55 GMT\nContent-Length: 76\n\n<?xml version="1.0" encoding="UTF-8"?><doc><id>1</id><name>john</name></doc>\n'})})]})}function p(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return c},a:function(){return i}});var o=t(667294);let r={},s=o.createContext(r);function i(e){let n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);