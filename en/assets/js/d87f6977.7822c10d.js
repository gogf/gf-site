"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["2534"],{742423:function(e,t,i){i.r(t),i.d(t,{metadata:()=>o,contentTitle:()=>c,default:()=>p,assets:()=>s,toc:()=>d,frontMatter:()=>a});var o=JSON.parse('{"id":"docs/\u5FAE\u670D\u52A1\u5F00\u53D1/\u5DE5\u7A0B\u7BA1\u7406","title":"Project Structure","description":"Standard project directory structure for microservices development using the GoFrame framework, including management of protocol and interface files. It describes in detail how to use the GoFrame framework\'s development tools to generate protobuf files corresponding to database table structures, and how to compile protocol files to generate interfaces and controllers. Additionally, it explains the specific steps for service startup and interface implementation, and introduces methods for tag injection and data validation plugins.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u5FAE\u670D\u52A1\u5F00\u53D1/\u5DE5\u7A0B\u7BA1\u7406.md","sourceDirName":"docs/\u5FAE\u670D\u52A1\u5F00\u53D1","slug":"/docs/micro-service/structure","permalink":"/en/docs/micro-service/structure","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u5FAE\u670D\u52A1\u5F00\u53D1/\u5DE5\u7A0B\u7BA1\u7406.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732541616000,"sidebarPosition":1,"frontMatter":{"slug":"/docs/micro-service/structure","title":"Project Structure","sidebar_position":1,"hide_title":true,"keywords":["GoFrame","GoFrame Framework","Microservices","Project Directory","Protocol Files","Interface Files","Development Tools","Service Launch","Interface Implementation","Data Validation"],"description":"Standard project directory structure for microservices development using the GoFrame framework, including management of protocol and interface files. It describes in detail how to use the GoFrame framework\'s development tools to generate protobuf files corresponding to database table structures, and how to compile protocol files to generate interfaces and controllers. Additionally, it explains the specific steps for service startup and interface implementation, and introduces methods for tag injection and data validation plugins."},"sidebar":"mainSidebar","previous":{"title":"Preparation","permalink":"/en/docs/micro-service/prepare-environment"},"next":{"title":"Scaffold Components","permalink":"/en/docs/micro-service/scaffold"}}'),n=i("785893"),r=i("250065");let a={slug:"/docs/micro-service/structure",title:"Project Structure",sidebar_position:1,hide_title:!0,keywords:["GoFrame","GoFrame Framework","Microservices","Project Directory","Protocol Files","Interface Files","Development Tools","Service Launch","Interface Implementation","Data Validation"],description:"Standard project directory structure for microservices development using the GoFrame framework, including management of protocol and interface files. It describes in detail how to use the GoFrame framework's development tools to generate protobuf files corresponding to database table structures, and how to compile protocol files to generate interfaces and controllers. Additionally, it explains the specific steps for service startup and interface implementation, and introduces methods for tag injection and data validation plugins."},c=void 0,s={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Protocol Files",id:"protocol-files",level:2},{value:"Interface Files",id:"interface-files",level:2},{value:"Development Tools",id:"development-tools",level:2},{value:"Generate Data Table Structure",id:"generate-data-table-structure",level:3},{value:"Compile <code>proto</code> Protocol Files",id:"compile-proto-protocol-files",level:3},{value:"Service Startup",id:"service-startup",level:2},{value:"Interface Implementation and Registration",id:"interface-implementation-and-registration",level:2},{value:"Tag Injection and Data Validation",id:"tag-injection-and-data-validation",level:2},{value:"Automatic Tag Injection",id:"automatic-tag-injection",level:3},{value:"Data Validation Plugin",id:"data-validation-plugin",level:3}];function l(e){let t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",...(0,r.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,n.jsxs)(t.p,{children:["The project directory for microservices development adopts a unified framework directory structure. For details, please refer to the section: ",(0,n.jsx)(t.a,{href:"/en/docs/design/project-structure",children:"Project Structure\uD83D\uDD25"})]}),"\n",(0,n.jsxs)(t.p,{children:["Here we illustrate using the project ",(0,n.jsx)(t.a,{href:"https://github.com/gogf/gf-demo-grpc",children:"https://github.com/gogf/gf-demo-grpc"})," as an example."]}),"\n",(0,n.jsx)(t.h2,{id:"protocol-files",children:"Protocol Files"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.img,{src:i(529324).Z+"",width:"962",height:"1564"})," Protocol files are defined in the ",(0,n.jsx)(t.code,{children:"manifest/protobuf"})," directory. The directory path rule for protocol files is: ",(0,n.jsx)(t.code,{children:"module name/version number/xxx.proto"}),". The version number is managed in a form similar to ",(0,n.jsx)(t.code,{children:"v1/v2"})," to facilitate maintaining interface compatibility."]}),"\n",(0,n.jsxs)(t.p,{children:["Data table structures involved are stored in the ",(0,n.jsx)(t.code,{children:"manifest/pbentity"})," directory as ",(0,n.jsx)(t.code,{children:"protobuf"})," files generated by the framework development tools."]}),"\n",(0,n.jsx)(t.h2,{id:"interface-files",children:"Interface Files"}),"\n",(0,n.jsxs)(t.p,{children:["Interface documents generated by compiling ",(0,n.jsx)(t.code,{children:"proto"})," protocol files are stored in a unified ",(0,n.jsx)(t.code,{children:"api"})," directory."]}),"\n",(0,n.jsx)(t.h2,{id:"development-tools",children:"Development Tools"}),"\n",(0,n.jsx)(t.h3,{id:"generate-data-table-structure",children:"Generate Data Table Structure"}),"\n",(0,n.jsxs)(t.p,{children:["We can automatically generate corresponding ",(0,n.jsx)(t.code,{children:"protobuf"})," protocol files based on the database table structure using the ",(0,n.jsx)(t.code,{children:"gf gen pbentity / make pbentity"})," command. For details on the command, please refer to the section: ",(0,n.jsx)(t.a,{href:"/en/docs/cli/gen-pbentity",children:"DB Table To Protobuf"})]}),"\n",(0,n.jsxs)(t.h3,{id:"compile-proto-protocol-files",children:["Compile ",(0,n.jsx)(t.code,{children:"proto"})," Protocol Files"]}),"\n",(0,n.jsxs)(t.p,{children:["The framework provides the ",(0,n.jsx)(t.code,{children:"gf gen pb / make pb"})," command to automatically compile ",(0,n.jsx)(t.code,{children:"proto"})," protocol files and generate corresponding interface and controller files."]}),"\n",(0,n.jsx)(t.h2,{id:"service-startup",children:"Service Startup"}),"\n",(0,n.jsxs)(t.p,{children:["Service startup is still maintained through the ",(0,n.jsx)(t.code,{children:"cmd"})," directory, for example: ",(0,n.jsx)(t.a,{href:"https://github.com/gogf/gf-demo-grpc/blob/main/internal/cmd/cmd.go",children:"https://github.com/gogf/gf-demo-grpc/blob/main/internal/cmd/cmd.go"})]}),"\n",(0,n.jsx)(t.h2,{id:"interface-implementation-and-registration",children:"Interface Implementation and Registration"}),"\n",(0,n.jsxs)(t.p,{children:["Controllers are used for the specific implementation of interfaces defined by ",(0,n.jsx)(t.code,{children:"proto"}),". Controllers can be automatically generated and can automatically generate ",(0,n.jsx)(t.code,{children:"Register"})," methods to register specific implementations with the service object."]}),"\n",(0,n.jsx)(t.p,{children:"Registration method:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:i(334624).Z+"",width:"2800",height:"1064"})}),"\n",(0,n.jsx)(t.p,{children:"Startup registration:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:i(676656).Z+"",width:"2918",height:"1276"})}),"\n",(0,n.jsx)(t.h2,{id:"tag-injection-and-data-validation",children:"Tag Injection and Data Validation"}),"\n",(0,n.jsx)(t.h3,{id:"automatic-tag-injection",children:"Automatic Tag Injection"}),"\n",(0,n.jsxs)(t.p,{children:["When compiling ",(0,n.jsx)(t.code,{children:"proto"})," files using the ",(0,n.jsx)(t.code,{children:"gf gen pb/make pb"})," command, automatic tag injection is supported. You only need to write comments in the ",(0,n.jsx)(t.code,{children:"proto"})," file, and these comments will automatically be embedded as ",(0,n.jsx)(t.code,{children:"dc"})," tags into the struct properties. If a comment rule is in the form ",(0,n.jsx)(t.code,{children:"xxx:yyy"}),", it will automatically generate the ",(0,n.jsx)(t.code,{children:"xxx"})," tag. For example:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:i(242915).Z+"",width:"2504",height:"1558"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:i(22631).Z+"",width:"3092",height:"586"})}),"\n",(0,n.jsxs)(t.p,{children:["Note that in the ",(0,n.jsx)(t.code,{children:"GRPC"})," protocol, since both input and output use struct forms, the default value feature of ",(0,n.jsx)(t.code,{children:"HTTP"})," services cannot be implemented."]}),"\n",(0,n.jsx)(t.h3,{id:"data-validation-plugin",children:"Data Validation Plugin"}),"\n",(0,n.jsx)(t.p,{children:"The data validation plugin will automatically validate requests based on rules set in the tags, and it needs to be manually introduced on the server side in the form of interceptors:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:i(733957).Z+"",width:"2524",height:"1078"})})]})}function p(e={}){let{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},529324:function(e,t,i){i.d(t,{Z:function(){return o}});let o=i.p+"assets/images/016fd519878bf775e744f9f2d1c46cb8-a3990afef415a8002e1ba971e9bb92a6.png"},334624:function(e,t,i){i.d(t,{Z:function(){return o}});let o=i.p+"assets/images/50e4eb739f08fcc6479bb32c9e9a6ade-5cb18f03a59731bef6709d3d694384a8.png"},676656:function(e,t,i){i.d(t,{Z:function(){return o}});let o=i.p+"assets/images/5cda3b08b1346f392c4b717b71fa2710-626c6112e6753ccb6269fb4015a71989.png"},22631:function(e,t,i){i.d(t,{Z:function(){return o}});let o=i.p+"assets/images/620e319d848d5b91b93d86c33862f19a-4007722ffad38cf8f011bb345482adc3.png"},242915:function(e,t,i){i.d(t,{Z:function(){return o}});let o=i.p+"assets/images/96c4eaa4ff55045ac0d224539a903a2b-a50e5632e993a1b051006bdc6cb561d2.png"},733957:function(e,t,i){i.d(t,{Z:function(){return o}});let o=i.p+"assets/images/a38675f4912ab10e2680814f0dae2e0f-65c141a1427c25778cb43548a6029671.png"},250065:function(e,t,i){i.d(t,{Z:function(){return c},a:function(){return a}});var o=i(667294);let n={},r=o.createContext(n);function a(e){let t=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);