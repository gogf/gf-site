"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["73671"],{821260:function(e,o,n){n.r(o),n.d(o,{metadata:()=>t,contentTitle:()=>s,default:()=>d,assets:()=>c,toc:()=>l,frontMatter:()=>a});var t=JSON.parse('{"id":"docs/\u5FAE\u670D\u52A1\u5F00\u53D1/\u670D\u52A1\u7AEF\u914D\u7F6E","title":"GRPC Server Configuration","description":"Server configuration methods, including how to read and manage configuration files through the GoFrame Framework. Provides a complete configuration template example covering service name, service listening address, log storage directory, error log recording, and access log recording settings. The configuration aligns with the framework\'s automatic reading logic, ensuring convenient service deployment and efficient log management, as well as how to set up and use parameter log component configurations for independent grpc server log management.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u5FAE\u670D\u52A1\u5F00\u53D1/\u670D\u52A1\u7AEF\u914D\u7F6E.md","sourceDirName":"docs/\u5FAE\u670D\u52A1\u5F00\u53D1","slug":"/docs/micro-service/config","permalink":"/en/docs/micro-service/config","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u5FAE\u670D\u52A1\u5F00\u53D1/\u670D\u52A1\u7AEF\u914D\u7F6E.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732541616000,"sidebarPosition":3,"frontMatter":{"slug":"/docs/micro-service/config","title":"GRPC Server Configuration","sidebar_position":3,"hide_title":true,"keywords":["GoFrame","GoFrame Framework","Configuration Management","Server Configuration","GrpcServerConfig","Log Configuration","Log Component","Server Listening","Automatic Mapping","Error Logging"],"description":"Server configuration methods, including how to read and manage configuration files through the GoFrame Framework. Provides a complete configuration template example covering service name, service listening address, log storage directory, error log recording, and access log recording settings. The configuration aligns with the framework\'s automatic reading logic, ensuring convenient service deployment and efficient log management, as well as how to set up and use parameter log component configurations for independent grpc server log management."},"sidebar":"mainSidebar","previous":{"title":"Scaffold Components","permalink":"/en/docs/micro-service/scaffold"},"next":{"title":"GRPC Interceptor Component","permalink":"/en/docs/micro-service/interceptor"}}'),r=n("785893"),i=n("250065");let a={slug:"/docs/micro-service/config",title:"GRPC Server Configuration",sidebar_position:3,hide_title:!0,keywords:["GoFrame","GoFrame Framework","Configuration Management","Server Configuration","GrpcServerConfig","Log Configuration","Log Component","Server Listening","Automatic Mapping","Error Logging"],description:"Server configuration methods, including how to read and manage configuration files through the GoFrame Framework. Provides a complete configuration template example covering service name, service listening address, log storage directory, error log recording, and access log recording settings. The configuration aligns with the framework's automatic reading logic, ensuring convenient service deployment and efficient log management, as well as how to set up and use parameter log component configurations for independent grpc server log management."},s=void 0,c={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Configuration Template",id:"configuration-template",level:2}];function g(e){let o={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(o.p,{children:"The server supports configuration files, and all configurations will be automatically mapped to the configuration object. The configuration object is as follows:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-go",children:"// GrpcServerConfig is the configuration for server.\ntype GrpcServerConfig struct {\n    Address          string              // (optional) Address for server listening.\n    Name             string              // (optional) Name for current service.\n    Logger           *glog.Logger        // (optional) Logger for server.\n    LogPath          string              // (optional) LogPath specifies the directory for storing logging files.\n    LogStdout        bool                // (optional) LogStdout specifies whether printing logging content to stdout.\n    ErrorStack       bool                // (optional) ErrorStack specifies whether logging stack information when error.\n    ErrorLogEnabled  bool                // (optional) ErrorLogEnabled enables error logging content to files.\n    ErrorLogPattern  string              // (optional) ErrorLogPattern specifies the error log file pattern like: error-{Ymd}.log\n    AccessLogEnabled bool                // (optional) AccessLogEnabled enables access logging content to file.\n    AccessLogPattern string              // (optional) AccessLogPattern specifies the error log file pattern like: access-{Ymd}.log\n}\n"})}),"\n",(0,r.jsxs)(o.p,{children:["The logic for automatic reading of configuration files is consistent with the framework. For detailed information, please refer to the section: ",(0,r.jsx)(o.a,{href:"/en/docs/core/gcfg",children:"Configuration"})]}),"\n",(0,r.jsx)(o.h2,{id:"configuration-template",children:"Configuration Template"}),"\n",(0,r.jsx)(o.p,{children:"An example of a complete configuration template:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-yaml",children:'grpc:\n  name:             "demo"  # Service name\n  address:          ":8000" # Custom service listening address\n  logPath:          "./log" # Log storage directory path\n  logStdout:        true    # Whether to output logs to the terminal\n  errorLogEnabled:  true    # Whether to enable error logging\n  accessLogEnabled: true    # Whether to enable access logging\n  errorStack:       true    # Whether to log error stacks when errors occur\n\n  # Log extension configuration (parameter log component configuration)\n  logger:\n    path:                  "/var/log/"   # Log file path. Default is empty, indicating disabled, output to terminal only\n    file:                  "{Y-m-d}.log" # Log file format. Default is "{Y-m-d}.log"\n    prefix:                ""            # Prefix for log content output. Default is empty\n    level:                 "all"         # Log output level\n    stdout:                true          # Whether to output logs to terminal simultaneously. Default is true\n    rotateSize:            0             # Rotate files based on log file size. Default is 0, indicating disabled\n    rotateExpire:          0             # Rotate files based on time intervals. Default is 0, indicating disabled\n    rotateBackupLimit:     0             # Limit backup files based on the number of split files, valid when rotation is enabled. Default is 0, meaning no backup, delete when split\n    rotateBackupExpire:    0             # Clean up split files based on the expiration period, valid when rotation is enabled. Default is 0, meaning no backup, delete when split\n    rotateBackupCompress:  0             # Compression ratio for rotating files (0-9). Default is 0, indicating no compression\n    rotateCheckInterval:   "1h"          # Time interval for rotation checks, usually no need to set. Default is 1 hour\n\n'})}),"\n",(0,r.jsxs)(o.p,{children:["The log configuration here is consistent with the ",(0,r.jsx)(o.code,{children:"http server"})," and can use independent log component configuration items to configure the ",(0,r.jsx)(o.code,{children:"grpc server"})," logs. For detailed information about the log component configuration, please refer to this document: ",(0,r.jsx)(o.a,{href:"/en/docs/core/glog-config",children:"Logging - Configuration"})]}),"\n",(0,r.jsxs)(o.p,{children:["In case the ",(0,r.jsx)(o.code,{children:"address"})," is not configured, the ",(0,r.jsx)(o.code,{children:"grpc server"})," will start using all ",(0,r.jsx)(o.code,{children:"ip"})," addresses of the local network card with a ",(0,r.jsx)(o.strong,{children:"random free port"})," (default configuration ",(0,r.jsx)(o.code,{children:":0"}),"). If you want to specify the ",(0,r.jsx)(o.code,{children:"ip"})," but use a random free port to start the ",(0,r.jsx)(o.code,{children:"grpc server"}),", you can configure the ",(0,r.jsx)(o.code,{children:"address"})," using the format ",(0,r.jsx)(o.code,{children:"ip:0"}),", for example: ",(0,r.jsx)(o.code,{children:"192.168.1.1:0, 10.0.1.1:0"}),"."]})]})}function d(e={}){let{wrapper:o}={...(0,i.a)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(g,{...e})}):g(e)}},250065:function(e,o,n){n.d(o,{Z:function(){return s},a:function(){return a}});var t=n(667294);let r={},i=t.createContext(r);function a(e){let o=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function s(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:o},e.children)}}}]);