"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["29206"],{25952:function(e,n,t){t.r(n),t.d(n,{metadata:()=>r,contentTitle:()=>s,default:()=>u,assets:()=>d,toc:()=>l,frontMatter:()=>a});var r=JSON.parse('{"id":"docs/WEB\u670D\u52A1\u5F00\u53D1/\u8DEF\u7531\u7BA1\u7406/\u8DEF\u7531\u7BA1\u7406-\u8DEF\u7531\u6CE8\u518C/\u8DEF\u7531\u6CE8\u518C-\u89C4\u8303\u8DEF\u7531/\u89C4\u8303\u8DEF\u7531-\u57FA\u672C\u793A\u4F8B","title":"Standard Router - Example","description":"Setting up and running a simple Hello service example using the GoFrame framework, highlighting the use of configuration files, route definitions, and automatic generation of SwaggerUI pages. Additionally, it explores issues such as generating API documentation, handling return middleware, and how to define standardized API paths, providing developers with a convenient method to generate and test APIs.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/WEB\u670D\u52A1\u5F00\u53D1/\u8DEF\u7531\u7BA1\u7406/\u8DEF\u7531\u7BA1\u7406-\u8DEF\u7531\u6CE8\u518C/\u8DEF\u7531\u6CE8\u518C-\u89C4\u8303\u8DEF\u7531/\u89C4\u8303\u8DEF\u7531-\u57FA\u672C\u793A\u4F8B.md","sourceDirName":"docs/WEB\u670D\u52A1\u5F00\u53D1/\u8DEF\u7531\u7BA1\u7406/\u8DEF\u7531\u7BA1\u7406-\u8DEF\u7531\u6CE8\u518C/\u8DEF\u7531\u6CE8\u518C-\u89C4\u8303\u8DEF\u7531","slug":"/docs/web/router-registering-strict-router-example","permalink":"/en/docs/web/router-registering-strict-router-example","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/WEB\u670D\u52A1\u5F00\u53D1/\u8DEF\u7531\u7BA1\u7406/\u8DEF\u7531\u7BA1\u7406-\u8DEF\u7531\u6CE8\u518C/\u8DEF\u7531\u6CE8\u518C-\u89C4\u8303\u8DEF\u7531/\u89C4\u8303\u8DEF\u7531-\u57FA\u672C\u793A\u4F8B.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732541616000,"sidebarPosition":0,"frontMatter":{"slug":"/docs/web/router-registering-strict-router-example","title":"Standard Router - Example","sidebar_position":0,"hide_title":true,"keywords":["GoFrame","GoFrame Framework","Router","API Documentation","SwaggerUI","OpenAPIv3","Middleware","Web Framework","API Testing","Go Language"],"description":"Setting up and running a simple Hello service example using the GoFrame framework, highlighting the use of configuration files, route definitions, and automatic generation of SwaggerUI pages. Additionally, it explores issues such as generating API documentation, handling return middleware, and how to define standardized API paths, providing developers with a convenient method to generate and test APIs."},"sidebar":"mainSidebar","previous":{"title":"Standard Router","permalink":"/en/docs/web/router-registering-strict-router"},"next":{"title":"Standard Router - Usage","permalink":"/en/docs/web/router-registering-strict-router-usage"}}'),i=t("785893"),o=t("250065");let a={slug:"/docs/web/router-registering-strict-router-example",title:"Standard Router - Example",sidebar_position:0,hide_title:!0,keywords:["GoFrame","GoFrame Framework","Router","API Documentation","SwaggerUI","OpenAPIv3","Middleware","Web Framework","API Testing","Go Language"],description:"Setting up and running a simple Hello service example using the GoFrame framework, highlighting the use of configuration files, route definitions, and automatic generation of SwaggerUI pages. Additionally, it explores issues such as generating API documentation, handling return middleware, and how to define standardized API paths, providing developers with a convenient method to generate and test APIs."},s=void 0,d={},l=[{value:"Configuration File",id:"configuration-file",level:2},{value:"Sample Code",id:"sample-code",level:2},{value:"API Documentation",id:"api-documentation",level:2},{value:"SwaggerUI",id:"swaggerui",level:2},{value:"Return Middleware",id:"return-middleware",level:2}];function c(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"configuration-file",children:"Configuration File"}),"\n",(0,i.jsxs)(n.p,{children:["Here we use a ",(0,i.jsx)(n.code,{children:"YAML"})," configuration file: ",(0,i.jsx)(n.code,{children:"config.yaml"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'server:\n  address:     ":8199"\n  openapiPath: "/api.json"\n  swaggerPath: "/swagger"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"sample-code",children:"Sample Code"}),"\n",(0,i.jsxs)(n.p,{children:["Let's start with a simple ",(0,i.jsx)(n.code,{children:"Hello"})," example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "context"\n    "fmt"\n\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/net/ghttp"\n)\n\ntype HelloReq struct {\n    g.Meta `path:"/hello" method:"get"`\n    Name   string `v:"required" dc:"Your name"`\n}\ntype HelloRes struct {\n    Reply string `dc:"Reply content"`\n}\n\ntype Hello struct{}\n\nfunc (Hello) Say(ctx context.Context, req *HelloReq) (res *HelloRes, err error) {\n    g.Log().Debugf(ctx, `receive say: %+v`, req)\n    res = &HelloRes{\n        Reply: fmt.Sprintf(`Hi %s`, req.Name),\n    }\n    return\n}\n\nfunc main() {\n    s := g.Server()\n    s.Use(ghttp.MiddlewareHandlerResponse)\n    s.Group("/", func(group *ghttp.RouterGroup) {\n        group.Bind(\n            new(Hello),\n        )\n    })\n    s.Run()\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Copy this code and let's run it to see what happens. The terminal will output the following information:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"2021-11-19 23:31:35.277 25580: http server started listening on [:8199]\n\n  SERVER  | DOMAIN  | ADDRESS | METHOD |   ROUTE    |                          HANDLER                          |    MIDDLEWARE\n----------|---------|---------|--------|------------|-----------------------------------------------------------|--------------------\n  default | default | :8199   | ALL    | /*         | github.com/gogf/gf/v2/net/ghttp.MiddlewareHandlerResponse | GLOBAL MIDDLEWARE\n----------|---------|---------|--------|------------|-----------------------------------------------------------|--------------------\n  default | default | :8199   | ALL    | /api.json  | github.com/gogf/gf/v2/net/ghttp.(*Server).openapiSpec-fm  |\n----------|---------|---------|--------|------------|-----------------------------------------------------------|--------------------\n  default | default | :8199   | GET    | /hello     | main.(*Hello).Say                                         |\n----------|---------|---------|--------|------------|-----------------------------------------------------------|--------------------\n  default | default | :8199   | ALL    | /swagger/* | github.com/gogf/gf/v2/net/ghttp.(*Server).swaggerUI-fm    | HOOK_BEFORE_SERVE\n----------|---------|---------|--------|------------|-----------------------------------------------------------|--------------------\n"})}),"\n",(0,i.jsxs)(n.p,{children:["As you can see, in addition to our business route, the ",(0,i.jsx)(n.code,{children:"Server"})," has automatically registered two routes for us: ",(0,i.jsx)(n.code,{children:"/api.json"})," and ",(0,i.jsx)(n.code,{children:"/swagger/*"}),". The former is an auto-generated API documentation based on the standard ",(0,i.jsx)(n.code,{children:"OpenAPIv3"})," protocol, and the latter is an auto-generated SwaggerUI page for developers to view and debug. These two features are disabled by default, and developers can enable them using the ",(0,i.jsx)(n.code,{children:"openapiPath"})," and ",(0,i.jsx)(n.code,{children:"swaggerPath"})," configuration options in the previous example."]}),"\n",(0,i.jsx)(n.h2,{id:"api-documentation",children:"API Documentation"}),"\n",(0,i.jsxs)(n.p,{children:["The API documentation is generated through the ",(0,i.jsx)(n.code,{children:"OpenAPIv3"})," protocol, typically requiring corresponding UI tools to view it, at the address: ",(0,i.jsx)(n.a,{href:"http://127.0.0.1:8199/api.json",children:"http://127.0.0.1:8199/api.json"})]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["Since ",(0,i.jsx)(n.code,{children:"OpenAPIv3"})," is a standardized API definition protocol, developers can do many things based on the protocol content, such as custom UI display, client code generation, protocol conversion, etc."]})}),"\n",(0,i.jsx)(n.h2,{id:"swaggerui",children:"SwaggerUI"}),"\n",(0,i.jsxs)(n.p,{children:["Let's take a look at this ",(0,i.jsx)(n.code,{children:"SwaggerUI"})," page: ",(0,i.jsx)(n.a,{href:"http://127.0.0.1:8199/swagger/",children:"http://127.0.0.1:8199/swagger/"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(53206).Z+"",width:"3582",height:"1274"})}),"\n",(0,i.jsx)(n.p,{children:"There's only one route address and its corresponding input and output structures here. Of course, this is just a simple example; in a real project, you can make the page more colorful through some configuration."}),"\n",(0,i.jsx)(n.p,{children:"Let's continue to do an API test on this page:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(599809).Z+"",width:"2754",height:"1854"})}),"\n",(0,i.jsxs)(n.p,{children:["Yes, the API returned a ",(0,i.jsx)(n.code,{children:"Json"})," content with a fixed data format, but you can see the ",(0,i.jsx)(n.code,{children:"data"})," is the return result we need."]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["Note: The latest version of the ",(0,i.jsx)(n.code,{children:"SwaggerUI"})," page no longer supports API testing features. If you need this functionality, you can customize ",(0,i.jsx)(n.code,{children:"SwaggerUI"})," (refer to ",(0,i.jsx)(n.a,{href:"/en/docs/web/api-document-swagger-ui",children:"API Document - Custom UI"}),"), or import the API file ",(0,i.jsx)(n.code,{children:"api.json"})," into third-party tools (such as ",(0,i.jsx)(n.code,{children:"apifox"}),") for testing:"]})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(16344).Z+"",width:"1723",height:"646"})}),"\n",(0,i.jsx)(n.h2,{id:"return-middleware",children:"Return Middleware"}),"\n",(0,i.jsxs)(n.p,{children:["Wait a minute, did we miss something? Yes, we used a middleware provided by a ",(0,i.jsx)(n.code,{children:"Server"})," component here. What is it used for? Let's take a look at its method definition:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(218568).Z+"",width:"3584",height:"2070"})}),"\n",(0,i.jsx)(n.p,{children:"Yes, when we do not provide a custom return data format middleware, it uses a default middleware to handle our requests and returns a default data format."})]})}function u(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},599809:function(e,n,t){t.d(n,{Z:function(){return r}});let r=t.p+"assets/images/9c5c2e6539f653a9f8774916521bd009-25418d7f2af9b6caf2bfa86b523e8b0e.png"},218568:function(e,n,t){t.d(n,{Z:function(){return r}});let r=t.p+"assets/images/c3600fa69faf060cb5c4839e2966ab6c-227170af0e5f6c6a304bfb586f286de4.png"},53206:function(e,n,t){t.d(n,{Z:function(){return r}});let r=t.p+"assets/images/f6deafda84d2d6c88d147f9b4869876f-cab4ac02ac82b53e2dcb64735c5e1e4d.png"},16344:function(e,n,t){t.d(n,{Z:function(){return r}});let r=t.p+"assets/images/fe95116df6dfa97448b5a9bcacde87ca-270c64915ea7e84dd0a8ca6f92018e9e.png"},250065:function(e,n,t){t.d(n,{Z:function(){return s},a:function(){return a}});var r=t(667294);let i={},o=r.createContext(i);function a(e){let n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);