"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["80788"],{645160:function(e,n,i){i.r(n),i.d(n,{metadata:()=>o,contentTitle:()=>a,default:()=>m,assets:()=>c,toc:()=>l,frontMatter:()=>s});var o=JSON.parse('{"id":"docs/\u9879\u76EE\u90E8\u7F72/\u5BB9\u5668\u90E8\u7F72","title":"Deployment - Container","description":"Deploy Golang applications using Dockerization, exploring cross-compilation technology, and how to build and distribute Docker images on Alpine images. In enterprise environments, it\'s recommended to combine with Kubernetes or Docker Swarm for container orchestration to improve system scalability and reliability.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u9879\u76EE\u90E8\u7F72/\u5BB9\u5668\u90E8\u7F72.md","sourceDirName":"docs/\u9879\u76EE\u90E8\u7F72","slug":"/docs/deploy/container","permalink":"/en/docs/deploy/container","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u9879\u76EE\u90E8\u7F72/\u5BB9\u5668\u90E8\u7F72.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732451468000,"sidebarPosition":2,"frontMatter":{"slug":"/docs/deploy/container","title":"Deployment - Container","sidebar_position":2,"hide_title":true,"keywords":["container deployment","docker","golang","cross-compilation","static compilation","alpine","Dockerfile","image distribution","kubernetes","docker swarm"],"description":"Deploy Golang applications using Dockerization, exploring cross-compilation technology, and how to build and distribute Docker images on Alpine images. In enterprise environments, it\'s recommended to combine with Kubernetes or Docker Swarm for container orchestration to improve system scalability and reliability."},"sidebar":"mainSidebar","previous":{"title":"Deployment - Proxy","permalink":"/en/docs/deploy/proxy"},"next":{"title":"Framework Design","permalink":"/en/docs/design"}}'),t=i("785893"),r=i("250065");let s={slug:"/docs/deploy/container",title:"Deployment - Container",sidebar_position:2,hide_title:!0,keywords:["container deployment","docker","golang","cross-compilation","static compilation","alpine","Dockerfile","image distribution","kubernetes","docker swarm"],description:"Deploy Golang applications using Dockerization, exploring cross-compilation technology, and how to build and distribute Docker images on Alpine images. In enterprise environments, it's recommended to combine with Kubernetes or Docker Swarm for container orchestration to improve system scalability and reliability."},a=void 0,c={},l=[{value:"1. Compile Program",id:"1-compile-program",level:2},{value:"2. Compile Image",id:"2-compile-image",level:2},{value:"3. Run Image",id:"3-run-image",level:2},{value:"4. Image Distribution",id:"4-image-distribution",level:2},{value:"5. Container Orchestration",id:"5-container-orchestration",level:2}];function d(e){let n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Container deployment refers to deploying Golang applications using Dockerization, the most popular and recommended deployment method in the cloud service era."}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["In the examples below, we use ",(0,t.jsx)(n.code,{children:"main"})," as the project name consistently."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"1-compile-program",children:"1. Compile Program"}),"\n",(0,t.jsx)(n.p,{children:"Cross-platform cross-compilation is one of Golang's features, allowing us to easily compile the version needed for the target server platform, and it's statically compiled, making it very easy to solve runtime dependencies."}),"\n",(0,t.jsx)(n.p,{children:"Use the following command to statically compile an executable for the Linux platform amd64 architecture:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o main main.go\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The generated ",(0,t.jsx)(n.code,{children:"main"})," is our statically compiled executable file deployable on ",(0,t.jsx)(n.code,{children:"Linux amd64"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"2-compile-image",children:"2. Compile Image"}),"\n",(0,t.jsxs)(n.p,{children:["We need to compile this executable file ",(0,t.jsx)(n.code,{children:"main"})," into a Docker image for distribution and deployment. The runtime environment for Golang is recommended to use the Alpine base system image, resulting in a container image of about 20MB."]}),"\n",(0,t.jsxs)(n.p,{children:["A reference ",(0,t.jsx)(n.code,{children:"Dockerfile"})," is as follows:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dockerfile",children:'FROM loads/alpine:3.8\n\nLABEL maintainer="john@goframe.org"\n\n###############################################################################\n#                                INSTALLATION\n###############################################################################\n\n# Set a fixed project path\nENV WORKDIR /app/main\n\n# Add application executable and set permissions\nADD ./main   $WORKDIR/main\nRUN chmod +x $WORKDIR/main\n\n# Add static resource files\nADD resource $WORKDIR/resource\n\n###############################################################################\n#                                   START\n###############################################################################\nWORKDIR $WORKDIR\nCMD ./main\n'})}),"\n",(0,t.jsxs)(n.p,{children:["In this example, our base image is ",(0,t.jsx)(n.code,{children:"loads/alpine:3.8"}),". For users in China, it is recommended to use this base image. The Dockerfile address for the base image is: ",(0,t.jsx)(n.a,{href:"https://github.com/gqcn/dockerfiles",children:"https://github.com/gqcn/dockerfiles"}),", and the repository address is: ",(0,t.jsx)(n.a,{href:"https://hub.docker.com/u/loads",children:"https://hub.docker.com/u/loads"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Then use the ",(0,t.jsx)(n.code,{children:"docker build -t main ."})," command to compile and generate a Docker image named ",(0,t.jsx)(n.code,{children:"main"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Notes"})}),"\n",(0,t.jsxs)(n.p,{children:["It should be noted that in some project architectural designs, ",(0,t.jsx)(n.strong,{children:"static files"})," and ",(0,t.jsx)(n.strong,{children:"configuration files"})," may not be compiled and published with the image but managed and published separately."]}),"\n",(0,t.jsxs)(n.p,{children:["For example, in projects using the MVVM pattern (such as those using the Vue framework), the front end and back end are often very independent, so the ",(0,t.jsx)(n.code,{children:"public"})," directory is often not included in the image. In projects that use a ",(0,t.jsx)(n.code,{children:"configuration management center"})," (such as using ",(0,t.jsx)(n.code,{children:"consul"}),"/",(0,t.jsx)(n.code,{children:"etcd"}),"/",(0,t.jsx)(n.code,{children:"zookeeper"}),"), the ",(0,t.jsx)(n.code,{children:"config"})," directory is often not needed."]}),"\n",(0,t.jsxs)(n.p,{children:["Therefore, the use of the ",(0,t.jsx)(n.code,{children:"Dockerfile"})," provided above is only for reference, and necessary adjustments should be made based on actual conditions."]}),"\n",(0,t.jsx)(n.h2,{id:"3-run-image",children:"3. Run Image"}),"\n",(0,t.jsx)(n.p,{children:"Use the following command to run the image just compiled:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run main\n"})}),"\n",(0,t.jsx)(n.h2,{id:"4-image-distribution",children:"4. Image Distribution"}),"\n",(0,t.jsxs)(n.p,{children:["For container distribution, you can use the official Docker platform: ",(0,t.jsx)(n.a,{href:"https://hub.docker.com/",children:"https://hub.docker.com/"}),", or consider using Alibaba Cloud in China: ",(0,t.jsx)(n.a,{href:"https://www.aliyun.com/product/acr",children:"https://www.aliyun.com/product/acr"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"5-container-orchestration",children:"5. Container Orchestration"}),"\n",(0,t.jsx)(n.p,{children:"In enterprise-level production environments, Docker containers often need to be used in conjunction with container orchestration tools like Kubernetes or Docker Swarm. Container orchestration involves a lot of content, and interested individuals can refer to the following materials:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://kubernetes.io/",children:"https://kubernetes.io/"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.docker.com/swarm/",children:"https://docs.docker.com/swarm/"})}),"\n"]})]})}function m(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},250065:function(e,n,i){i.d(n,{Z:function(){return a},a:function(){return s}});var o=i(667294);let t={},r=o.createContext(t);function s(e){let n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);