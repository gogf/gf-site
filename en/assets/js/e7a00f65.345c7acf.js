"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["47766"],{388023(e,t,a){a.r(t),a.d(t,{metadata:()=>s,default:()=>u,frontMatter:()=>n,contentTitle:()=>o,toc:()=>l,assets:()=>c});var s=JSON.parse('{"id":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C/\u6570\u636E\u6821\u9A8C-\u53C2\u6570\u7C7B\u578B/\u6570\u636E\u6821\u9A8C-Struct\u6821\u9A8C/Struct\u6821\u9A8C-Assoc\u5173\u8054","title":"Struct Validation - Assoc","description":"To avoid issues caused by default values in structs, the GoFrame framework introduces the Assoc method, which allows strict struct validation based on given parameters. This method is especially useful in scenarios involving client request parameters, ensuring that validation rules are not affected by default values.","source":"@site/i18n/en/docusaurus-plugin-content-docs/version-2.8.x/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C/\u6570\u636E\u6821\u9A8C-\u53C2\u6570\u7C7B\u578B/\u6570\u636E\u6821\u9A8C-Struct\u6821\u9A8C/Struct\u6821\u9A8C-Assoc\u5173\u8054.md","sourceDirName":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C/\u6570\u636E\u6821\u9A8C-\u53C2\u6570\u7C7B\u578B/\u6570\u636E\u6821\u9A8C-Struct\u6821\u9A8C","slug":"/docs/core/gvalid-parameter-type-struct-assoc","permalink":"/en/2.8.x/docs/core/gvalid-parameter-type-struct-assoc","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/versioned_docs/version-2.8.x/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C/\u6570\u636E\u6821\u9A8C-\u53C2\u6570\u7C7B\u578B/\u6570\u636E\u6821\u9A8C-Struct\u6821\u9A8C/Struct\u6821\u9A8C-Assoc\u5173\u8054.md","tags":[],"version":"2.8.x","lastUpdatedBy":"John Guo","lastUpdatedAt":1742194305000,"sidebarPosition":1,"frontMatter":{"slug":"/docs/core/gvalid-parameter-type-struct-assoc","title":"Struct Validation - Assoc","sidebar_position":1,"hide_title":true,"keywords":["GoFrame","GoFrame Framework","gvalid","Struct Validation","Assoc Method","Parameter Validation","Struct Validation","goframe v2.0","gvalid tag","Client Request Validation"],"description":"To avoid issues caused by default values in structs, the GoFrame framework introduces the Assoc method, which allows strict struct validation based on given parameters. This method is especially useful in scenarios involving client request parameters, ensuring that validation rules are not affected by default values."},"sidebar":"mainSidebar","previous":{"title":"Struct Validation - Example","permalink":"/en/2.8.x/docs/core/gvalid-parameter-type-struct-example"},"next":{"title":"Data Validation - Optional Rule","permalink":"/en/2.8.x/docs/core/gvalid-optional-rule"}}'),i=a(474848),r=a(28453);let n={slug:"/docs/core/gvalid-parameter-type-struct-assoc",title:"Struct Validation - Assoc",sidebar_position:1,hide_title:!0,keywords:["GoFrame","GoFrame Framework","gvalid","Struct Validation","Assoc Method","Parameter Validation","Struct Validation","goframe v2.0","gvalid tag","Client Request Validation"],description:"To avoid issues caused by default values in structs, the GoFrame framework introduces the Assoc method, which allows strict struct validation based on given parameters. This method is especially useful in scenarios involving client request parameters, ensuring that validation rules are not affected by default values."},o,c={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Usage Example",id:"usage-example",level:2}];function d(e){let t={admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(t.p,{children:["To avoid confusion caused by default values in structs, starting from version ",(0,i.jsx)(t.code,{children:"goframe v2.0"}),", we have added an ",(0,i.jsx)(t.code,{children:"Assoc"})," method. This method allows struct validation to be strictly based on the given parameters rather than on the struct's property values (to avoid the effect of default struct property values). The validation rules will still be automatically read from the ",(0,i.jsx)(t.code,{children:"gvalid tag"})," within the struct."]}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsx)(t.p,{children:"This is particularly useful for scenarios that require validation of client request parameters."})}),"\n",(0,i.jsx)(t.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-go",children:'package main\n\nimport (\n    "github.com/gogf/gf/v2/frame/g"\n    "github.com/gogf/gf/v2/os/gctx"\n)\n\nfunc main() {\n    type User struct {\n        Name string `v:"required#Please enter user name"`\n        Type int    `v:"required#Please select user type"`\n    }\n    var (\n        ctx  = gctx.New()\n        user = User{}\n        data = g.Map{\n            "name": "john",\n        }\n    )\n    err := g.Validator().Assoc(data).Data(user).Run(ctx)\n    if err != nil {\n        g.Dump(err.Items())\n    }\n}\n'})}),"\n",(0,i.jsx)(t.p,{children:"After execution, the terminal output is:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'[\n    {\n        "Type": {\n            "required": "Please select user type"\n        }\n    }\n]\n'})}),"\n",(0,i.jsxs)(t.p,{children:["As you can see, the validation rule ",(0,i.jsx)(t.code,{children:"required"})," for the ",(0,i.jsx)(t.code,{children:"Type"})," attribute in the struct was not affected by the default value and was still executed as expected."]})]})}function u(e={}){let{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453(e,t,a){a.d(t,{R:()=>n,x:()=>o});var s=a(296540);let i={},r=s.createContext(i);function n(e){let t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:n(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);