"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["13488"],{627566:function(e,n,t){t.r(n),t.d(n,{metadata:()=>o,contentTitle:()=>s,default:()=>f,assets:()=>c,toc:()=>d,frontMatter:()=>a});var o=JSON.parse('{"id":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u4F7F\u7528\u914D\u7F6E/ORM\u4F7F\u7528\u914D\u7F6E-\u5E38\u89C1\u95EE\u9898","title":"ORM Configuration - FAQ","description":"Implement database account password encryption in configuration files within the GoFrame framework to prevent the leakage of sensitive information. Users can decrypt the encrypted fields when connecting to the database by customizing a Driver. Using mysql as an example, the code examples demonstrate how to wrap the mysql driver and override its Open method to ensure the security and flexibility of database connections.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u4F7F\u7528\u914D\u7F6E/ORM\u4F7F\u7528\u914D\u7F6E-\u5E38\u89C1\u95EE\u9898.md","sourceDirName":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u4F7F\u7528\u914D\u7F6E","slug":"/docs/core/gdb-config-faq","permalink":"/en/docs/core/gdb-config-faq","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u4F7F\u7528\u914D\u7F6E/ORM\u4F7F\u7528\u914D\u7F6E-\u5E38\u89C1\u95EE\u9898.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732541616000,"sidebarPosition":2,"frontMatter":{"slug":"/docs/core/gdb-config-faq","title":"ORM Configuration - FAQ","sidebar_position":2,"hide_title":true,"keywords":["GoFrame","GoFrame framework","database encryption","custom Driver","mysql","password decryption","configuration file encryption","ORM interface development","database account protection","database connection"],"description":"Implement database account password encryption in configuration files within the GoFrame framework to prevent the leakage of sensitive information. Users can decrypt the encrypted fields when connecting to the database by customizing a Driver. Using mysql as an example, the code examples demonstrate how to wrap the mysql driver and override its Open method to ensure the security and flexibility of database connections."},"sidebar":"mainSidebar","previous":{"title":"ORM Configuration - Methods","permalink":"/en/docs/core/gdb-config-funcs"},"next":{"title":"ORM - Model \uD83D\uDD25","permalink":"/en/docs/core/gdb-chaining"}}'),i=t("785893"),r=t("250065");let a={slug:"/docs/core/gdb-config-faq",title:"ORM Configuration - FAQ",sidebar_position:2,hide_title:!0,keywords:["GoFrame","GoFrame framework","database encryption","custom Driver","mysql","password decryption","configuration file encryption","ORM interface development","database account protection","database connection"],description:"Implement database account password encryption in configuration files within the GoFrame framework to prevent the leakage of sensitive information. Users can decrypt the encrypted fields when connecting to the database by customizing a Driver. Using mysql as an example, the code examples demonstrate how to wrap the mysql driver and override its Open method to ensure the security and flexibility of database connections."},s=void 0,c={},d=[{value:"How to Implement Database Account Password Encryption in Configuration Files",id:"how-to-implement-database-account-password-encryption-in-configuration-files",level:2}];function l(e){let n={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"how-to-implement-database-account-password-encryption-in-configuration-files",children:"How to Implement Database Account Password Encryption in Configuration Files"}),"\n",(0,i.jsxs)(n.p,{children:["In certain scenarios, database account passwords cannot be configured in plaintext within configuration files and must be encrypted. During the database connection, the encrypted fields in the configuration file need to be decrypted. This requirement can be achieved by customizing a ",(0,i.jsx)(n.code,{children:"Driver"})," (for detailed information about ",(0,i.jsx)(n.code,{children:"Driver"}),", please refer to the chapter: ",(0,i.jsx)(n.a,{href:"/en/docs/core/gdb-interface",children:"ORM - Interface"}),"). Taking ",(0,i.jsx)(n.code,{children:"mysql"})," as an example, we can write our own ",(0,i.jsx)(n.code,{children:"Driver"}),", wrap the ",(0,i.jsx)(n.code,{children:"mysql driver"})," from the framework community components, and override its ",(0,i.jsx)(n.code,{children:"Open"})," method. Code example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'import (\n    "database/sql"\n\n    "github.com/gogf/gf/contrib/drivers/mysql/v2"\n    "github.com/gogf/gf/v2/database/gdb"\n)\n\ntype MyBizDriver struct {\n    mysql.Driver\n}\n\n// Open creates and returns an underlying sql.DB object for mysql.\n// Note that it converts time.Time argument to local timezone in default.\nfunc (d *MyBizDriver) Open(config *gdb.ConfigNode) (db *sql.DB, err error) {\n    config.User = d.decode(config.User)\n    config.Pass = d.decode(config.Pass)\n    return d.Driver.Open(config)\n}\n\nfunc (d *MyBizDriver) decode(s string) string {\n    // Execute field decryption logic\n    // ...\n    return s\n}\n'})})]})}function f(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return s},a:function(){return a}});var o=t(667294);let i={},r=o.createContext(i);function a(e){let n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);