"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["50578"],{60238(e,s,n){n.r(s),n.d(s,{metadata:()=>i,default:()=>m,frontMatter:()=>d,contentTitle:()=>c,toc:()=>l,assets:()=>a});var i=JSON.parse('{"id":"docs/WEB\u670D\u52A1\u5F00\u53D1/Session/Session","title":"Session","description":"The Session management features in the GoFrame framework, including the basic concepts of Session, the implementation of the gsession module, and its applications in different scenarios. The document discusses in detail the methods of SessionId transmission, initialization, destruction, and provides four common Session storage implementations and their characteristics, offering a rich set of tools for developers in Session management in HTTP and other service environments.","source":"@site/i18n/en/docusaurus-plugin-content-docs/version-2.8.x/docs/WEB\u670D\u52A1\u5F00\u53D1/Session/Session.md","sourceDirName":"docs/WEB\u670D\u52A1\u5F00\u53D1/Session","slug":"/docs/web/session","permalink":"/en/2.8.x/docs/web/session","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/versioned_docs/version-2.8.x/docs/WEB\u670D\u52A1\u5F00\u53D1/Session/Session.md","tags":[],"version":"2.8.x","lastUpdatedBy":"John Guo","lastUpdatedAt":1742194305000,"sidebarPosition":7,"frontMatter":{"slug":"/docs/web/session","title":"Session","sidebar_position":7,"hide_title":true,"keywords":["GoFrame","GoFrame framework","Session management","gsession","HTTP service","SessionId","Concurrency safety","ghttp.Request","gsession module","Session storage"],"description":"The Session management features in the GoFrame framework, including the basic concepts of Session, the implementation of the gsession module, and its applications in different scenarios. The document discusses in detail the methods of SessionId transmission, initialization, destruction, and provides four common Session storage implementations and their characteristics, offering a rich set of tools for developers in Session management in HTTP and other service environments."},"sidebar":"mainSidebar","previous":{"title":"Cookie","permalink":"/en/2.8.x/docs/web/cookie"},"next":{"title":"Session - File","permalink":"/en/2.8.x/docs/web/session-file"}}'),o=n(474848),t=n(28453),r=n(711654);let d={slug:"/docs/web/session",title:"Session",sidebar_position:7,hide_title:!0,keywords:["GoFrame","GoFrame framework","Session management","gsession","HTTP service","SessionId","Concurrency safety","ghttp.Request","gsession module","Session storage"],description:"The Session management features in the GoFrame framework, including the basic concepts of Session, the implementation of the gsession module, and its applications in different scenarios. The document discusses in detail the methods of SessionId transmission, initialization, destruction, and provides four common Session storage implementations and their characteristics, offering a rich set of tools for developers in Session management in HTTP and other service environments."},c,a={},l=[{value:"Introduction",id:"introduction",level:2},{value:"<code>gsession</code> Module",id:"gsession-module",level:2},{value:"Storage Implementations",id:"storage-implementations",level:2},{value:"Initialization of <code>Session</code>",id:"initialization-of-session",level:2},{value:"Destruction/Logout of <code>Session</code>",id:"destructionlogout-of-session",level:2},{value:"Documentation",id:"documentation",level:2}];function h(e){let s={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"GoFrame"})," framework provides comprehensive ",(0,o.jsx)(s.code,{children:"Session"})," management capabilities, implemented by the ",(0,o.jsx)(s.code,{children:"gsession"})," component. Since the ",(0,o.jsx)(s.code,{children:"Session"})," mechanism is most commonly used in ",(0,o.jsx)(s.code,{children:"HTTP"})," services, the subsequent chapters will focus on the use of ",(0,o.jsx)(s.code,{children:"Session"})," in the context of ",(0,o.jsx)(s.code,{children:"HTTP"})," services."]}),"\n",(0,o.jsx)(s.h2,{id:"introduction",children:"Introduction"}),"\n",(0,o.jsxs)(s.p,{children:["API Documentation: ",(0,o.jsx)(s.a,{href:"https://pkg.go.dev/github.com/gogf/gf/v2/os/gsession",children:"https://pkg.go.dev/github.com/gogf/gf/v2/os/gsession"})]}),"\n",(0,o.jsxs)(s.p,{children:["You can obtain a ",(0,o.jsx)(s.code,{children:"Session"})," object at any time through ",(0,o.jsx)(s.code,{children:"ghttp.Request"})," since both ",(0,o.jsx)(s.code,{children:"Cookie"})," and ",(0,o.jsx)(s.code,{children:"Session"})," are related to request sessions and thus are part of the ",(0,o.jsx)(s.code,{children:"Request"})," member objects and are publicly accessible. The default expiration time for ",(0,o.jsx)(s.code,{children:"Session"})," in the ",(0,o.jsx)(s.code,{children:"GoFrame"})," framework is ",(0,o.jsx)(s.code,{children:"24 hours"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"SessionId"})," is transmitted by default through ",(0,o.jsx)(s.code,{children:"Cookie"}),", but it also supports transmission via ",(0,o.jsx)(s.code,{children:"Header"})," from the client. The identification name of ",(0,o.jsx)(s.code,{children:"SessionId"})," can be modified through the ",(0,o.jsx)(s.code,{children:"SetSessionIdName"})," of ",(0,o.jsx)(s.code,{children:"ghttp.Server"}),". The operations of ",(0,o.jsx)(s.code,{children:"Session"})," are concurrency-safe, which is why the framework does not operate data directly in a ",(0,o.jsx)(s.code,{children:"map"})," form in its ",(0,o.jsx)(s.code,{children:"Session"})," design. During the ",(0,o.jsx)(s.code,{children:"HTTP"})," request flow, we can obtain the ",(0,o.jsx)(s.code,{children:"Session"})," object through the ",(0,o.jsx)(s.code,{children:"ghttp.Request"})," object and perform the corresponding data operations."]}),"\n",(0,o.jsxs)(s.p,{children:["In addition, the ",(0,o.jsx)(s.code,{children:"SessionId"})," in ",(0,o.jsx)(s.code,{children:"ghttp.Server"})," is generated using the client's ",(0,o.jsx)(s.code,{children:"RemoteAddr + Header"})," request information via the ",(0,o.jsx)(s.code,{children:"guid"})," module, ensuring randomness and uniqueness: ",(0,o.jsx)(s.a,{href:"https://github.com/gogf/gf/blob/master/net/ghttp/ghttp_request.go",children:"https://github.com/gogf/gf/blob/master/net/ghttp/ghttp_request.go"})]}),"\n",(0,o.jsxs)(s.h2,{id:"gsession-module",children:[(0,o.jsx)(s.code,{children:"gsession"})," Module"]}),"\n",(0,o.jsxs)(s.p,{children:["The management functionality of ",(0,o.jsx)(s.code,{children:"Session"})," is implemented by the independent ",(0,o.jsx)(s.code,{children:"gsession"})," module and is perfectly integrated into ",(0,o.jsx)(s.code,{children:"ghttp.Server"}),". Since this module is decoupled and independent, it can be applied to more different scenarios, such as ",(0,o.jsx)(s.code,{children:"TCP"})," communication, ",(0,o.jsx)(s.code,{children:"gRPC"})," API services, etc. The ",(0,o.jsx)(s.code,{children:"gsession"})," module has three important objects/APIs:"]}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"gsession.Manager"}),": Manages ",(0,o.jsx)(s.code,{children:"Session"})," objects, ",(0,o.jsx)(s.code,{children:"Storage"})," persistence storage objects, and expiration time control."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"gsession.Session"}),": A single ",(0,o.jsx)(s.code,{children:"Session"})," management object, used for CRUD operations on ",(0,o.jsx)(s.code,{children:"Session"})," parameters and other data management operations."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"gsession.Storage"}),": This is an API definition used for the persistent storage of ",(0,o.jsx)(s.code,{children:"Session"})," objects, data writing/reading, and survival updates. Developers can implement customized persistent storage features based on this API. For the API definition, see: ",(0,o.jsx)(s.a,{href:"https://github.com/gogf/gf/blob/master/os/gsession/gsession_storage.go",children:"https://github.com/gogf/gf/blob/master/os/gsession/gsession_storage.go"})]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"storage-implementations",children:"Storage Implementations"}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.code,{children:"gsession"})," implements and provides developers with four common ",(0,o.jsx)(s.code,{children:"Session"})," storage implementations:"]}),"\n",(0,o.jsxs)(s.table,{children:[(0,o.jsx)(s.thead,{children:(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.th,{children:"Storage"}),(0,o.jsx)(s.th,{children:"Distributed Support"}),(0,o.jsx)(s.th,{children:"Persistence Support"}),(0,o.jsx)(s.th,{children:"Memory Usage"}),(0,o.jsx)(s.th,{children:"Execution Efficiency"}),(0,o.jsx)(s.th,{children:"Brief Introduction"})]})}),(0,o.jsxs)(s.tbody,{children:[(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:(0,o.jsx)(s.code,{children:"StorageFile"})}),(0,o.jsx)(s.td,{children:"No"}),(0,o.jsx)(s.td,{children:"Yes"}),(0,o.jsx)(s.td,{children:"Medium"}),(0,o.jsx)(s.td,{children:"Medium"}),(0,o.jsxs)(s.td,{children:["Based on file storage (default). A more efficient persistent storage method under single-node deployment: ",(0,o.jsx)(s.a,{href:"/en/2.8.x/docs/web/session-file",children:"Session - File"})]})]}),(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:(0,o.jsx)(s.code,{children:"StorageMemory"})}),(0,o.jsx)(s.td,{children:"No"}),(0,o.jsx)(s.td,{children:"No"}),(0,o.jsx)(s.td,{children:"High"}),(0,o.jsx)(s.td,{children:"High"}),(0,o.jsxs)(s.td,{children:["Based on pure memory storage. Single-node deployment, highest performance, but cannot be persisted, and is lost on restart: ",(0,o.jsx)(s.a,{href:"/en/2.8.x/docs/web/session-memory",children:"Session - Memory"})]})]}),(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:(0,o.jsx)(s.code,{children:"StorageRedis"})}),(0,o.jsx)(s.td,{children:"Yes"}),(0,o.jsx)(s.td,{children:"Yes"}),(0,o.jsx)(s.td,{children:"Medium"}),(0,o.jsx)(s.td,{children:"Medium"}),(0,o.jsxs)(s.td,{children:["Based on ",(0,o.jsx)(s.code,{children:"Redis"})," storage (",(0,o.jsx)(s.code,{children:"Key-Value"}),"). Remote ",(0,o.jsx)(s.code,{children:"Redis"})," node stores ",(0,o.jsx)(s.code,{children:"Session"})," data, supporting multi-node deployment: ",(0,o.jsx)(s.a,{href:"/en/2.8.x/docs/web/session-redis-key-value",children:"Session - Redis-KeyValue"})]})]}),(0,o.jsxs)(s.tr,{children:[(0,o.jsx)(s.td,{children:(0,o.jsx)(s.code,{children:"StorageRedisHashTable"})}),(0,o.jsx)(s.td,{children:"Yes"}),(0,o.jsx)(s.td,{children:"Yes"}),(0,o.jsx)(s.td,{children:"Low"}),(0,o.jsx)(s.td,{children:"Low"}),(0,o.jsxs)(s.td,{children:["Based on ",(0,o.jsx)(s.code,{children:"Redis"})," storage (",(0,o.jsx)(s.code,{children:"HashTable"}),"). Remote ",(0,o.jsx)(s.code,{children:"Redis"})," node stores ",(0,o.jsx)(s.code,{children:"Session"})," data, supporting multi-node deployment: ",(0,o.jsx)(s.a,{href:"/en/2.8.x/docs/web/session-redis-hash-table",children:"Session - Redis-HashTable"})]})]})]})]}),"\n",(0,o.jsx)(s.p,{children:"Each method has its advantages and disadvantages. For detailed introductions, please refer to the corresponding sections."}),"\n",(0,o.jsxs)(s.h2,{id:"initialization-of-session",children:["Initialization of ",(0,o.jsx)(s.code,{children:"Session"})]}),"\n",(0,o.jsxs)(s.p,{children:["Taking a common HTTP request as an example, the ",(0,o.jsx)(s.code,{children:"Session"})," object in ",(0,o.jsx)(s.code,{children:"ghttp.Request"}),' adopts a "',(0,o.jsx)(s.strong,{children:"Lazy Initialization"}),'" design approach. By default, there is a ',(0,o.jsx)(s.code,{children:"Session"})," property object in the ",(0,o.jsx)(s.code,{children:"Request"}),", but it is not initialized (an empty object). The initialization is only executed when methods of the ",(0,o.jsx)(s.code,{children:"Session"})," property object are used. This design ensures that the execution performance of requests not utilizing the ",(0,o.jsx)(s.code,{children:"Session"})," feature is maintained, while also ensuring the ease of use of the component."]}),"\n",(0,o.jsxs)(s.h2,{id:"destructionlogout-of-session",children:["Destruction/Logout of ",(0,o.jsx)(s.code,{children:"Session"})]}),"\n",(0,o.jsxs)(s.p,{children:["When a user's ",(0,o.jsx)(s.code,{children:"Session"})," is no longer needed, for instance, when a user logs out, the session needs to be hard-deleted from storage. This can be done by calling the ",(0,o.jsx)(s.code,{children:"RemoveAll"})," method."]}),"\n",(0,o.jsx)(s.h2,{id:"documentation",children:"Documentation"}),"\n","\n",(0,o.jsx)(r.A,{})]})}function m(e={}){let{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},711654(e,s,n){n.d(s,{A:()=>f});var i=n(474848);n(296540);var o=n(634164),t=n(259829),r=n(525863),d=n(484792),c=n(433605),a=n(233553),l=n(761190);function h({href:e,children:s}){return(0,i.jsx)(r.A,{href:e,className:(0,o.A)("card padding--lg","cardContainer_fWXF"),children:s})}function m({href:e,icon:s,title:n,description:t}){return(0,i.jsxs)(h,{href:e,children:[(0,i.jsxs)(l.A,{as:"h2",className:(0,o.A)("text--truncate","cardTitle_rnsV"),title:n,children:[s," ",n]}),t&&(0,i.jsx)("p",{className:(0,o.A)("text--truncate","cardDescription_PWke"),title:t,children:t})]})}function u({item:e}){let s=(0,t.Nr)(e),n=function(){let{selectMessage:e}=(0,d.W)();return s=>e(s,(0,a.T)({message:"1 item|{count} items",id:"theme.docs.DocCard.categoryDescription.plurals",description:"The default description for a category card in the generated index about how many items this category includes"},{count:s}))}();return s?(0,i.jsx)(m,{href:s,icon:"\u{1F5C3}\uFE0F",title:e.label,description:e.description??n(e.items.length)}):null}function g({item:e}){let s=(0,c.A)(e.href)?"\u{1F4C4}\uFE0F":"\u{1F517}",n=(0,t.cC)(e.docId??void 0);return(0,i.jsx)(m,{href:e.href,icon:s,title:e.label,description:e.description??n?.description})}function x({item:e}){switch(e.type){case"link":return(0,i.jsx)(g,{item:e});case"category":return(0,i.jsx)(u,{item:e});default:throw Error(`unknown item type ${JSON.stringify(e)}`)}}function p({className:e}){let s=(0,t.$S)();return(0,i.jsx)(f,{items:s.items,className:e})}function f(e){let{items:s,className:n}=e;if(!s)return(0,i.jsx)(p,{...e});let r=(0,t.d1)(s);return(0,i.jsx)("section",{className:(0,o.A)("row",n),children:r.map((e,s)=>(0,i.jsx)("article",{className:"col col--6 margin-bottom--lg",children:(0,i.jsx)(x,{item:e})},s))})}},484792(e,s,n){n.d(s,{W:()=>c});var i=n(296540),o=n(719087);let t=["zero","one","two","few","many","other"];function r(e){return t.filter(s=>e.includes(s))}let d={locale:"en",pluralForms:r(["one","other"]),select:e=>1===e?"one":"other"};function c(){let e=function(){let{i18n:{currentLocale:e}}=(0,o.A)();return(0,i.useMemo)(()=>{try{let s;return s=new Intl.PluralRules(e),{locale:e,pluralForms:r(s.resolvedOptions().pluralCategories),select:e=>s.select(e)}}catch(s){return console.error(`Failed to use Intl.PluralRules for locale "${e}".
Docusaurus will fallback to the default (English) implementation.
Error: ${s.message}
`),d}},[e])}();return{selectMessage:(s,n)=>(function(e,s,n){let i=e.split("|");if(1===i.length)return i[0];i.length>n.pluralForms.length&&console.error(`For locale=${n.locale}, a maximum of ${n.pluralForms.length} plural forms are expected (${n.pluralForms.join(",")}), but the message contains ${i.length}: ${e}`);let o=n.select(s);return i[Math.min(n.pluralForms.indexOf(o),i.length-1)]})(n,s,e)}}},28453(e,s,n){n.d(s,{R:()=>r,x:()=>d});var i=n(296540);let o={},t=i.createContext(o);function r(e){let s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);