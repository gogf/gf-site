"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["27866"],{309176:function(i,e,t){t.r(e),t.d(e,{metadata:()=>n,contentTitle:()=>r,default:()=>h,assets:()=>l,toc:()=>c,frontMatter:()=>s});var n=JSON.parse('{"id":"docs/\u6846\u67B6\u8BBE\u8BA1/\u9690\u5F0F\u4E0E\u663E\u5F0F\u521D\u59CB\u5316","title":"Implicit and Explicit Init","description":"Initialization operations that need to be performed when the program starts, including implicit and explicit initialization in the GoFrame framework. Implicit initialization is implemented through the package\'s init method, but may cause the program to fail to start. It is recommended to call for complex initialization explicitly. Explicit initialization is preferable in business development to ensure maintainability of the program.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u6846\u67B6\u8BBE\u8BA1/\u9690\u5F0F\u4E0E\u663E\u5F0F\u521D\u59CB\u5316.md","sourceDirName":"docs/\u6846\u67B6\u8BBE\u8BA1","slug":"/docs/design/initialization","permalink":"/en/docs/design/initialization","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u6846\u67B6\u8BBE\u8BA1/\u9690\u5F0F\u4E0E\u663E\u5F0F\u521D\u59CB\u5316.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732433987000,"sidebarPosition":7,"frontMatter":{"slug":"/docs/design/initialization","title":"Implicit and Explicit Init","sidebar_position":7,"hide_title":true,"keywords":["GoFrame","GoFrame Framework","Implicit Initialization","Explicit Initialization","Golang","Server Configuration","Database Configuration","Module Initialization","Error Localization","Initialization Logic"],"description":"Initialization operations that need to be performed when the program starts, including implicit and explicit initialization in the GoFrame framework. Implicit initialization is implemented through the package\'s init method, but may cause the program to fail to start. It is recommended to call for complex initialization explicitly. Explicit initialization is preferable in business development to ensure maintainability of the program."},"sidebar":"mainSidebar","previous":{"title":"Interface and Generic","permalink":"/en/docs/design/interface-generic"},"next":{"title":"Golang Enums","permalink":"/en/docs/design/enums"}}'),o=t("785893"),a=t("250065");let s={slug:"/docs/design/initialization",title:"Implicit and Explicit Init",sidebar_position:7,hide_title:!0,keywords:["GoFrame","GoFrame Framework","Implicit Initialization","Explicit Initialization","Golang","Server Configuration","Database Configuration","Module Initialization","Error Localization","Initialization Logic"],description:"Initialization operations that need to be performed when the program starts, including implicit and explicit initialization in the GoFrame framework. Implicit initialization is implemented through the package's init method, but may cause the program to fail to start. It is recommended to call for complex initialization explicitly. Explicit initialization is preferable in business development to ensure maintainability of the program."},r=void 0,l={},c=[{value:"1. Implicit Initialization",id:"1-implicit-initialization",level:2},{value:"2. Explicit Initialization",id:"2-explicit-initialization",level:2},{value:"3. How to Choose",id:"3-how-to-choose",level:2}];function d(i){let e={admonition:"admonition",code:"code",h2:"h2",img:"img",p:"p",strong:"strong",...(0,a.a)(),...i.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(e.p,{children:['We know that some "initialization" logical operations need to be executed when the program starts, such as: ',(0,o.jsx)(e.code,{children:"Server"})," configuration, various database (",(0,o.jsx)(e.code,{children:"MySQL"}),", ",(0,o.jsx)(e.code,{children:"Redis"}),", ",(0,o.jsx)(e.code,{children:"Kafka"}),", etc.) configurations, business object configurations, etc. In most scenarios, we have two initialization methods: implicit initialization and explicit initialization."]}),"\n",(0,o.jsx)(e.h2,{id:"1-implicit-initialization",children:"1. Implicit Initialization"}),"\n",(0,o.jsx)(e.admonition,{type:"warning",children:(0,o.jsxs)(e.p,{children:["Special Note: In ",(0,o.jsx)(e.code,{children:"Golang v1.21"})," and later versions, the execution order of the ",(0,o.jsx)(e.code,{children:"init"})," initialization has changed and may cause problems for packages that rely on ",(0,o.jsx)(e.code,{children:"init"})," to execute initialization logic. Therefore, it is not recommended to execute ",(0,o.jsx)(e.strong,{children:"complex initialization logic"})," in ",(0,o.jsx)(e.code,{children:"init"}),". ",(0,o.jsx)(e.strong,{children:"It is recommended to implement complex module initialization logic through explicit invocation."})]})}),"\n",(0,o.jsxs)(e.p,{children:["Implicit initialization is generally executed through the package initialization method ",(0,o.jsx)(e.code,{children:"init"}),". It should be noted that if there is a possibility of errors in the initialization logic, since errors in the ",(0,o.jsx)(e.code,{children:"init"})," method cannot be caught by the upper layer, if initialization fails, the program startup is often directly terminated. For example:"]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{src:t(510169).Z+"",width:"2880",height:"1646"})}),"\n",(0,o.jsx)(e.p,{children:"When implicit initialization fails, it often directly terminates the program startup."}),"\n",(0,o.jsx)(e.p,{children:"The advantage of implicit initialization is that it does not require manually calling the initialization method, hiding initialization details from developers, and thus developers have no cognitive burden. However, the downside is also the same: developers do not know the initialization details, so once an error occurs, it is difficult to quickly pinpoint the cause. Therefore, when using implicit initialization, it is often required to print detailed errors and stack information when initialization errors occur to facilitate error localization."}),"\n",(0,o.jsxs)(e.p,{children:["Many modules in the ",(0,o.jsx)(e.code,{children:"GoFrame"})," framework use implicit initialization to hide module initialization details and reduce developers' cognitive burden. For example:"]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{src:t(415588).Z+"",width:"2880",height:"1646"})}),"\n",(0,o.jsxs)(e.p,{children:["Implicit initialization design is common in modules of ",(0,o.jsx)(e.code,{children:"GoFrame"}),"."]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{src:t(493720).Z+"",width:"3072",height:"1764"})}),"\n",(0,o.jsxs)(e.p,{children:["The ",(0,o.jsx)(e.code,{children:"main"})," package using the ",(0,o.jsx)(e.code,{children:"GoFrame"})," framework implicitly ",(0,o.jsx)(e.code,{children:"imports"}),"."]}),"\n",(0,o.jsxs)(e.p,{children:["The initialization process of the package's ",(0,o.jsx)(e.code,{children:"init"})," method:"]}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{src:t(978441).Z+"",width:"2166",height:"948"})}),"\n",(0,o.jsx)(e.h2,{id:"2-explicit-initialization",children:"2. Explicit Initialization"}),"\n",(0,o.jsxs)(e.p,{children:["Explicit initialization requires the developer to call specific methods to perform initialization operations when the program starts, such as in the ",(0,o.jsx)(e.code,{children:"main"})," or ",(0,o.jsx)(e.code,{children:"boot"})," module. Generally speaking, the initialization of basic components tends to use implicit initialization more, because users do not care about the initialization logic of underlying basic modules, while the initialization of business modules is mostly done using explicit initialization. For example:"]}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.img,{src:t(251170).Z+"",width:"2880",height:"1646"})," Explicit initialization executed sequentially in the ",(0,o.jsx)(e.code,{children:"boot"})," package."]}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.img,{src:t(581143).Z+"",width:"2880",height:"1646"})," In the ",(0,o.jsx)(e.code,{children:"main"})," package, the ",(0,o.jsx)(e.code,{children:"boot.Boot()"})," method is called to execute initialization."]}),"\n",(0,o.jsx)(e.h2,{id:"3-how-to-choose",children:"3. How to Choose"}),"\n",(0,o.jsxs)(e.p,{children:["In business scenarios, unless specially necessary, we recommend using ",(0,o.jsx)(e.strong,{children:"explicit initialization"})," to ensure better maintainability."]})]})}function h(i={}){let{wrapper:e}={...(0,a.a)(),...i.components};return e?(0,o.jsx)(e,{...i,children:(0,o.jsx)(d,{...i})}):d(i)}},251170:function(i,e,t){t.d(e,{Z:function(){return n}});let n=t.p+"assets/images/0124c249f03cd1f9fd78fe0970ffbda6-241d14f0a8db591cea05bc6d5329544a.png"},978441:function(i,e,t){t.d(e,{Z:function(){return n}});let n=t.p+"assets/images/40b3b7c2b75dcb36be348c840ca0eb3e-a3d6ae889acbf11171d2f637a0778f94.png"},581143:function(i,e,t){t.d(e,{Z:function(){return n}});let n=t.p+"assets/images/8417caae0e203d44d43c6bca369b3023-8ec6bf1660f960c0ddf5a615b2a00570.png"},510169:function(i,e,t){t.d(e,{Z:function(){return n}});let n=t.p+"assets/images/9190e5a8e2acf34a70442c6814a52327-0a3885ec217a5784bfe25e400e9ee9e5.png"},493720:function(i,e,t){t.d(e,{Z:function(){return n}});let n=t.p+"assets/images/b0b839a86595ee57f2c5a1b39c559df0-ebe01b0730cac6e1474a31c3cd8fb4d9.png"},415588:function(i,e,t){t.d(e,{Z:function(){return n}});let n=t.p+"assets/images/d019031d40a93f6318a933271d63c503-707bd17a2482aac25e2b7d6f0b4da59c.png"},250065:function(i,e,t){t.d(e,{Z:function(){return r},a:function(){return s}});var n=t(667294);let o={},a=n.createContext(o);function s(i){let e=n.useContext(a);return n.useMemo(function(){return"function"==typeof i?i(e):{...e,...i}},[e,i])}function r(i){let e;return e=i.disableParentContext?"function"==typeof i.components?i.components(o):i.components||o:s(i.components),n.createElement(a.Provider,{value:e},i.children)}}}]);