"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["450975"],{4967:function(e,n,s){s.r(n),s.d(n,{metadata:()=>a,contentTitle:()=>r,default:()=>p,assets:()=>o,toc:()=>l,frontMatter:()=>d});var a=JSON.parse('{"id":"examples/database/encoded-pass/encoded-pass","title":"Encoded Password Database Connection","description":"A demonstration of using encrypted database passwords with GoFrame","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/examples/database/encoded-pass/encoded-pass.md","sourceDirName":"examples/database/encoded-pass","slug":"/examples/database/encoded-pass","permalink":"/en/examples/database/encoded-pass","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/examples/database/encoded-pass/encoded-pass.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1749123875000,"frontMatter":{"title":"Encoded Password Database Connection","slug":"/examples/database/encoded-pass","keywords":["database","security","encoded password","encryption","goframe"],"description":"A demonstration of using encrypted database passwords with GoFrame","hide_title":true},"sidebar":"examplesSidebar","previous":{"title":"Database","permalink":"/en/examples/database"},"next":{"title":"HTTP Server","permalink":"/en/examples/httpserver"}}'),t=s("785893"),i=s("250065");let d={title:"Encoded Password Database Connection",slug:"/examples/database/encoded-pass",keywords:["database","security","encoded password","encryption","goframe"],description:"A demonstration of using encrypted database passwords with GoFrame",hide_title:!0},r="Encoded Password Database Connection",o={},l=[{value:"Description",id:"description",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Structure",id:"structure",level:2},{value:"Features",id:"features",level:2},{value:"Setup",id:"setup",level:2},{value:"Password Encryption",id:"password-encryption",level:2},{value:"Implementation Details",id:"implementation-details",level:2},{value:"Notes",id:"notes",level:2}];function c(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"encoded-password-database-connection",children:"Encoded Password Database Connection"})}),"\n",(0,t.jsxs)(n.p,{children:["Github Source: ",(0,t.jsx)(n.a,{href:"https://github.com/gogf/examples/tree/main/database/encoded-pass",children:"https://github.com/gogf/examples/tree/main/database/encoded-pass"})]}),"\n",(0,t.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,t.jsx)(n.p,{children:"This example demonstrates how to implement a custom database driver in GoFrame that can handle encrypted database passwords. The implementation allows you to store encrypted passwords in your configuration files, which are automatically decrypted when establishing database connections."}),"\n",(0,t.jsx)(n.p,{children:"The example uses AES encryption combined with Base64 encoding to secure the database password, providing an additional layer of security for your application's database credentials."}),"\n",(0,t.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://golang.org/dl/",children:"Go"})," ",(0,t.jsx)(n.code,{children:"1.18"})," or higher"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://git-scm.com/downloads",children:"Git"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://goframe.org",children:"GoFrame"})}),"\n",(0,t.jsx)(n.li,{children:"MySQL database"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"structure",children:"Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:".\n\u251C\u2500\u2500 config.yaml           # Configuration file with encrypted database password\n\u251C\u2500\u2500 dbdriver/             # Custom database driver implementation\n\u2502   \u251C\u2500\u2500 dbdriver.go       # Custom MySQL driver with password decryption\n\u2502   \u2514\u2500\u2500 dbdriver_test.go  # Test for password encryption/decryption\n\u251C\u2500\u2500 go.mod                # Go module file\n\u251C\u2500\u2500 go.sum                # Go module checksums\n\u2514\u2500\u2500 main.go               # Main application entry point\n"})}),"\n",(0,t.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Custom database driver implementation"}),"\n",(0,t.jsx)(n.li,{children:"Password encryption using AES-CBC"}),"\n",(0,t.jsx)(n.li,{children:"Base64 encoding for binary data handling"}),"\n",(0,t.jsx)(n.li,{children:"Seamless integration with GoFrame's database operations"}),"\n",(0,t.jsx)(n.li,{children:"Secure storage of database credentials"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Clone the repository:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/gogf/examples.git\ncd examples/database/encoded-pass\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Install the dependencies:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"go mod tidy\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Set up a MySQL database:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=12345678 -e MYSQL_DATABASE=test -d mysql:8.0\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Update the configuration file with your encrypted database password (see the Password Encryption section below)."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Run the application:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"go run main.go\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"password-encryption",children:"Password Encryption"}),"\n",(0,t.jsx)(n.p,{children:"To encrypt your database password:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Run the test function which demonstrates the encryption process:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd dbdriver\ngo test -v -run Test_Encode\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"The test will output:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Original password"}),"\n",(0,t.jsx)(n.li,{children:"Base64 encoded password"}),"\n",(0,t.jsx)(n.li,{children:"AES encrypted and Base64 encoded password (use this in your config.yaml)"}),"\n",(0,t.jsx)(n.li,{children:"Decrypted password (for verification)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Update the ",(0,t.jsx)(n.code,{children:"config.yaml"})," file with your encrypted password:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'database:\n  default:\n    link: "mysql:root:YOUR_ENCRYPTED_PASSWORD@tcp(127.0.0.1:3306)/test?loc=Local&parseTime=true"\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"implementation-details",children:"Implementation Details"}),"\n",(0,t.jsxs)(n.p,{children:["The custom database driver extends the standard MySQL driver provided by GoFrame and overrides the ",(0,t.jsx)(n.code,{children:"Open"})," method to handle password decryption:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"The encrypted password is extracted from the database connection string"}),"\n",(0,t.jsx)(n.li,{children:"The password is Base64 decoded to get the binary encrypted data"}),"\n",(0,t.jsx)(n.li,{children:"AES-CBC decryption is applied using a predefined encryption key"}),"\n",(0,t.jsx)(n.li,{children:"The decrypted data is Base64 decoded again to get the original password"}),"\n",(0,t.jsx)(n.li,{children:"The original password is used to establish the database connection"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The encryption key is hardcoded in this example (",(0,t.jsx)(n.code,{children:"encodeKey"}),"). In a production environment, you should use a secure method to manage this key."]}),"\n",(0,t.jsx)(n.li,{children:"This approach can be extended to encrypt other sensitive information in your configuration files."}),"\n",(0,t.jsx)(n.li,{children:"The example uses AES-CBC encryption, but you can modify it to use other encryption algorithms provided by GoFrame."}),"\n"]})]})}function p(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},250065:function(e,n,s){s.d(n,{Z:function(){return r},a:function(){return d}});var a=s(667294);let t={},i=a.createContext(t);function d(e){let n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);