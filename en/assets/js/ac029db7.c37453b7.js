"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["46551"],{825376:function(e,n,i){i.r(n),i.d(n,{metadata:()=>o,contentTitle:()=>s,default:()=>u,assets:()=>d,toc:()=>c,frontMatter:()=>r});var o=JSON.parse('{"id":"quick/\u9879\u76EE\u811A\u624B\u67B6/\u63A5\u53E3\u5F00\u53D1/Step6 - \u914D\u7F6E\u4E0E\u8DEF\u7531","title":"Step6 - Configuration","description":"Introduce MySQL database driver, with steps for adding database configuration and route registration. Detailed explanation of configurations in the scaffold project template, including tool configuration and business configuration, and how to modify configuration files.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/quick/\u9879\u76EE\u811A\u624B\u67B6/\u63A5\u53E3\u5F00\u53D1/Step6 - \u914D\u7F6E\u4E0E\u8DEF\u7531.md","sourceDirName":"quick/\u9879\u76EE\u811A\u624B\u67B6/\u63A5\u53E3\u5F00\u53D1","slug":"/quick/scaffold-api-config-and-route","permalink":"/en/quick/scaffold-api-config-and-route","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/quick/\u9879\u76EE\u811A\u624B\u67B6/\u63A5\u53E3\u5F00\u53D1/Step6 - \u914D\u7F6E\u4E0E\u8DEF\u7531.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732541616000,"sidebarPosition":6,"frontMatter":{"slug":"/quick/scaffold-api-config-and-route","title":"Step6 - Configuration","hide_title":true,"sidebar_position":6,"keywords":["GoFrame","GoFrame Framework","Database Driver","MySQL","Routing","Configuration","API","Server Configuration","Log Module","Business Module"],"description":"Introduce MySQL database driver, with steps for adding database configuration and route registration. Detailed explanation of configurations in the scaffold project template, including tool configuration and business configuration, and how to modify configuration files."},"sidebar":"quickSidebar","previous":{"title":"Step5 - Implement API Logic","permalink":"/en/quick/scaffold-api-implements"},"next":{"title":"Step7 - Run and Test","permalink":"/en/quick/scaffold-api-run-and-test"}}'),t=i("785893"),a=i("250065");let r={slug:"/quick/scaffold-api-config-and-route",title:"Step6 - Configuration",hide_title:!0,sidebar_position:6,keywords:["GoFrame","GoFrame Framework","Database Driver","MySQL","Routing","Configuration","API","Server Configuration","Log Module","Business Module"],description:"Introduce MySQL database driver, with steps for adding database configuration and route registration. Detailed explanation of configurations in the scaffold project template, including tool configuration and business configuration, and how to modify configuration files."},s=void 0,d={},c=[{value:"Import Database Driver",id:"import-database-driver",level:2},{value:"Database Configuration",id:"database-configuration",level:2},{value:"CLI Tool Configuration <code>hack/config.yaml</code>",id:"cli-tool-configuration-hackconfigyaml",level:3},{value:"Business Configuration <code>manifest/config/config.yaml</code>",id:"business-configuration-manifestconfigconfigyaml",level:3},{value:"Add Route Registration",id:"add-route-registration",level:2},{value:"Learning Summary",id:"learning-summary",level:2}];function l(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"import-database-driver",children:"Import Database Driver"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"GoFrame"})," database component uses an API-based design, separating API and implementation to provide better abstraction and extensibility. Here, we use the ",(0,t.jsx)(n.code,{children:"MySQL"})," database, so we need to import the specific ",(0,t.jsx)(n.code,{children:"MySQL"})," driver implementation. We can add ",(0,t.jsx)(n.code,{children:'_ "github.com/gogf/gf/contrib/drivers/mysql/v2"'})," in ",(0,t.jsx)(n.code,{children:"main.go"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Sample source code: ",(0,t.jsx)(n.a,{href:"https://github.com/gogf/quick-demo/blob/main/main.go",children:"https://github.com/gogf/quick-demo/blob/main/main.go"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",metastring:'title="main.go"',children:'package main\n\nimport (\n    _ "demo/internal/packed"\n\n    _ "github.com/gogf/gf/contrib/drivers/mysql/v2"\n\n    "github.com/gogf/gf/v2/os/gctx"\n\n    "demo/internal/cmd"\n)\n\nfunc main() {\n    cmd.Main.Run(gctx.GetInitCtx())\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["You only need to introduce the database driver once in the project; no further adjustments are needed later. For more support and detailed introduction on database drivers, please refer to the section ",(0,t.jsx)(n.a,{href:"/en/docs/core/gdb",children:"Database ORM\uD83D\uDD25"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"If you execute database operations without introducing the database driver, the Database ORM component will report the following error message:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:'cannot find database driver for specified database type "mysql", did you misspell type name "mysql" or forget importing the database driver? possible reference: https://github.com/gogf/gf/tree/master/contrib/drivers\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["In the scaffold project template ",(0,t.jsx)(n.code,{children:"main.go"}),", the ",(0,t.jsx)(n.code,{children:"import"})," statement contains ",(0,t.jsx)(n.code,{children:'_ "demo/internal/packed"'}),", indicating the resource management of the ",(0,t.jsx)(n.code,{children:"GoFrame"})," framework, which is an advanced feature. This feature allows any resource to be packaged into the binary file, so when publishing, only one binary file needs to be released. We do not use this feature here, so just understand it for now, and if you're interested, you can check out the relevant section in the development manual later."]})}),"\n",(0,t.jsx)(n.h2,{id:"database-configuration",children:"Database Configuration"}),"\n",(0,t.jsx)(n.p,{children:"There are mainly two configuration files in the scaffold project template."}),"\n",(0,t.jsxs)(n.h3,{id:"cli-tool-configuration-hackconfigyaml",children:["CLI Tool Configuration ",(0,t.jsx)(n.code,{children:"hack/config.yaml"})]}),"\n",(0,t.jsxs)(n.p,{children:["Introduced in previous sections, this configuration file is mainly used for local development. When the ",(0,t.jsx)(n.code,{children:"cli"})," scaffold tool executes, it will automatically read the configuration content in it."]}),"\n",(0,t.jsxs)(n.p,{children:["Sample source code: ",(0,t.jsx)(n.a,{href:"https://github.com/gogf/quick-demo/blob/main/hack/config.yaml",children:"https://github.com/gogf/quick-demo/blob/main/hack/config.yaml"})]}),"\n",(0,t.jsxs)(n.h3,{id:"business-configuration-manifestconfigconfigyaml",children:["Business Configuration ",(0,t.jsx)(n.code,{children:"manifest/config/config.yaml"})]}),"\n",(0,t.jsx)(n.p,{children:"Mainly maintains configuration information for business project components and business modules, entirely maintained by developers. This configuration file is read when the program starts. The default business configuration provided by the scaffold project template is as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="manifest/config/config.yaml"',children:'# https://goframe.org/docs/web/server-config-file-template\nserver:\n  address:     ":8000"\n  openapiPath: "/api.json"\n  swaggerPath: "/swagger"\n\n# https://goframe.org/docs/core/glog-config\nlogger:\n  level : "all"\n  stdout: true\n\n# https://goframe.org/docs/core/gdb-config-file\ndatabase:\n  default:\n    link: "mysql:root:12345678@tcp(127.0.0.1:3306)/test"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The default provides ",(0,t.jsx)(n.code,{children:"3"})," component configurations:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"server"}),": Configuration for the ",(0,t.jsx)(n.code,{children:"Web Server"}),". The default listening address is ",(0,t.jsx)(n.code,{children:":8000"}),", and the API documentation feature is enabled."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"logger"}),": Configuration for the default log component. The log level is set to output all logs, and all logs will be printed to standard output."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"database"}),": Configuration for the database component. This is just a template; we need to modify the connection address based on the actual situation."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Each component configuration has a reference link to the official documentation for configuration. Here, we need to modify the connection information in the database configuration to match the actual usable connection information. For detailed introduction on database configuration, please refer to the section: ",(0,t.jsx)(n.a,{href:"/en/docs/core/gdb-config-file",children:"ORM Configuration - File"})]}),"\n",(0,t.jsxs)(n.p,{children:["Sample source code: ",(0,t.jsx)(n.a,{href:"https://github.com/gogf/quick-demo/blob/main/manifest/config/config.yaml",children:"https://github.com/gogf/quick-demo/blob/main/manifest/config/config.yaml"})]}),"\n",(0,t.jsx)(n.h2,{id:"add-route-registration",children:"Add Route Registration"}),"\n",(0,t.jsxs)(n.p,{children:["Adding our newly filled ",(0,t.jsx)(n.code,{children:"API"})," to the route is very simple, as follows:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"goframe route registration",src:i(9542).Z+"",width:"3420",height:"2002"})}),"\n",(0,t.jsxs)(n.p,{children:["In the ",(0,t.jsx)(n.code,{children:"group.Bind"})," method of the grouped routes, you can add our route object through ",(0,t.jsx)(n.code,{children:"user.NewV1()"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Sample source code: ",(0,t.jsx)(n.a,{href:"https://github.com/gogf/quick-demo/blob/main/internal/cmd/cmd.go",children:"https://github.com/gogf/quick-demo/blob/main/internal/cmd/cmd.go"})]}),"\n",(0,t.jsx)(n.p,{children:"At this point, our API development is complete. The next step is to start the service and perform some API testing to see the effect."}),"\n",(0,t.jsx)(n.h2,{id:"learning-summary",children:"Learning Summary"}),"\n",(0,t.jsxs)(n.p,{children:["When we use database functionality, we need to introduce the specific database driver. The ",(0,t.jsx)(n.code,{children:"GoFrame"})," official repository provides driver implementations for commonly used databases in the form of community components. Our program mainly uses the business configuration, and we need to modify the database connection address within it to the address of the database we set up."]}),"\n",(0,t.jsxs)(n.p,{children:["Route registration is very simple; just add a ",(0,t.jsx)(n.code,{children:"controller"})," object to the group route registration through ",(0,t.jsx)(n.code,{children:"group.Bind"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["So far, we have completed the development of the ",(0,t.jsx)(n.code,{children:"CRUD"})," API. \uD83D\uDC4F\uD83D\uDC4F We mainly focused on the following tasks:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Database table design"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"API"})," API definition"]}),"\n",(0,t.jsx)(n.li,{children:"Implementation of API business logic"}),"\n",(0,t.jsx)(n.li,{children:"Simple configuration and route registration"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Next, let's start the program to see the effect."})]})}function u(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},9542:function(e,n,i){i.d(n,{Z:function(){return o}});let o=i.p+"assets/images/QQ_1731680426319-9a62c618b048b96f0bb8976f999b334b.png"},250065:function(e,n,i){i.d(n,{Z:function(){return s},a:function(){return r}});var o=i(667294);let t={},a=o.createContext(t);function r(e){let n=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);