"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["87673"],{378709(e,t,n){n.r(t),n.d(t,{metadata:()=>r,default:()=>u,frontMatter:()=>i,contentTitle:()=>c,toc:()=>l,assets:()=>a});var r=JSON.parse('{"id":"docs/WEB\u670D\u52A1\u5F00\u53D1/\u5E38\u89C1\u95EE\u9898","title":"FAQ","description":"Answer common questions about frequent context cancel errors on the server side when using the GoFrame framework. This error is usually caused by the client actively canceling the request. The article introduces a way to handle this issue through custom middleware, allowing the server to ignore client cancellations and continue execution.","source":"@site/i18n/en/docusaurus-plugin-content-docs/version-2.8.x/docs/WEB\u670D\u52A1\u5F00\u53D1/\u5E38\u89C1\u95EE\u9898.md","sourceDirName":"docs/WEB\u670D\u52A1\u5F00\u53D1","slug":"/docs/web/faq","permalink":"/en/2.8.x/docs/web/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/versioned_docs/version-2.8.x/docs/WEB\u670D\u52A1\u5F00\u53D1/\u5E38\u89C1\u95EE\u9898.md","tags":[],"version":"2.8.x","lastUpdatedBy":"John Guo","lastUpdatedAt":1742194305000,"sidebarPosition":13,"frontMatter":{"slug":"/docs/web/faq","title":"FAQ","sidebar_position":13,"hide_title":true,"keywords":["GoFrame","GoFrame framework","context cancel","Golang","http server","client request","middleware","NeverDoneCtx","custom middleware","error handling"],"description":"Answer common questions about frequent context cancel errors on the server side when using the GoFrame framework. This error is usually caused by the client actively canceling the request. The article introduces a way to handle this issue through custom middleware, allowing the server to ignore client cancellations and continue execution."},"sidebar":"mainSidebar","previous":{"title":"Performance","permalink":"/en/2.8.x/docs/web/performance"},"next":{"title":"Microservice Development","permalink":"/en/2.8.x/docs/micro-service"}}'),o=n(474848),s=n(28453);let i={slug:"/docs/web/faq",title:"FAQ",sidebar_position:13,hide_title:!0,keywords:["GoFrame","GoFrame framework","context cancel","Golang","http server","client request","middleware","NeverDoneCtx","custom middleware","error handling"],description:"Answer common questions about frequent context cancel errors on the server side when using the GoFrame framework. This error is usually caused by the client actively canceling the request. The article introduces a way to handle this issue through custom middleware, allowing the server to ignore client cancellations and continue execution."},c,a={},l=[{value:"Frequent <code>context cancel</code> Errors on the Server Side",id:"frequent-context-cancel-errors-on-the-server-side",level:2}];function d(e){let t={code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.h2,{id:"frequent-context-cancel-errors-on-the-server-side",children:["Frequent ",(0,o.jsx)(t.code,{children:"context cancel"})," Errors on the Server Side"]}),"\n",(0,o.jsxs)(t.p,{children:["When the ",(0,o.jsx)(t.strong,{children:"client actively cancels a request"})," (for example, actively cancels, or the request exceeds the time set by the client), especially when a browser visit directly cancels the request, the server may encounter a ",(0,o.jsx)(t.code,{children:"context canceled"})," error. This is a normal phenomenon, and the ",(0,o.jsx)(t.code,{children:"Golang"})," standard library's ",(0,o.jsx)(t.code,{children:"http server"})," is designed this way. When the client no longer needs the result of this request, it will cancel the request, and there is no point in the server continuing execution. If you mind this error, you can use a custom middleware to add handling logic for ",(0,o.jsx)(t.code,{children:"NeverDoneCtx"}),". In this case, the server will ignore the client's cancellation request and continue execution."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-go",children:"// MiddlewareNeverDoneCtx sets the context never done for current process.\nfunc MiddlewareNeverDoneCtx(r *Request) {\n    r.SetCtx(r.GetNeverDoneCtx())\n    r.Middleware.Next()\n}\n"})})]})}function u(e={}){let{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453(e,t,n){n.d(t,{R:()=>i,x:()=>c});var r=n(296540);let o={},s=r.createContext(o);function i(e){let t=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);