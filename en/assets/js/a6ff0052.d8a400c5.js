"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["18539"],{893917:function(e,a,n){n.r(a),n.d(a,{metadata:()=>t,contentTitle:()=>s,default:()=>u,assets:()=>d,toc:()=>l,frontMatter:()=>r});var t=JSON.parse('{"id":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C/\u6570\u636E\u6821\u9A8C-\u6821\u9A8C\u5BF9\u8C61","title":"Data Validation - Object","description":"Using the data validation component in the GoFrame framework for data validation, including configuration management and chained operations of the validation object. Detailed examples show single data validation, struct, and map data validation methods to help developers quickly master data validation techniques.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C/\u6570\u636E\u6821\u9A8C-\u6821\u9A8C\u5BF9\u8C61.md","sourceDirName":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C","slug":"/docs/core/gvalid-validator","permalink":"/en/docs/core/gvalid-validator","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u6821\u9A8C/\u6570\u636E\u6821\u9A8C-\u6821\u9A8C\u5BF9\u8C61.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1732541616000,"sidebarPosition":1,"frontMatter":{"slug":"/docs/core/gvalid-validator","title":"Data Validation - Object","sidebar_position":1,"hide_title":true,"keywords":["GoFrame","GoFrame Framework","Data Validation","Validator Object","Validator","Chained Operations","Internationalization","Custom Validation","Error Messages","Data Association"],"description":"Using the data validation component in the GoFrame framework for data validation, including configuration management and chained operations of the validation object. Detailed examples show single data validation, struct, and map data validation methods to help developers quickly master data validation techniques."},"sidebar":"mainSidebar","previous":{"title":"Data Validation - Rules","permalink":"/en/docs/core/gvalid-rules"},"next":{"title":"Data Validation - Result","permalink":"/en/docs/core/gvalid-result-handling"}}'),i=n("785893"),o=n("250065");let r={slug:"/docs/core/gvalid-validator",title:"Data Validation - Object",sidebar_position:1,hide_title:!0,keywords:["GoFrame","GoFrame Framework","Data Validation","Validator Object","Validator","Chained Operations","Internationalization","Custom Validation","Error Messages","Data Association"],description:"Using the data validation component in the GoFrame framework for data validation, including configuration management and chained operations of the validation object. Detailed examples show single data validation, struct, and map data validation methods to help developers quickly master data validation techniques."},s=void 0,d={},l=[{value:"Validator Object",id:"validator-object",level:2},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Single Data Validation",id:"single-data-validation",level:3},{value:"<code>Struct</code> Data Validation",id:"struct-data-validation",level:3},{value:"<code>Map</code> Data Validation",id:"map-data-validation",level:3}];function c(e){let a={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.h2,{id:"validator-object",children:"Validator Object"}),"\n",(0,i.jsx)(a.p,{children:"The data validation component provides a validator object for unified configuration management and convenient chained operations for data validation."}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"API Documentation"}),": ",(0,i.jsx)(a.a,{href:"https://pkg.go.dev/github.com/gogf/gf/v2/util/gvalid",children:"https://pkg.go.dev/github.com/gogf/gf/v2/util/gvalid"})]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-go",children:"type Validator\n    func New() *Validator\n    func (v *Validator) Assoc(assoc interface{}) *Validator\n    func (v *Validator) Bail() *Validator\n    func (v *Validator) Ci() *Validator\n    func (v *Validator) Clone() *Validator\n    func (v *Validator) Data(data interface{}) *Validator\n    func (v *Validator) I18n(i18nManager *gi18n.Manager) *Validator\n    func (v *Validator) Messages(messages interface{}) *Validator\n    func (v *Validator) RuleFunc(rule string, f RuleFunc) *Validator\n    func (v *Validator) RuleFuncMap(m map[string]RuleFunc) *Validator\n    func (v *Validator) Rules(rules interface{}) *Validator\n    func (v *Validator) Run(ctx context.Context) Error\n"})}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Brief Explanation:"})}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsxs)(a.li,{children:["The ",(0,i.jsx)(a.code,{children:"New"})," method is used to create a new validation object."]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"Assoc"})," is used for associating data validation; see subsequent sections for details."]}),"\n",(0,i.jsxs)(a.li,{children:["The ",(0,i.jsx)(a.code,{children:"Bail"})," method is used to set that validation stops immediately and returns an error result if any rule fails in multiple subsequent validations."]}),"\n",(0,i.jsxs)(a.li,{children:["The ",(0,i.jsx)(a.code,{children:"Ci"})," method is used for setting case-insensitive field names when comparing values."]}),"\n",(0,i.jsxs)(a.li,{children:["The ",(0,i.jsx)(a.code,{children:"Run"})," method performs validation operations on data given rules and messages."]}),"\n",(0,i.jsxs)(a.li,{children:["The ",(0,i.jsx)(a.code,{children:"I18n"})," method is used to set the ",(0,i.jsx)(a.code,{children:"I18N"})," internationalization component for the current validator object. By default, the validator component uses the framework's global default ",(0,i.jsx)(a.code,{children:"i18n"})," component object."]}),"\n",(0,i.jsxs)(a.li,{children:["The ",(0,i.jsx)(a.code,{children:"Data"})," method is used to pass the data set for joint validation, often ",(0,i.jsx)(a.code,{children:"map"})," type or ",(0,i.jsx)(a.code,{children:"struct"})," type."]}),"\n",(0,i.jsxs)(a.li,{children:["The ",(0,i.jsx)(a.code,{children:"Rules"})," method is used to pass custom validation rules for the current chained operation, often using ",(0,i.jsx)(a.code,{children:"[]string"})," type or ",(0,i.jsx)(a.code,{children:"map"})," type."]}),"\n",(0,i.jsxs)(a.li,{children:["The ",(0,i.jsx)(a.code,{children:"Messages"})," method is used to pass custom error messages for the current chained operation, often using ",(0,i.jsx)(a.code,{children:"map"})," type for passing; see subsequent code examples for details."]}),"\n"]}),"\n",(0,i.jsx)(a.admonition,{type:"tip",children:(0,i.jsxs)(a.p,{children:["Since the validator object is also a very commonly used object, the ",(0,i.jsx)(a.code,{children:"g"})," module defines the ",(0,i.jsx)(a.code,{children:"Validator"})," method for quickly creating validator objects. In most scenarios, we recommend using the ",(0,i.jsx)(a.code,{children:"g"})," module's ",(0,i.jsx)(a.code,{children:"g.Validator()"})," method to quickly create a validator object. For an introduction to the ",(0,i.jsx)(a.code,{children:"g"})," module, refer to the section: ",(0,i.jsx)(a.a,{href:"/en/docs/core/g",children:"Objects"})]})}),"\n",(0,i.jsx)(a.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,i.jsx)(a.h3,{id:"single-data-validation",children:"Single Data Validation"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-go",children:'var (\n    err error\n    ctx = gctx.New()\n)\nerr = g.Validator().\n    Rules("min:18").\n    Data(16).\n    Messages("Minors are not allowed to register").\n    Run(ctx)\nfmt.Println(err.Error())\n\n// Output:\n// Minors are not allowed to register\n'})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-go",children:'var (\n    err  error\n    ctx  = gctx.New()\n    data = g.Map{\n        "password": "123",\n    }\n)\n\nerr = g.Validator().Data("").Assoc(data).\n    Rules("required-with:password").\n    Messages("Please enter the confirmation password").\n    Run(ctx)\n\nfmt.Println(err.Error())\n'})}),"\n",(0,i.jsxs)(a.h3,{id:"struct-data-validation",children:[(0,i.jsx)(a.code,{children:"Struct"})," Data Validation"]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-go",children:'type User struct {\n    Name string `v:"required#Please enter the user name"`\n    Type int    `v:"required#Please select the user type"`\n}\nvar (\n    err  error\n    ctx  = gctx.New()\n    user = User{}\n    data = g.Map{\n        "name": "john",\n    }\n)\nif err = gconv.Scan(data, &user); err != nil {\n    panic(err)\n}\nerr = g.Validator().Assoc(data).Data(user).Run(ctx)\nif err != nil {\n    fmt.Println(err.(gvalid.Error).Items())\n}\n\n// Output:\n// [map[Type:map[required:Please select the user type]]]\n'})}),"\n",(0,i.jsxs)(a.h3,{id:"map-data-validation",children:[(0,i.jsx)(a.code,{children:"Map"})," Data Validation"]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-go",children:'params := map[string]interface{}{\n    "passport":  "",\n    "password":  "123456",\n    "password2": "1234567",\n}\nrules := map[string]string{\n    "passport":  "required|length:6,16",\n    "password":  "required|length:6,16|same:password2",\n    "password2": "required|length:6,16",\n}\nmessages := map[string]interface{}{\n    "passport": "Account cannot be empty|Account length should be between {min} and {max}",\n    "password": map[string]string{\n        "required": "Password cannot be empty",\n        "same":     "The passwords entered are not the same",\n    },\n}\nerr := g.Validator().Messages(messages).Rules(rules).Data(params).Run(gctx.New())\nif err != nil {\n    g.Dump(err.Maps())\n}\n'})}),"\n",(0,i.jsx)(a.p,{children:"After execution, the terminal output is:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{children:'{\n    "passport": {\n        "length": "Account length should be between 6 and 16",\n        "required": "Account cannot be empty"\n    },\n    "password": {\n        "same": "The passwords entered are not the same"\n    }\n}\n'})})]})}function u(e={}){let{wrapper:a}={...(0,o.a)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},250065:function(e,a,n){n.d(a,{Z:function(){return s},a:function(){return r}});var t=n(667294);let i={},o=t.createContext(i);function r(e){let a=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(o.Provider,{value:a},e.children)}}}]);