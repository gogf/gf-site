"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["81795"],{826083:function(e,n,s){s.r(n),s.d(n,{metadata:()=>i,contentTitle:()=>c,default:()=>h,assets:()=>a,toc:()=>l,frontMatter:()=>o});var i=JSON.parse('{"id":"community/\u793E\u533A\u6295\u7A3F/\u6253\u9020\u9AD8\u6027\u80FD\u5B9E\u65F6\u901A\u4FE1\uFF1AGo\u8BED\u8A00SSE\u5B9E\u73B0\u6307\u5357","title":"Building High-Performance Real-Time Communication: Go Language SSE Implementation Guide","description":"This article reveals best practices for implementing high-performance real-time communication in Go, providing a detailed analysis of Server-Sent Events (SSE) technology principles, application scenarios, and AI field implementations. From basic implementation to distributed architecture, it comprehensively covers single-client message sending, broadcast messaging, Redis integration, and multi-goroutine concurrent processing, complete with code examples and performance optimization strategies.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/community/\u793E\u533A\u6295\u7A3F/\u6253\u9020\u9AD8\u6027\u80FD\u5B9E\u65F6\u901A\u4FE1\uFF1AGo\u8BED\u8A00SSE\u5B9E\u73B0\u6307\u5357.md","sourceDirName":"community/\u793E\u533A\u6295\u7A3F","slug":"/articles/go-sse-implementation-guide","permalink":"/en/articles/go-sse-implementation-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/community/\u793E\u533A\u6295\u7A3F/\u6253\u9020\u9AD8\u6027\u80FD\u5B9E\u65F6\u901A\u4FE1\uFF1AGo\u8BED\u8A00SSE\u5B9E\u73B0\u6307\u5357.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1743315092000,"frontMatter":{"slug":"/articles/go-sse-implementation-guide","title":"Building High-Performance Real-Time Communication: Go Language SSE Implementation Guide","hide_title":true,"keywords":["Go","SSE","Server-Sent Events","real-time communication","AI streaming output","distributed messaging","Redis publish/subscribe","client push","real-time data updates","concurrent processing"],"description":"This article reveals best practices for implementing high-performance real-time communication in Go, providing a detailed analysis of Server-Sent Events (SSE) technology principles, application scenarios, and AI field implementations. From basic implementation to distributed architecture, it comprehensively covers single-client message sending, broadcast messaging, Redis integration, and multi-goroutine concurrent processing, complete with code examples and performance optimization strategies."},"sidebar":"communitySidebar","previous":{"title":"Implementing Complete Permission Authentication in Go Applications","permalink":"/en/articles/rbac-permission-authentication-in-goframe"},"next":{"title":"Database Sharding in Go: A Practical E-commerce Case Study","permalink":"/en/articles/database-sharding-in-go"}}'),t=s("785893"),r=s("250065");let o={slug:"/articles/go-sse-implementation-guide",title:"Building High-Performance Real-Time Communication: Go Language SSE Implementation Guide",hide_title:!0,keywords:["Go","SSE","Server-Sent Events","real-time communication","AI streaming output","distributed messaging","Redis publish/subscribe","client push","real-time data updates","concurrent processing"],description:"This article reveals best practices for implementing high-performance real-time communication in Go, providing a detailed analysis of Server-Sent Events (SSE) technology principles, application scenarios, and AI field implementations. From basic implementation to distributed architecture, it comprehensively covers single-client message sending, broadcast messaging, Redis integration, and multi-goroutine concurrent processing, complete with code examples and performance optimization strategies."},c=void 0,a={},l=[{value:"1. What is SSE?",id:"1-what-is-sse",level:2},{value:"2. SSE Application Scenarios",id:"2-sse-application-scenarios",level:2},{value:"2.1 Real-time Data Updates",id:"21-real-time-data-updates",level:3},{value:"2.2 System Monitoring and Alerts",id:"22-system-monitoring-and-alerts",level:3},{value:"2.3 Collaboration Tools",id:"23-collaboration-tools",level:3},{value:"2.4 Progress Feedback",id:"24-progress-feedback",level:3},{value:"3. SSE Applications in AI",id:"3-sse-applications-in-ai",level:2},{value:"3.1 Large Language Model Streaming Responses",id:"31-large-language-model-streaming-responses",level:3},{value:"3.2 AI Image Generation Process",id:"32-ai-image-generation-process",level:3},{value:"3.3 Speech Recognition and Real-time Translation",id:"33-speech-recognition-and-real-time-translation",level:3},{value:"3.4 AI-assisted Programming",id:"34-ai-assisted-programming",level:3},{value:"4. Implementing SSE with Go",id:"4-implementing-sse-with-go",level:2},{value:"4.1 Basic SSE Implementation",id:"41-basic-sse-implementation",level:3},{value:"4.2 Implementing a More Flexible SSE Service",id:"42-implementing-a-more-flexible-sse-service",level:3},{value:"4.2.1 Common SSE Business Scenarios",id:"421-common-sse-business-scenarios",level:4},{value:"4.2.1.1 Scenarios for Sending Messages to Specific Clients",id:"4211-scenarios-for-sending-messages-to-specific-clients",level:5},{value:"4.2.1.2 Broadcast Message Scenarios",id:"4212-broadcast-message-scenarios",level:5},{value:"4.2.2 Implementing the <code>SSE</code> Service",id:"422-implementing-the-sse-service",level:4},{value:"4.2.3 Using the Service in a Controller",id:"423-using-the-service-in-a-controller",level:4},{value:"4.2.3.1 Creating the Controller",id:"4231-creating-the-controller",level:5},{value:"4.2.3.2 Creating the SSE Interface",id:"4232-creating-the-sse-interface",level:5},{value:"4.2.3.3 Message Sending Interface",id:"4233-message-sending-interface",level:5},{value:"4.2.3.4 Message Broadcasting Interface",id:"4234-message-broadcasting-interface",level:5},{value:"4.2.4 Registering Routes",id:"424-registering-routes",level:4},{value:"4.3 client_id Design and Client Interaction",id:"43-client_id-design-and-client-interaction",level:3},{value:"4.3.1 Generating and Retrieving client_id",id:"431-generating-and-retrieving-client_id",level:4},{value:"4.3.2 client_id Client Interaction Flow",id:"432-client_id-client-interaction-flow",level:4},{value:"4.3.3 client_id Storage and Management",id:"433-client_id-storage-and-management",level:4},{value:"4.4 Using SSE in AI Applications",id:"44-using-sse-in-ai-applications",level:3},{value:"4.5 Implementing Distributed SSE Services with Redis",id:"45-implementing-distributed-sse-services-with-redis",level:3},{value:"4.5.1 client_id Application in Distributed Systems",id:"451-client_id-application-in-distributed-systems",level:4},{value:"4.5.2 Publishing Redis Messages",id:"452-publishing-redis-messages",level:4},{value:"4.5.3 Subscribing to Redis Messages",id:"453-subscribing-to-redis-messages",level:4},{value:"4.5.4 Initializing the Redis Subscriber",id:"454-initializing-the-redis-subscriber",level:4},{value:"5. Best Practices for SSE Implementation",id:"5-best-practices-for-sse-implementation",level:2},{value:"5.1 Server Configuration",id:"51-server-configuration",level:3},{value:"5.1.1 Server Concurrent Connection Optimization",id:"511-server-concurrent-connection-optimization",level:4},{value:"5.1.2 Adjusting Timeout Settings",id:"512-adjusting-timeout-settings",level:4},{value:"5.2 Client Reconnection Mechanism",id:"52-client-reconnection-mechanism",level:3},{value:"5.3 Resource Management",id:"53-resource-management",level:3},{value:"5.3.1 Closing Unused Connections",id:"531-closing-unused-connections",level:4},{value:"5.3.2 Limiting Connections",id:"532-limiting-connections",level:4},{value:"5.4 Message Queue Optimization",id:"54-message-queue-optimization",level:3},{value:"5.5 Monitoring and Logging",id:"55-monitoring-and-logging",level:3},{value:"6. Conclusion",id:"6-conclusion",level:2}];function d(e){let n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(946548).Z+"",width:"853",height:"274"})}),"\n",(0,t.jsx)(n.h2,{id:"1-what-is-sse",children:"1. What is SSE?"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"SSE (Server-Sent Events)"})," is a server push technology that allows servers to send real-time updates to clients via ",(0,t.jsx)(n.code,{children:"HTTP"})," connections. Unlike ",(0,t.jsx)(n.code,{children:"WebSocket"}),", ",(0,t.jsx)(n.code,{children:"SSE"})," is a unidirectional communication mechanism - only the server can push data to the client, with no support for clients sending data back to the server."]}),"\n",(0,t.jsxs)(n.p,{children:["The main features of ",(0,t.jsx)(n.code,{children:"SSE"})," include:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Based on the ",(0,t.jsx)(n.code,{children:"HTTP"})," protocol"]}),": No special protocol support required, uses standard ",(0,t.jsx)(n.code,{children:"HTTP"})," connections"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Automatic reconnection"}),": Browsers have built-in support for reconnection mechanisms"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Event IDs and types"}),": Supports message IDs and event types for easier client-side handling of different event types"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Plain text transmission"}),": Uses ",(0,t.jsx)(n.code,{children:"UTF-8"})," encoded text data"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"One-way communication"}),": Only servers can push data to clients"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"SSE"})," data format is very simple. Each message consists of one or more fields, with each field composed of a field name, colon, and field value, separated by line breaks:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"field: value\\n\n"})}),"\n",(0,t.jsxs)(n.p,{children:["A complete ",(0,t.jsx)(n.code,{children:"SSE"})," message example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'id: 1\\n\nevent: update\\n\ndata: {"message": "Hello, World!"}\\n\\n\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The double line break (",(0,t.jsx)(n.code,{children:"\\n\\n"}),") indicates the end of a message."]}),"\n",(0,t.jsx)(n.h2,{id:"2-sse-application-scenarios",children:"2. SSE Application Scenarios"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"SSE"})," is particularly suitable for the following business scenarios:"]}),"\n",(0,t.jsx)(n.h3,{id:"21-real-time-data-updates",children:"2.1 Real-time Data Updates"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Stock market information"}),": Push the latest stock prices, trading volumes, and other information to users in real-time"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Sports score broadcasting"}),": Real-time updates of game scores, match status, and other information"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Social media feeds"}),": Push notifications for the latest activities, comments, likes, etc."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"22-system-monitoring-and-alerts",children:"2.2 System Monitoring and Alerts"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Server monitoring"}),": Real-time push of CPU usage, memory occupation, network traffic, and other monitoring metrics"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Application performance monitoring"}),": Push application response time, error rate, and other performance indicators"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Alert notifications"}),": Immediately push alert information when system anomalies occur"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"23-collaboration-tools",children:"2.3 Collaboration Tools"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Document collaboration"}),": Real-time display of other users' editing operations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Project management tools"}),": Push task status changes, new comments, and other updates"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Chat applications"}),": Push new message notifications"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"24-progress-feedback",children:"2.4 Progress Feedback"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"File upload/download"}),": Real-time display of upload/download progress"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Long-running tasks"}),": Push task execution progress and stage completion status"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Data processing workflows"}),": Display the various stages and progress of data processing"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"3-sse-applications-in-ai",children:"3. SSE Applications in AI"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"SSE"})," has widespread applications in the ",(0,t.jsx)(n.code,{children:"AI"})," field, especially in scenarios requiring streaming output of ",(0,t.jsx)(n.code,{children:"AI"}),"-generated content:"]}),"\n",(0,t.jsx)(n.h3,{id:"31-large-language-model-streaming-responses",children:"3.1 Large Language Model Streaming Responses"}),"\n",(0,t.jsxs)(n.p,{children:["When users ask questions to large language models like ",(0,t.jsx)(n.code,{children:"ChatGPT"})," or ",(0,t.jsx)(n.code,{children:"DeepSeek"}),", the models typically need some time to generate complete answers. Using ",(0,t.jsx)(n.code,{children:"SSE"})," enables:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Character-by-character output"}),": The model returns each word as soon as it's generated, rather than waiting for the entire answer to be completed"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Thought process visualization"}),': Allows users to see the "thinking" process of the ',(0,t.jsx)(n.code,{children:"AI"}),", enhancing the interactive experience"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Early termination"}),": Users can decide whether to terminate the generation process after seeing part of the answer"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["This approach greatly improves the user experience, reduces waiting time, and gives the impression that the ",(0,t.jsx)(n.code,{children:"AI"})," is thinking and responding in real-time."]}),"\n",(0,t.jsx)(n.h3,{id:"32-ai-image-generation-process",children:"3.2 AI Image Generation Process"}),"\n",(0,t.jsxs)(n.p,{children:["In AI image generation scenarios, ",(0,t.jsx)(n.code,{children:"SSE"})," can be used for:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Progressive rendering"}),": Showing the image generation process from blurry to clear"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Intermediate result display"}),": Showing image results at different iteration steps"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Generation parameter feedback"}),": Real-time feedback on parameters and processing status used by the model"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"33-speech-recognition-and-real-time-translation",children:"3.3 Speech Recognition and Real-time Translation"}),"\n",(0,t.jsx)(n.p,{children:"In speech recognition and real-time translation scenarios:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Streaming speech-to-text"}),": Text appears in real-time as the user speaks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Real-time translation"}),": Translation results are generated in real-time as the source language is recognized"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Confidence feedback"}),": Display confidence levels of recognition or translation results, updating when better results are available"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"34-ai-assisted-programming",children:"3.4 AI-assisted Programming"}),"\n",(0,t.jsxs)(n.p,{children:["In AI programming assistants like ",(0,t.jsx)(n.code,{children:"GitHub Copilot"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Code completion suggestions"}),": Provide code completion suggestions in real-time, rather than waiting for complete code blocks to be generated"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Multiple solution display"}),": Stream multiple possible code implementation solutions simultaneously"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Explanations and documentation"}),": Generate code explanations and documentation in real-time"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"4-implementing-sse-with-go",children:"4. Implementing SSE with Go"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(521467).Z+"",width:"918",height:"575"})}),"\n",(0,t.jsxs)(n.p,{children:["Implementing an ",(0,t.jsx)(n.code,{children:"SSE"})," service with ",(0,t.jsx)(n.code,{children:"Go"})," is very straightforward. Below, we'll detail how to implement an ",(0,t.jsx)(n.code,{children:"SSE"})," service using the ",(0,t.jsx)(n.code,{children:"GoFrame"})," framework."]}),"\n",(0,t.jsx)(n.h3,{id:"41-basic-sse-implementation",children:"4.1 Basic SSE Implementation"}),"\n",(0,t.jsxs)(n.p,{children:["First, we need to create a basic ",(0,t.jsx)(n.code,{children:"SSE"})," handler, set the correct ",(0,t.jsx)(n.code,{children:"HTTP"})," headers, and keep the connection open:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'// SseHandler Basic SSE handler\nfunc SseHandler(r *ghttp.Request) {\n    // Set necessary HTTP headers for SSE\n    r.Response.Header().Set("Content-Type", "text/event-stream")\n    r.Response.Header().Set("Cache-Control", "no-cache")\n    r.Response.Header().Set("Connection", "keep-alive")\n    r.Response.Header().Set("Access-Control-Allow-Origin", "*")\n\n    // Simulate sending some messages\n    for i := 1; i <= 5; i++ {\n        // Send message\n        r.Response.Writefln("data: %d", i)\n        r.Response.Writefln("id: %d", i)\n        r.Response.Writefln("event: message\\n")\n        r.Response.Writefln("data: {\\"message\\": \\"Hello SSE %d\\"}\\n", i)\n        // Immediately flush to client\n        r.Response.Flush() \n        \n        // Simulate processing time\n        time.Sleep(1 * time.Second)\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"r.Response.Writefln"})," method is used to format and write data to the ",(0,t.jsx)(n.code,{children:"HTTP"})," response, adding a newline character at the end of the written content."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Then register this handler in the router:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'s := g.Server()\ns.Group("/", func(group *ghttp.RouterGroup) {\n    group.GET("/sse", SseHandler)\n})\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Clients can use the browser's native ",(0,t.jsx)(n.code,{children:"EventSource API"})," to connect to this endpoint:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Client code\nconst eventSource = new EventSource('/sse');\n\n// Listen for message events\neventSource.addEventListener('message', function(e) {\n  const data = JSON.parse(e.data);\n  console.log('Received message:', data.message);\n});\n\n// Listen for connection open event\neventSource.onopen = function() {\n  console.log('Connection to server opened.');\n};\n\n// Listen for errors\neventSource.onerror = function(e) {\n  console.error('EventSource failed:', e);\n};\n\n// Close connection\neventSource.close();\n"})}),"\n",(0,t.jsx)(n.h3,{id:"42-implementing-a-more-flexible-sse-service",children:"4.2 Implementing a More Flexible SSE Service"}),"\n",(0,t.jsxs)(n.p,{children:["To better manage ",(0,t.jsx)(n.code,{children:"SSE"})," connections and message sending, we can implement a more complete ",(0,t.jsx)(n.code,{children:"SSE"})," service."]}),"\n",(0,t.jsx)(n.h4,{id:"421-common-sse-business-scenarios",children:"4.2.1 Common SSE Business Scenarios"}),"\n",(0,t.jsxs)(n.p,{children:["In practical applications, in addition to streaming output from a single client request (such as a brief ",(0,t.jsx)(n.code,{children:"AI Chat"})," response), we typically need to implement two message sending modes:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Sending messages to a specific client (",(0,t.jsx)(n.code,{children:"SendToClient"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Broadcasting messages to all clients (",(0,t.jsx)(n.code,{children:"BroadcastMessage"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"4211-scenarios-for-sending-messages-to-specific-clients",children:"4.2.1.1 Scenarios for Sending Messages to Specific Clients"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Personalized Notifications"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"User-specific reminders (such as bill due dates, appointment reminders)"}),"\n",(0,t.jsx)(n.li,{children:"System messages for specific users (such as account status changes)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Streaming Responses in AI Applications"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"AI chat applications need to stream generated content in real-time to the specific user who initiated the request"}),"\n",(0,t.jsx)(n.li,{children:"Progress and results of long-running tasks such as document generation and code completion"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Asynchronous Task Completion Notifications"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Notifying the task initiator when a long-running background task (such as file processing, data import) is completed"}),"\n",(0,t.jsx)(n.li,{children:"Order status change notifications to the ordering user"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"4212-broadcast-message-scenarios",children:"4.2.1.2 Broadcast Message Scenarios"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"System Announcements"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"System maintenance notifications"}),"\n",(0,t.jsx)(n.li,{children:"Global feature update announcements"}),"\n",(0,t.jsx)(n.li,{children:"Emergency event notifications"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Real-time Data Updates"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Stock and cryptocurrency price changes"}),"\n",(0,t.jsx)(n.li,{children:"Sports match score updates"}),"\n",(0,t.jsx)(n.li,{children:"Weather alert information"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Multi-user Collaboration Environments"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Shared board or dashboard data updates"}),"\n",(0,t.jsx)(n.li,{children:"New message notifications in team chats"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["All these scenarios can be supported through the ",(0,t.jsx)(n.code,{children:"SendToClient"})," and ",(0,t.jsx)(n.code,{children:"BroadcastMessage"})," methods we're about to implement."]}),"\n",(0,t.jsxs)(n.h4,{id:"422-implementing-the-sse-service",children:["4.2.2 Implementing the ",(0,t.jsx)(n.code,{children:"SSE"})," Service"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'// internal/logic/sse/sse.go\n\n// Client represents an SSE client connection\ntype Client struct {\n    Id          string\n    Request     *ghttp.Request\n    messageChan chan string\n}\n\n// Service SSE service\ntype Service struct {\n    clients *gmap.StrAnyMap  // Stores all client connections\n}\n\n// New creates a new SSE service instance\nfunc New() *Service {\n    return &Service{\n        clients: gmap.NewStrAnyMap(true),\n    }\n}\n\n// Create creates an SSE connection\nfunc (s *Service) Create(r *ghttp.Request) {\n    // Set necessary HTTP headers for SSE\n    r.Response.Header().Set("Content-Type", "text/event-stream")\n    r.Response.Header().Set("Cache-Control", "no-cache")\n    r.Response.Header().Set("Connection", "keep-alive")\n    r.Response.Header().Set("Access-Control-Allow-Origin", "*")\n    \n    // Create new client\n    clientId := r.Get("client_id", guid.S()).String()\n    client := &Client{\n        Id:      clientId,\n        Request: r,\n        messageChan: make(chan string, 100),\n    }\n    \n    // Register client\n    s.clients.Set(clientId, client)\n    \n    // Clean up when client disconnects\n    defer func() {\n        s.clients.Remove(clientId)\n        close(client.messageChan)\n    }()\n    \n    // Send connection success message\n    r.Response.Writefln("id: %s", clientId)\n    r.Response.Writefln("event: connected")\n    r.Response.Writefln("data: {\\"status\\": \\"connected\\", \\"client_id\\": \\"%s\\"}\\n", clientId)\n    r.Response.Flush()\n    \n    // Handle message sending\n    for {\n        select {\n        case msg, ok := <-client.messageChan:\n            if !ok {\n                return\n            }\n            // Send message to client\n            r.Response.Writefln(msg)\n            r.Response.Flush()\n\n        case <-r.Context().Done():\n            // Client disconnected\n            return\n        }\n    }\n}\n\n// SendToClient sends a message to a specific client\nfunc (s *Service) SendToClient(clientId, eventType, data string) bool {\n    if client := s.clients.Get(clientId); client != nil {\n        c := client.(*Client)\n        msg := fmt.Sprintf(\n            "id: %d\\nevent: %s\\ndata: %s\\n\\n", \n            time.Now().UnixNano(), eventType, data,\n        )\n        // Try to send message, skip if buffer is full\n        select {\n        case c.messageChan <- msg:\n            return true\n        default:\n            return false\n        }\n    }\n    return false\n}\n\n// BroadcastMessage broadcasts a message to all clients\nfunc (s *Service) BroadcastMessage(eventType, data string) int {\n    count := 0\n    s.clients.Iterator(func(k string, v interface{}) bool {\n        if s.SendToClient(k, eventType, data) {\n            count++\n        }\n        return true\n    })\n    return count\n}\n\n// heartbeatSender sends periodic heartbeats\nfunc (s *Service) heartbeatSender() {\n    ticker := time.NewTicker(30 * time.Second)\n    defer ticker.Stop()\n    \n    for range ticker.C {\n        s.clients.Iterator(func(k string, v interface{}) bool {\n            client := v.(*Client)\n            select {\n            case client.messageChan <- ": heartbeat\\n\\n":\n                // Heartbeat sent successfully\n            default:\n                // Message buffer full, client might be disconnected\n            }\n            return true\n        })\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"423-using-the-service-in-a-controller",children:"4.2.3 Using the Service in a Controller"}),"\n",(0,t.jsx)(n.h5,{id:"4231-creating-the-controller",children:"4.2.3.1 Creating the Controller"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"// internal/controller/sse/sse.go\n\ntype Controller struct {\n    service *sse.Service\n}\n\nfunc New() *Controller {\n    return &Controller{\n        service: sse.New(),\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h5,{id:"4232-creating-the-sse-interface",children:"4.2.3.2 Creating the SSE Interface"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'type SseReq struct {\n    g.Meta `path:"/sse/create" method:"post"`\n}\ntype SseRes struct {}\n\n// Sse SSE connection\nfunc (c *Controller) Sse(ctx context.Context, req *SseReq)(res *SseRes, err error) {\n    c.service.Create(r.RequestFromCtx(ctx))\n    return &SseRes{}, nil\n}\n'})}),"\n",(0,t.jsx)(n.h5,{id:"4233-message-sending-interface",children:"4.2.3.3 Message Sending Interface"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'type SendMessageReq struct {\n    g.Meta `path:"/sse/send" method:"post"`\n    ClientId  string \n    EventType string \n    Data      string \n}\ntype SendMessageRes struct {}\n\n// SendMessage sends a message to a specific client\nfunc (c *Controller) SendMessage(ctx context.Context, req *SendMessageReq)(res *SendMessageRes, err error) {\n    success := c.service.SendToClient(req.ClientId, req.EventType, req.Data)\n    return &SendMessageRes{}, nil\n}\n'})}),"\n",(0,t.jsx)(n.h5,{id:"4234-message-broadcasting-interface",children:"4.2.3.4 Message Broadcasting Interface"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'type BroadcastMessageReq struct {\n    g.Meta `path:"/sse/broadcast" method:"post"`\n    EventType string \n    Data      string \n}\ntype BroadcastMessageRes struct {}\n\n// BroadcastMessage broadcasts a message to all clients\nfunc (c *Controller) BroadcastMessage(ctx context.Context, req *BroadcastMessageReq)(res *BroadcastMessageRes, err error) {\n    count := c.service.BroadcastMessage(req.EventType, req.Data)\n    return &BroadcastMessageRes{}, nil\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"424-registering-routes",children:"4.2.4 Registering Routes"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'s := g.Server()\ns.Group("/api", func(group *ghttp.RouterGroup) {\n    group.Bind("/", sse.New())\n})\n'})}),"\n",(0,t.jsx)(n.h3,{id:"43-client_id-design-and-client-interaction",children:"4.3 client_id Design and Client Interaction"}),"\n",(0,t.jsxs)(n.p,{children:["A key design in implementing an ",(0,t.jsx)(n.code,{children:"SSE"})," service is the management of ",(0,t.jsx)(n.code,{children:"client_id"}),". The ",(0,t.jsx)(n.code,{children:"client_id"})," is used to uniquely identify each ",(0,t.jsx)(n.code,{children:"SSE"})," connection, allowing the server to send messages accurately to specific clients."]}),"\n",(0,t.jsx)(n.h4,{id:"431-generating-and-retrieving-client_id",children:"4.3.1 Generating and Retrieving client_id"}),"\n",(0,t.jsxs)(n.p,{children:["In ",(0,t.jsx)(n.code,{children:"GoFrame"}),", we use the following method to generate and retrieve ",(0,t.jsx)(n.code,{children:"client_id"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'// Get or generate client Id\nclientId := r.Get("client_id", guid.S()).String()\n'})}),"\n",(0,t.jsx)(n.p,{children:"This line of code works as follows:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["First, try to get ",(0,t.jsx)(n.code,{children:"client_id"})," from the request parameters, allowing clients to pass their own Id in the request"]}),"\n",(0,t.jsxs)(n.li,{children:["If no ",(0,t.jsx)(n.code,{children:"client_id"})," is provided in the request, use ",(0,t.jsx)(n.code,{children:"guid.S()"})," to generate a new Id"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"guid.S"})," returns a globally unique string identifier, ensuring that even if the client doesn't provide its own Id, we can still assign a unique identifier to each connection."]}),"\n",(0,t.jsx)(n.h4,{id:"432-client_id-client-interaction-flow",children:"4.3.2 client_id Client Interaction Flow"}),"\n",(0,t.jsx)(n.p,{children:"The complete client-server interaction flow is as follows:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Client's first connection"}),": The client connects to the ",(0,t.jsx)(n.code,{children:"SSE"})," endpoint via the ",(0,t.jsx)(n.code,{children:"EventSource API"})," without providing a ",(0,t.jsx)(n.code,{children:"client_id"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const eventSource = new EventSource('/api/sse');\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Server generates ",(0,t.jsx)(n.code,{children:"client_id"})]}),": The server uses ",(0,t.jsx)(n.code,{children:"guid.S()"})," to generate a new ",(0,t.jsx)(n.code,{children:"client_id"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Server sends ",(0,t.jsx)(n.code,{children:"client_id"})," to client"]}),": The server sends a special event containing the ",(0,t.jsx)(n.code,{children:"client_id"})," after the connection is established"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'// Send connection success message with client_id\nr.Response.Writefln("id: %s", clientId)\nr.Response.Writefln("event: connected")\nr.Response.Writefln("data: {\\"status\\": \\"connected\\", \\"client_id\\": \\"%s\\"}\\n", clientId)\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Client saves ",(0,t.jsx)(n.code,{children:"client_id"})]}),": The client receives the ",(0,t.jsx)(n.code,{children:"connected"})," event and saves the ",(0,t.jsx)(n.code,{children:"client_id"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"eventSource.addEventListener('connected', function(e) {\n    const data = JSON.parse(e.data);\n    clientId = data.client_id;\n    console.log('Connected to SSE, client Id:', clientId);\n});\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Using ",(0,t.jsx)(n.code,{children:"client_id"})," in subsequent requests"]}),": The client includes the ",(0,t.jsx)(n.code,{children:"client_id"})," in subsequent API requests"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Send request to server with client_id\nconst response = await fetch('/api/ai/chat', {\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n        prompt: prompt,\n        client_id: clientId  // Send the saved client_id to the server\n    })\n});\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Server uses ",(0,t.jsx)(n.code,{children:"client_id"})," to send targeted messages"]}),": The server processes the request and uses the ",(0,t.jsx)(n.code,{children:"client_id"})," to send the response to the correct ",(0,t.jsx)(n.code,{children:"SSE"})," connection"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'// Send to client\nc.service.SendToClient(clientId, "ai_response", string(data))\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"433-client_id-storage-and-management",children:"4.3.3 client_id Storage and Management"}),"\n",(0,t.jsx)(n.p,{children:"On the server side, we use a thread-safe memory map to manage all client connections:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"// SseService SSE service\ntype SseService struct {\n    clients *gmap.StrAnyMap  // Stores all client connections\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"When a client connects, we add it to the map:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"// Register client\ns.clients.Set(clientId, client)\n"})}),"\n",(0,t.jsx)(n.p,{children:"When a client disconnects, we remove it from the map:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"// Clean up when client disconnects\ndefer func() {\n    s.clients.Remove(clientId)\n    close(client.messageChan)\n}()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"44-using-sse-in-ai-applications",children:"4.4 Using SSE in AI Applications"}),"\n",(0,t.jsx)(n.p,{children:"Below, we'll implement a simple AI streaming output application that simulates a large language model's character-by-character response:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'// controller/ai/chat.go\n\n// Preset answers to simulate AI responses\nvar aiResponses = `\nGoFrame is a modular, high-performance, enterprise-level Go basic development framework.\nSSE (Server-Sent Events) is a technology that allows servers to push data to clients.\nUnlike WebSocket, SSE is one-way communication, only allowing servers to send data to clients.\nUsing SSE can implement streaming output of AI models, enhancing the user experience.\n`\n\n// StreamChatRequest Streaming chat request\ntype StreamChatRequest struct {\n    g.Meta `path:"/ai/stream-chat" method:"post"`\n    Prompt   string `v:"required#Please enter a question"`\n    ClientId string `v:"required#Please enter client_id"`\n}\n\n// StreamChatResponse Streaming chat response\ntype StreamChatResponse struct {\n    Content string `json:"content"`\n    Done    bool   `json:"done"`\n}\n\n// StreamChat Streaming chat API\nfunc (c *Controller) StreamChat(ctx context.Context, req *StreamChatRequest) (res *StreamChatResponse, err error){\n    // Get or generate client Id\n    if req.ClientId == "" {\n        req.ClientId = guid.S()\n    }\n    \n    // Start a goroutine to simulate AI processing and streaming response\n    go func() {\n        // Split the answer into individual characters\n        words := gstr.SplitAndTrim(aiResponses, " ")\n\n        // Simulate thinking time\n        time.Sleep(500 * time.Millisecond)\n        \n        // Send answer character by character\n        for i, char := range words {\n            // Build response\n            resp := StreamChatResponse{\n                Content: char,\n                Done:    i == len(words)-1,\n            }\n            \n            // Convert to JSON\n            data, _ := json.Marshal(resp)\n            \n            // Send to client\n            c.service.SendToClient(req.ClientId, "ai_response", string(data))\n            \n            // Simulate typing delay\n            time.Sleep(100 * time.Millisecond)\n        }\n    }()\n    \n    // Return success, actual content will be sent via SSE\n    return &StreamChatResponse{\n        Content: "Request received, response will be streamed via SSE",\n        Done:    true,\n    }, nil\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Register this API in the router:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'s := g.Server()\ns.Group("/api", func(group *ghttp.RouterGroup) {\n    // SSE API\n    group.Bind("/", sse.New())\n    // AI chat API\n    group.Bind("/", ai.New())\n})\n'})}),"\n",(0,t.jsx)(n.h3,{id:"45-implementing-distributed-sse-services-with-redis",children:"4.5 Implementing Distributed SSE Services with Redis"}),"\n",(0,t.jsxs)(n.p,{children:["In production environments, we typically need to deploy multiple service instances to handle a large number of requests.\nTo ensure that ",(0,t.jsx)(n.code,{children:"SSE"})," messages are correctly transmitted between different instances, we can use Redis's ",(0,t.jsx)(n.strong,{children:"publish/subscribe"})," functionality to implement distributed ",(0,t.jsx)(n.code,{children:"SSE"})," services."]}),"\n",(0,t.jsx)(n.h4,{id:"451-client_id-application-in-distributed-systems",children:"4.5.1 client_id Application in Distributed Systems"}),"\n",(0,t.jsxs)(n.p,{children:["In distributed systems, clients may connect to different service instances (",(0,t.jsx)(n.code,{children:"HTTP Server"}),"). In this case, the role of ",(0,t.jsx)(n.code,{children:"client_id"})," becomes even more important:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Clients save ",(0,t.jsx)(n.code,{children:"client_id"})," and use it in all requests"]}),"\n",(0,t.jsxs)(n.li,{children:["Servers use distributed messaging systems like ",(0,t.jsx)(n.code,{children:"Redis"})," to route messages to the correct service instance"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"// Publish message to Redis, including client_id information\nmsg := RedisMessage{\n    ClientId:  clientId,  // Specify target client\n    EventType: eventType,\n    Data:      data,\n    Broadcast: broadcast,\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"This design ensures that even in multi-service instance environments, messages can be accurately sent to the specified client."}),"\n",(0,t.jsx)(n.h4,{id:"452-publishing-redis-messages",children:"4.5.2 Publishing Redis Messages"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'// internal/logic/sse/sse_redis.go\n\n// Redis channel name\nconst (\n    RedisSseChannel = "sse:messages"\n)\n\n// PublishToRedis publishes a message to Redis\nfunc (s *Service) PublishToRedis(clientId, eventType, data string, broadcast bool) error {\n    msg := RedisMessage{\n        ClientId:  clientId,\n        EventType: eventType,\n        Data:      data,\n        Broadcast: broadcast,\n    }\n    \n    // Serialize message\n    bytes, err := json.Marshal(msg)\n    if err != nil {\n        return err\n    }\n    \n    // Publish to Redis\n    _, err = s.redis.Publish(ctx, RedisSseChannel, string(bytes))\n    return err\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"453-subscribing-to-redis-messages",children:"4.5.3 Subscribing to Redis Messages"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'// internal/logic/sse/sse_redis.go\n\n// StartRedisSubscriber starts the Redis subscriber\nfunc (s *Service) StartRedisSubscriber() error {\n    ctx := context.Background()\n    \n    // Create redis subscription object\n    pubsub := s.redis.Subscribe(ctx, RedisSseChannel)\n    defer pubsub.Close() \n    \n    // Get message channel\n    msgChan := pubsub.Channel()\n    \n    go func() {\n        // Process received messages\n        for msg := range msgChan {\n            var redisMsg RedisMessage\n            if err := json.Unmarshal([]byte(msg.Payload), &redisMsg); err != nil {\n                g.Log().Error(ctx, "Parse redis message error:", err)\n                continue\n            }\n            \n            // Process message\n            if redisMsg.Broadcast {\n                // Broadcast message\n                s.BroadcastMessage(redisMsg.EventType, redisMsg.Data)\n            } else if redisMsg.ClientId != "" {\n                // Send to specific client\n                s.SendToClient(redisMsg.ClientId, redisMsg.EventType, redisMsg.Data)\n            }\n        }\n    }()\n    \n    return nil\n}\n\n// SendMessage sends a message to a specific client\nfunc (s *Service) SendMessage(clientId, eventType, data string) error {\n    return s.PublishToRedis(clientId, eventType, data, false)\n}\n\n// BroadcastMessage broadcasts a message to all clients\nfunc (s *Service) BroadcastMessage(eventType, data string) error {\n    return s.PublishToRedis("", eventType, data, true)\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"454-initializing-the-redis-subscriber",children:"4.5.4 Initializing the Redis Subscriber"}),"\n",(0,t.jsxs)(n.p,{children:["Finally, initialize the ",(0,t.jsx)(n.code,{children:"Redis"})," subscriber when the service starts:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"// main.go\nfunc main() {\n    // Start Redis subscriber\n    sseService.StartRedisSubscriber()\n    \n    // Start HTTP service\n    // ...\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"5-best-practices-for-sse-implementation",children:"5. Best Practices for SSE Implementation"}),"\n",(0,t.jsxs)(n.p,{children:["When implementing an ",(0,t.jsx)(n.code,{children:"SSE"})," service, there are some best practices to keep in mind:"]}),"\n",(0,t.jsx)(n.h3,{id:"51-server-configuration",children:"5.1 Server Configuration"}),"\n",(0,t.jsx)(n.h4,{id:"511-server-concurrent-connection-optimization",children:"5.1.1 Server Concurrent Connection Optimization"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"SSE"})," connections remain open for a long time, requiring appropriate server optimization to handle a large number of concurrent connections."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Increase system open file limit\nsysctl -w fs.file-max=100000\n\n# Adjust current user's limit\nulimit -n 100000\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"If you're using a cloud server, cloud service providers typically have already optimized system configurations. Please check and confirm the system configuration."}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"512-adjusting-timeout-settings",children:"5.1.2 Adjusting Timeout Settings"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"SSE"})," connections need to be maintained for a long time, so relevant timeout settings should be adjusted."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"// Adjust timeout settings\ns.SetReadTimeout(0)      // Disable read timeout\ns.SetWriteTimeout(0)     // Disable write timeout\ns.SetIdleTimeout(0)      // Disable idle timeout\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["If you're using the ",(0,t.jsx)(n.code,{children:"GoFrame"})," framework to implement ",(0,t.jsx)(n.code,{children:"SSE"}),", write time does not time out under the default configuration. Therefore, developers do not need to make additional configurations to the ",(0,t.jsx)(n.code,{children:"Server"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"52-client-reconnection-mechanism",children:"5.2 Client Reconnection Mechanism"}),"\n",(0,t.jsxs)(n.p,{children:["Although the browser's ",(0,t.jsx)(n.code,{children:"EventSource API"})," has a built-in reconnection mechanism, in some cases, custom reconnection logic may be needed:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Custom reconnection logic\nlet reconnectAttempts = 0;\nconst maxReconnectAttempts = 5;\nconst baseReconnectDelay = 1000; // 1 second\n\nfunction connectSSE() {\n    eventSource = new EventSource('/api/sse');\n    \n    // Reset reconnection count when connection opens\n    eventSource.onopen = function() {\n        reconnectAttempts = 0;\n        console.log('SSE connection established');\n    };\n    \n    // Error handling and reconnection\n    eventSource.onerror = function(e) {\n        eventSource.close();\n        \n        if (reconnectAttempts < maxReconnectAttempts) {\n            reconnectAttempts++;\n            // Exponential backoff reconnection\n            const delay = baseReconnectDelay * Math.pow(2, reconnectAttempts - 1);\n            console.log(`Reconnecting in ${delay}ms (attempt ${reconnectAttempts}/${maxReconnectAttempts})`);\n            setTimeout(connectSSE, delay);\n        } else {\n            console.error('Max reconnect attempts reached');\n        }\n    };\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"53-resource-management",children:"5.3 Resource Management"}),"\n",(0,t.jsx)(n.h4,{id:"531-closing-unused-connections",children:"5.3.1 Closing Unused Connections"}),"\n",(0,t.jsx)(n.p,{children:"The server periodically checks and closes connections that have been idle for a long time to avoid resource waste."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"// Add last activity time field\ntype Client struct {\n    Id            string\n    messageChan   chan string\n    lastActiveTime time.Time\n}\n\n// Periodically clean up idle connections\nfunc (s *Service) startIdleConnectionCleaner() {\n    ticker := time.NewTicker(5 * time.Minute)\n    defer ticker.Stop()\n    \n    for range ticker.C {\n        now := time.Now()\n        // Use LockFunc to safely perform deletion operations\n        s.clients.LockFunc(func(m map[string]interface{}) {\n            for k, v := range m {\n                client := v.(*Client)\n                // If there has been no activity for more than 30 minutes, close the connection\n                if now.Sub(client.lastActiveTime) > 30*time.Minute {\n                    close(client.messageChan)\n                    delete(m, k)\n                }\n            }\n        })\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"532-limiting-connections",children:"5.3.2 Limiting Connections"}),"\n",(0,t.jsx)(n.p,{children:"To prevent resource exhaustion, you can limit the maximum number of connections per IP."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'// Add IP connection counter\nvar ipConnections = gmap.NewStrIntMap(true)\n\nfunc (s *Service) Create(r *ghttp.Request) {\n    // Get client IP\n    clientIp := r.GetClientIp()\n    \n    // Check connection limit before creating a new SSE connection\n    if count := ipConnections.GetOrSet(clientIp, 0); count >= 5 {\n        r.Response.WriteStatus(429, "Too many connections")\n        return\n    }\n    \n    // Increase connection count\n    ipConnections.Add(clientIp, 1)\n    \n    // Decrease count when connection closes\n    defer ipConnections.Add(clientIp, -1)\n    \n    // Continue processing SSE connection...\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"54-message-queue-optimization",children:"5.4 Message Queue Optimization"}),"\n",(0,t.jsxs)(n.p,{children:["For high-concurrency scenarios, a more efficient message queue consumption design can be used, processing messages in parallel through multiple ",(0,t.jsx)(n.code,{children:"goroutines"})," to reduce message processing latency:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"// Use a buffered channel as a message queue\nvar messageQueue = make(chan RedisMessage, 1000)\n\n// Start Redis subscriber and distribute messages to worker goroutines\nfunc (s *Service) StartRedisSubscriber(ctx context.Context, workerCount int) error {\n    // Create redis subscription object\n    pubsub := s.redis.Subscribe(ctx, RedisSseChannel)\n    \n    // Get message channel\n    msgChan := pubsub.Channel()\n    \n    // Start message distribution goroutine\n    go func() {\n        defer pubsub.Close()\n        \n        for msg := range msgChan {\n            // Parse message\n            var redisMsg RedisMessage\n            if err := json.Unmarshal([]byte(msg.Payload), &redisMsg); err != nil {\n                continue\n            }\n            \n            // Send message to work queue\n            select {\n            case messageQueue <- redisMsg:\n                // Message successfully sent to queue\n            default:\n                // Queue is full, discard message\n            }\n        }\n    }()\n    \n    // Start worker goroutine pool\n    for i := 0; i < workerCount; i++ {\n        go func() {\n            for msg := range messageQueue {\n                // Process message\n                if msg.Broadcast {\n                    s.BroadcastMessage(msg.EventType, msg.Data)\n                } else {\n                    s.SendToClient(msg.ClientId, msg.EventType, msg.Data)\n                }\n            }\n        }()\n    }\n    \n    return nil\n}\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Here you can also use the ",(0,t.jsx)(n.code,{children:"grpool"})," goroutine pool to manage ",(0,t.jsx)(n.code,{children:"goroutines"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"55-monitoring-and-logging",children:"5.5 Monitoring and Logging"}),"\n",(0,t.jsx)(n.p,{children:"Implement monitoring metrics collection to identify issues promptly, including at least the following key metrics:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"type SseMetrics struct {\n    ActiveConnections    int64 // Current active connections\n    TotalConnections     int64 // Total connections\n    MessagesSent         int64 // Number of messages sent\n    MessagesDropped      int64 // Number of messages dropped\n    ReconnectCount       int64 // Number of reconnections\n}\n// ...\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["You can use the ",(0,t.jsx)(n.code,{children:"gmetric"})," component provided by the framework to implement the collection and reporting of monitoring metrics. This will not be elaborated here; please refer to the service observability related chapters on the ",(0,t.jsx)(n.code,{children:"GoFrame"})," official website for details."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"6-conclusion",children:"6. Conclusion"}),"\n",(0,t.jsxs)(n.p,{children:["This article has provided a detailed introduction to implementing ",(0,t.jsx)(n.code,{children:"Server-Sent Events (SSE)"})," technology in the ",(0,t.jsx)(n.code,{children:"GoFrame"})," framework, covering everything from basic concepts to practical applications."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"SSE"}),", as a lightweight real-time communication technology, has advantages such as simple implementation, good compatibility, and low resource consumption, making it very suitable for various scenarios that require servers to actively push data, such as real-time notifications, data updates, AI applications, etc."]}),"\n",(0,t.jsxs)(n.p,{children:["Key points for implementing ",(0,t.jsx)(n.code,{children:"SSE"})," in ",(0,t.jsx)(n.code,{children:"GoFrame"})," include:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Basic Infrastructure"}),": Establishing client connection management, message sending, and heartbeat detection infrastructure"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Message Processing"}),": Implementing single-client message sending and broadcast messaging capabilities to meet different business scenarios"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Distributed Deployment"}),": Using Redis's publish/subscribe functionality to synchronize messages between multiple instances"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Performance Optimization"}),": Ensuring system stability through multi-goroutine processing, connection management, and resource limitations"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Best Practices"}),": Providing practical suggestions for server configuration, client reconnection, resource management, etc."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["By adopting the solution provided in this article, developers can quickly integrate ",(0,t.jsx)(n.code,{children:"SSE"})," functionality into ",(0,t.jsx)(n.code,{children:"GoFrame"})," projects, building high-performance, scalable real-time communication systems. Whether developing AI applications, real-time dashboards, or social platforms, ",(0,t.jsx)(n.code,{children:"SSE"})," is a technology worth considering."]}),"\n",(0,t.jsx)(n.p,{children:"In practical applications, developers should make appropriate adjustments and optimizations based on specific business requirements and system scale, such as enhancing error handling, adding monitoring metrics, or integrating more complex message queue systems."})]})}function h(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},946548:function(e,n,s){s.d(n,{Z:function(){return i}});let i="data:image/webp;base64,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"},521467:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/go-sse-9d1f1b207907e7d97eb047505f2f6394.webp"},250065:function(e,n,s){s.d(n,{Z:function(){return c},a:function(){return o}});var i=s(667294);let t={},r=i.createContext(t);function o(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);