"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["53065"],{610682:function(e,n,t){t.r(n),t.d(n,{metadata:()=>r,contentTitle:()=>s,default:()=>c,assets:()=>d,toc:()=>l,frontMatter:()=>a});var r=JSON.parse('{"id":"course/proxima-book/\u7B2C\u56DB\u7AE0-\u4E1A\u52A1\u7F51\u5173/4.2.\u63A5\u53E3\u4E0E\u63A7\u5236\u5668","title":"4.2 APIs and Controllers","description":"A detailed guide on designing APIs and implementing controllers for the API Gateway, including the definition and request handling logic for user login, registration, and other endpoints.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/course/proxima-book/\u7B2C\u56DB\u7AE0-\u4E1A\u52A1\u7F51\u5173/4.2.\u63A5\u53E3\u4E0E\u63A7\u5236\u5668.md","sourceDirName":"course/proxima-book/\u7B2C\u56DB\u7AE0-\u4E1A\u52A1\u7F51\u5173","slug":"/course/proxima-book/gateway-controller","permalink":"/en/course/proxima-book/gateway-controller","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/course/proxima-book/\u7B2C\u56DB\u7AE0-\u4E1A\u52A1\u7F51\u5173/4.2.\u63A5\u53E3\u4E0E\u63A7\u5236\u5668.md","tags":[],"version":"current","lastUpdatedBy":"oldme","lastUpdatedAt":1734398801000,"frontMatter":{"title":"4.2 APIs and Controllers","hide_title":true,"slug":"/course/proxima-book/gateway-controller","keywords":["GoFrame","API design","gateway controller","HTTP endpoints","request validation","response handling"],"description":"A detailed guide on designing APIs and implementing controllers for the API Gateway, including the definition and request handling logic for user login, registration, and other endpoints."},"sidebar":"courseProximaBookSidebar","previous":{"title":"4.1 Prerequisites","permalink":"/en/course/proxima-book/gateway-prepare"},"next":{"title":"4.3 Service Startup","permalink":"/en/course/proxima-book/gateway-run"}}'),o=t("785893"),i=t("250065");let a={title:"4.2 APIs and Controllers",hide_title:!0,slug:"/course/proxima-book/gateway-controller",keywords:["GoFrame","API design","gateway controller","HTTP endpoints","request validation","response handling"],description:"A detailed guide on designing APIs and implementing controllers for the API Gateway, including the definition and request handling logic for user login, registration, and other endpoints."},s=void 0,d={},l=[{value:"API",id:"api",level:2},{value:"Controller",id:"controller",level:2}];function g(e){let n={code:"code",em:"em",h2:"h2",hr:"hr",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"This step should be familiar to everyone, so we'll keep the explanation brief."}),"\n",(0,o.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.em,{children:"app/gateway/api/user/v1/user.go"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'package v1  \n  \nimport "github.com/gogf/gf/v2/frame/g"  \n  \ntype LoginReq struct {  \n    g.Meta   `path:"users/login" method:"post" sm:"Login" tags:"User"`  \n    Username string `json:"username" v:"required|length:3,12"`  \n    Password string `json:"password" v:"required|length:6,16"`  \n}  \n  \ntype LoginRes struct {  \n    Token string `json:"token" dc:"Add Authorization: token in header for authenticated endpoints"` \n}\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.em,{children:"app/gateway/api/words/v1/words.go"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'package v1  \n  \nimport (  \n    "github.com/gogf/gf/v2/frame/g"  \n    "github.com/gogf/gf/v2/os/gtime"\n)  \n  \ntype CreateReq struct {  \n    g.Meta     `path:"words" method:"post" sm:"Create" tags:"Word"`  \n    Word       string `json:"word" v:"required|length:1,100" dc:"Word"`  \n    Definition string `json:"definition" v:"required|length:1,300" dc:"Word definition"`  \n}  \n  \ntype CreateRes struct {  \n}  \n  \ntype DetailReq struct {  \n    g.Meta `path:"words/{id}" method:"get" sm:"Details" tags:"Word"`  \n    Id     uint `json:"id" v:"required"`  \n}  \n  \ntype DetailRes struct {  \n    Id                 uint        `json:"id"`  \n    Word               string      `json:"word"`  \n    Definition         string      `json:"definition"`  \n    ExampleSentence    string      `json:"exampleSentence"`  \n    ChineseTranslation string      `json:"chineseTranslation"`  \n    Pronunciation      string      `json:"pronunciation"`  \n    CreatedAt          *gtime.Time `json:"createdAt"`  \n    UpdatedAt          *gtime.Time `json:"updatedAt"`  \n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"controller",children:"Controller"}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.p,{children:"Execute the following command to generate controllers:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ gf gen ctrl\ngenerated: D:\\project\\proxima\\app\\gateway\\api\\user\\user.go\ngenerated: D:\\project\\proxima\\app\\gateway\\internal\\controller\\user\\user.go\ngenerated: D:\\project\\proxima\\app\\gateway\\internal\\controller\\user\\user_new.go\ngenerated: D:\\project\\proxima\\app\\gateway\\internal\\controller\\user\\user_v1_login.go\ngenerated: D:\\project\\proxima\\app\\gateway\\api\\words\\words.go\ngenerated: D:\\project\\proxima\\app\\gateway\\internal\\controller\\words\\words.go\ngenerated: D:\\project\\proxima\\app\\gateway\\internal\\controller\\words\\words_new.go\ngenerated: D:\\project\\proxima\\app\\gateway\\internal\\controller\\words\\words_v1_create.go\ngenerated: D:\\project\\proxima\\app\\gateway\\internal\\controller\\words\\words_v1_detail.go\ndone!\n"})})]})}function c(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(g,{...e})}):g(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return s},a:function(){return a}});var r=t(667294);let o={},i=r.createContext(o);function a(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);