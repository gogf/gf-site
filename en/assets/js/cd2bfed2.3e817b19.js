"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["97715"],{35682:function(e,n,i){i.r(n),i.d(n,{metadata:()=>s,contentTitle:()=>c,default:()=>h,assets:()=>d,toc:()=>o,frontMatter:()=>r});var s=JSON.parse('{"id":"examples/practices/injection/injection","title":"Dependency Injection","description":"A dependency injection example using GoFrame framework and do package","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/examples/practices/injection/injection.md","sourceDirName":"examples/practices/injection","slug":"/examples/practices/injection","permalink":"/en/examples/practices/injection","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/docs/examples/practices/injection/injection.md","tags":[],"version":"current","lastUpdatedBy":"John","lastUpdatedAt":1740054704000,"frontMatter":{"title":"Dependency Injection","slug":"/examples/practices/injection","keywords":["dependency injection","testing","goframe","di"],"description":"A dependency injection example using GoFrame framework and do package","hide_title":true},"sidebar":"examplesSidebar","previous":{"title":"Practices","permalink":"/en/examples/practices"}}'),t=i("785893"),l=i("250065");let r={title:"Dependency Injection",slug:"/examples/practices/injection",keywords:["dependency injection","testing","goframe","di"],description:"A dependency injection example using GoFrame framework and do package",hide_title:!0},c="Dependency Injection Example",d={},o=[{value:"Description",id:"description",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Structure",id:"structure",level:2},{value:"Features",id:"features",level:2},{value:"Setup",id:"setup",level:2},{value:"Usage",id:"usage",level:2},{value:"Implementation Details",id:"implementation-details",level:2},{value:"Dependency Injection Setup",id:"dependency-injection-setup",level:3},{value:"Service Layer",id:"service-layer",level:3},{value:"Controller Layer",id:"controller-layer",level:3},{value:"Testing",id:"testing",level:3},{value:"Notes",id:"notes",level:2}];function a(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"dependency-injection-example",children:"Dependency Injection Example"})}),"\n",(0,t.jsxs)(n.p,{children:["Code Source: ",(0,t.jsx)(n.a,{href:"https://github.com/gogf/examples/tree/main/practices/injection",children:"https://github.com/gogf/examples/tree/main/practices/injection"})]}),"\n",(0,t.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:["This example demonstrates how to implement dependency injection in a ",(0,t.jsx)(n.code,{children:"GoFrame"})," application. The example showcases:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Basic dependency injection setup"}),"\n",(0,t.jsx)(n.li,{children:"Service layer implementation with DI"}),"\n",(0,t.jsx)(n.li,{children:"Controller layer with gRPC integration"}),"\n",(0,t.jsx)(n.li,{children:"Unit testing with mocked dependencies"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The implementation focuses on making the core business logic easily testable by:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Separating concerns using dependency injection"}),"\n",(0,t.jsx)(n.li,{children:"Providing a clean interface for service dependencies"}),"\n",(0,t.jsx)(n.li,{children:"Making dependencies easily mockable for testing"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://golang.org/dl/",children:"Go"})," ",(0,t.jsx)(n.code,{children:"1.22"})," or higher"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://git-scm.com/downloads",children:"Git"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://goframe.org",children:(0,t.jsx)(n.code,{children:"GoFrame"})})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/samber/do",children:(0,t.jsx)(n.code,{children:"do"})})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.mongodb.com",children:"MongoDB"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://redis.io",children:"Redis"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"structure",children:"Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"injection/\n\u251C\u2500\u2500 app/\n\u2502   \u251C\u2500\u2500 gateway/          # API Gateway Service\n\u2502   \u2502   \u251C\u2500\u2500 api/         # API definitions\n\u2502   \u2502   \u251C\u2500\u2500 internal/    # Internal implementation\n\u2502   \u2502   \u2502   \u251C\u2500\u2500 cmd/    # Command line tools\n\u2502   \u2502   \u2502   \u251C\u2500\u2500 controller/  # Controllers\n\u2502   \u2502   \u2502   \u251C\u2500\u2500 model/  # Data models\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 service/  # Business logic\n\u2502   \u2502   \u2514\u2500\u2500 manifest/   # Configuration files\n\u2502   \u2514\u2500\u2500 user/           # User Service\n\u2502       \u251C\u2500\u2500 api/        # API definitions\n\u2502       \u2502   \u251C\u2500\u2500 entity/ # Entity definitions\n\u2502       \u2502   \u2514\u2500\u2500 user/   # User API proto\n\u2502       \u251C\u2500\u2500 internal/   # Internal implementation\n\u2502       \u2502   \u251C\u2500\u2500 cmd/    # Command line tools\n\u2502       \u2502   \u251C\u2500\u2500 controller/  # Controllers with DI\n\u2502       \u2502   \u251C\u2500\u2500 dao/    # Data Access Objects\n\u2502       \u2502   \u251C\u2500\u2500 model/  # Data models\n\u2502       \u2502   \u2514\u2500\u2500 service/  # Business logic with DI\n\u2502       \u2514\u2500\u2500 manifest/   # Configuration files\n\u251C\u2500\u2500 hack/               # Development tools\n\u2514\u2500\u2500 utility/           # Common utilities\n    \u251C\u2500\u2500 injection/     # DI utilities\n    \u2514\u2500\u2500 mongohelper/   # MongoDB helpers\n"})}),"\n",(0,t.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Dependency injection using ",(0,t.jsx)(n.code,{children:"do"})," package"]}),"\n",(0,t.jsx)(n.li,{children:"MongoDB and Redis integration"}),"\n",(0,t.jsx)(n.li,{children:"gRPC service implementation"}),"\n",(0,t.jsx)(n.li,{children:"Comprehensive unit testing"}),"\n",(0,t.jsx)(n.li,{children:"Clean shutdown handling"}),"\n",(0,t.jsx)(n.li,{children:"Named dependency support"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Clone the repository:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/gogf/examples.git\ncd examples/practices/injection\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Install the dependencies:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"go mod tidy\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Start required services using Docker:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Start MongoDB\ndocker run -d --name mongo -p 27017:27017 mongo:latest\n\n# Start Redis\ndocker run -d --name redis -p 6379:6379 redis:latest\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Run the application:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"go run main.go\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Run the tests:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"go test ./...\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"implementation-details",children:"Implementation Details"}),"\n",(0,t.jsx)(n.h3,{id:"dependency-injection-setup",children:"Dependency Injection Setup"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Uses ",(0,t.jsx)(n.code,{children:"do"})," package for dependency management"]}),"\n",(0,t.jsx)(n.li,{children:"Supports both named and unnamed dependencies"}),"\n",(0,t.jsx)(n.li,{children:"Provides helper functions for common operations"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"service-layer",children:"Service Layer"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Clean separation of concerns"}),"\n",(0,t.jsx)(n.li,{children:"Interface-based design"}),"\n",(0,t.jsx)(n.li,{children:"Easy to test with mock implementations"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"controller-layer",children:"Controller Layer"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"gRPC integration with DI support"}),"\n",(0,t.jsx)(n.li,{children:"Clean error handling"}),"\n",(0,t.jsx)(n.li,{children:"Proper resource management"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"testing",children:"Testing"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Comprehensive unit tests"}),"\n",(0,t.jsx)(n.li,{children:"Mock dependencies"}),"\n",(0,t.jsx)(n.li,{children:"Clean test setup and teardown"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Always use interfaces for dependencies to make them mockable"}),"\n",(0,t.jsxs)(n.li,{children:["Properly handle resource cleanup in ",(0,t.jsx)(n.code,{children:"Shutdown"})," methods"]}),"\n",(0,t.jsx)(n.li,{children:"Use named dependencies when multiple instances of the same type are needed"}),"\n",(0,t.jsx)(n.li,{children:"Consider using mock implementations for external services in tests"}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},250065:function(e,n,i){i.d(n,{Z:function(){return c},a:function(){return r}});var s=i(667294);let t={},l=s.createContext(t);function r(e){let n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);