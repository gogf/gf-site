"use strict";(self.webpackChunkgf_site=self.webpackChunkgf_site||[]).push([["29927"],{358704(e,n,a){a.r(n),a.d(n,{metadata:()=>o,default:()=>m,frontMatter:()=>i,contentTitle:()=>d,toc:()=>l,assets:()=>s});var o=JSON.parse('{"id":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u94FE\u5F0F\u64CD\u4F5C/ORM\u94FE\u5F0F\u64CD\u4F5C-Handler\u7279\u6027","title":"ORM Model - Handler","description":"Using ORM chaining operations in the GoFrame framework to implement the Handler feature, examples demonstrate how to reuse common query logic and pagination operations, simplifying code and improving development efficiency. The Handler feature allows developers to define common logic and apply it to database models, achieving a cleaner and more maintainable code structure.","source":"@site/i18n/en/docusaurus-plugin-content-docs/version-2.8.x/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u94FE\u5F0F\u64CD\u4F5C/ORM\u94FE\u5F0F\u64CD\u4F5C-Handler\u7279\u6027.md","sourceDirName":"docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u94FE\u5F0F\u64CD\u4F5C","slug":"/docs/core/gdb-chaining-handler","permalink":"/en/2.8.x/docs/core/gdb-chaining-handler","draft":false,"unlisted":false,"editUrl":"https://github.com/gogf/gf-site/blob/main/versioned_docs/version-2.8.x/docs/\u6838\u5FC3\u7EC4\u4EF6/\u6570\u636E\u5E93ORM/ORM\u94FE\u5F0F\u64CD\u4F5C/ORM\u94FE\u5F0F\u64CD\u4F5C-Handler\u7279\u6027.md","tags":[],"version":"2.8.x","lastUpdatedBy":"John Guo","lastUpdatedAt":1742194305000,"sidebarPosition":14,"frontMatter":{"slug":"/docs/core/gdb-chaining-handler","title":"ORM Model - Handler","sidebar_position":14,"hide_title":true,"keywords":["GoFrame","GoFrame Framework","ORM Chaining Operation","Handler Feature","Query Example","Pagination Example","Code Reuse","Database Operations","Go Language","gdb Library"],"description":"Using ORM chaining operations in the GoFrame framework to implement the Handler feature, examples demonstrate how to reuse common query logic and pagination operations, simplifying code and improving development efficiency. The Handler feature allows developers to define common logic and apply it to database models, achieving a cleaner and more maintainable code structure."},"sidebar":"mainSidebar","previous":{"title":"ORM Model - Hook","permalink":"/en/2.8.x/docs/core/gdb-chaining-hook"},"next":{"title":"ORM Model - Lock","permalink":"/en/2.8.x/docs/core/gdb-chaining-locks"}}'),r=a(474848),t=a(28453);let i={slug:"/docs/core/gdb-chaining-handler",title:"ORM Model - Handler",sidebar_position:14,hide_title:!0,keywords:["GoFrame","GoFrame Framework","ORM Chaining Operation","Handler Feature","Query Example","Pagination Example","Code Reuse","Database Operations","Go Language","gdb Library"],description:"Using ORM chaining operations in the GoFrame framework to implement the Handler feature, examples demonstrate how to reuse common query logic and pagination operations, simplifying code and improving development efficiency. The Handler feature allows developers to define common logic and apply it to database models, achieving a cleaner and more maintainable code structure."},d,s={},l=[{value:"Example 1: Query",id:"example-1-query",level:2},{value:"Example 2: Pagination",id:"example-2-pagination",level:2}];function c(e){let n={code:"code",h2:"h2",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Handler"})," feature allows you to easily reuse common logic."]}),"\n",(0,r.jsx)(n.h2,{id:"example-1-query",children:"Example 1: Query"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'func AmountGreaterThan1000(m *gdb.Model) *gdb.Model {\n    return m.WhereGT("amount", 1000)\n}\n\nfunc PaidWithCreditCard(m *gdb.Model) *gdb.Model {\n    return m.Where("pay_mode_sign", "credit_card")\n}\n\nfunc PaidWithCod(m *gdb.Model) *gdb.Model {\n    return m.Where("pay_mode_sign", "cod")\n}\n\nfunc OrderStatus(statuses []string) func(m *gdb.Model) *gdb.Model {\n    return func(m *gdb.Model) *gdb.Model {\n        return m.Where("status", statuses)\n    }\n}\n\nvar (\n    m = g.Model("product_order")\n)\n\nm.Handler(AmountGreaterThan1000, PaidWithCreditCard).Scan(&orders)\n// SELECT * FROM `product_order` WHERE `amount`>1000 AND `pay_mode_sign`=\'credit_card\'\n// Find all credit card orders with an amount greater than 1000\n\nm.Handler(AmountGreaterThan1000, PaidWithCod).Scan(&orders)\n// SELECT * FROM `product_order` WHERE `amount`>1000 AND `pay_mode_sign`=\'cod\'\n// Find all COD orders with an amount greater than 1000\n\nm.Handler(AmountGreaterThan1000, OrderStatus([]string{"paid", "shipped"})).Scan(&orders)\n// SELECT * FROM `product_order` WHERE `amount`>1000 AND `status` IN(\'paid\',\'shipped\')\n// Find all orders with an amount greater than 1000 that are paid or shipped\n'})}),"\n",(0,r.jsx)(n.h2,{id:"example-2-pagination",children:"Example 2: Pagination"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"func Paginate(r *ghttp.Request) func(m *gdb.Model) *gdb.Model {\n    return func(m *gdb.Model) *gdb.Model {\n        type Pagination struct {\n            Page int\n            Size int\n        }\n        var pagination Pagination\n        _ = r.Parse(&pagination)\n        switch {\n        case pagination.Size > 100:\n            pagination.Size = 100\n\n        case pagination.Size <= 0:\n            pagination.Size = 10\n        }\n        return m.Page(pagination.Page, pagination.Size)\n    }\n}\n\nm.Handler(Paginate(r)).Scan(&users)\nm.Handler(Paginate(r)).Scan(&articles)\n"})})]})}function m(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453(e,n,a){a.d(n,{R:()=>i,x:()=>d});var o=a(296540);let r={},t=o.createContext(r);function i(e){let n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);