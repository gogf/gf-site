<!doctype html><html lang=en-US dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/开发工具/代码生成-gen/接口规范-gen ctrl" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>Controller Generating | GoFrame - A powerful framework for faster, easier, and more efficient project development</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://goframe.org/en/docs/cli/gen-ctrl><meta data-rh=true property=og:locale content=en_US><meta data-rh=true property=og:locale:alternate content=zh_Hans><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Controller Generating | GoFrame - A powerful framework for faster, easier, and more efficient project development"><meta data-rh=true name=description content="Generate API interface controllers and SDK code using GoFrame to help developers reduce repetitive code work, standardize API and controller code structure, and improve collaborative development efficiency. Additionally, it offers the functionality to generate HTTP SDK code for easy internal and external service calls. Code generation can be performed using command-line mode and automatic generation mode, and detailed command parameter instructions and usage examples are provided."><meta data-rh=true property=og:description content="Generate API interface controllers and SDK code using GoFrame to help developers reduce repetitive code work, standardize API and controller code structure, and improve collaborative development efficiency. Additionally, it offers the functionality to generate HTTP SDK code for easy internal and external service calls. Code generation can be performed using command-line mode and automatic generation mode, and detailed command parameter instructions and usage examples are provided."><meta data-rh=true name=keywords content="GoFrame,API interface,HTTP development,GRPC,controller generation,SDK automation,code specification,collaborative development,code generation,project management"><link data-rh=true rel=icon href=/en/img/favicon.ico><link data-rh=true rel=canonical href=https://goframe.org/en/docs/cli/gen-ctrl><link data-rh=true rel=alternate href=https://goframe.org/docs/cli/gen-ctrl hreflang=zh-Hans><link data-rh=true rel=alternate href=https://goframe.org/en/docs/cli/gen-ctrl hreflang=en-US><link data-rh=true rel=alternate href=https://goframe.org/docs/cli/gen-ctrl hreflang=x-default><link data-rh=true rel=preconnect href=https://ZQUL8VI47R-dsn.algolia.net crossorigin><link rel=search type=application/opensearchdescription+xml title="GoFrame - A powerful framework for faster, easier, and more efficient project development" href=/en/opensearch.xml><script src=https://hm.baidu.com/hm.js?38f38a0626fd7805722db06243cd0fa7 async></script><link rel=stylesheet href=/en/assets/css/styles.b09a3e0d.css><script src=/en/assets/js/main.9d91b445.js defer></script><script src=/en/assets/js/runtime~main.ae76532e.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/en/><div class=navbar__logo><img src=/en/img/logo2.png alt="GoFrame Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/en/img/logo2.png alt="GoFrame Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" sidebarid=quickSidebar href=/en/quick/install>Quick Start</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/en/docs/core>Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button sidebarid=courseSidebar href=/en/course>Courses</a><ul class=dropdown__menu><li><a class=dropdown__link sidebarid=courseSidebar href=/en/course/bilibili-video>Video Tutorial(Chinese)</a><li><a class=dropdown__link sidebarid=courseStarBookSidebar href=/en/course/starbook>Practical Tutorial - Star English Book</a><li><a class=dropdown__link sidebarid=courseProximaBookSidebar href=/en/course/proxima-book>Microservice Tutorial - Proxima Book</a></ul></div><a class="navbar__item navbar__link" href=/en/examples/grpc>Examples</a><a class="navbar__item navbar__link" href=/en/showcase>Show Case</a><a class="navbar__item navbar__link" href=/en/release/note>Releases</a><a class="navbar__item navbar__link" sidebarid=communitySidebar href=/en/share/group>Community</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/en/docs/cli/gen-ctrl>2.8.x(Latest)</a><ul class=dropdown__menu><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/en/docs/cli/gen-ctrl>2.8.x(Latest)</a><li><a class=dropdown__link href=/en/2.7.x/docs/cli/gen-ctrl>2.7.x</a><li><a class=dropdown__link href=/en/2.6.x/项目开发>2.6.x</a><li><a class=dropdown__link href=/en/2.5.x/项目开发>2.5.x</a><li><a class=dropdown__link href=/en/2.4.x/开发工具>2.4.x</a><li><a class=dropdown__link href=/en/2.3.x/开发工具>2.3.x</a><li><a class=dropdown__link href=/en/2.2.x/开发工具>2.2.x</a><li><a class=dropdown__link href=/en/2.1.x/开发工具>2.1.x</a><li><a class=dropdown__link href=/en/2.0.x/开发工具>2.0.x</a><li><a class=dropdown__link href=/en/1.16.x/开发工具>1.16.x</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/docs/cli/gen-ctrl rel="noopener noreferrer" class=dropdown__link lang=zh-Hans>简体中文</a><li><a href=/en/docs/cli/gen-ctrl rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en-US>English</a></ul></div><a href=https://github.com/gogf/gf target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/en/docs/cli>CLI Tool</a><button aria-label="Collapse sidebar category 'CLI Tool'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/install>Installation</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/version>Version Check</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/up>Version Upgrade</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/init>Project Scaffold</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/build>Cross-Compiling</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/en/docs/cli/gen>Code Generating</a><button aria-label="Collapse sidebar category 'Code Generating'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/en/docs/cli/gen-ctrl>Controller Generating</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/gen-dao>Dao/Do/Entity Generating</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/gen-service>Service Generating</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/gen-enums>Enums Maintenance</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/gen-pb>Protobuf Compilation</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/gen-pbentity>DB Table To Protobuf</a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/run>Auto Compiling</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/pack>Resource Packing</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/docker>Image Building</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/fix>Compatibility Fix</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/cli/help>Help Info</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/core>Core Components 🔥</a><button aria-label="Expand sidebar category 'Core Components 🔥'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/components>Components Category</a><button aria-label="Expand sidebar category 'Components Category'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/web>WEB Service Development</a><button aria-label="Expand sidebar category 'WEB Service Development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/micro-service>Microservice Development</a><button aria-label="Expand sidebar category 'Microservice Development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/obs>Service Observability</a><button aria-label="Expand sidebar category 'Service Observability'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/en/docs/faq>Frequently Asked Questions (FAQ)</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/deploy>Project Deployment</a><button aria-label="Expand sidebar category 'Project Deployment'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/design>Framework Design</a><button aria-label="Expand sidebar category 'Framework Design'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/other>Other Documents</a><button aria-label="Expand sidebar category 'Other Documents'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/en/docs/changelog>Docs Changelog</a></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/en/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/en/docs/cli><span itemprop=name>CLI Tool</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/en/docs/cli/gen><span itemprop=name>Code Generating</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Controller Generating</span><meta itemprop=position content=3></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.8.x(Latest)</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>tip</div><div class=admonitionContent_BuS1><p>This feature is available from version <code>v2.5</code>. Currently, this command only supports <code>HTTP</code> interface development; for <code>GRPC</code> parts, please refer to the <code>gen pb</code> command. In the future, <code>HTTP</code> and <code>GRPC</code> may be unified to use this command to generate controller and <code>SDK</code> source code.</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=introduction>Introduction<a href=#introduction class=hash-link aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=pain-points-solved>Pain Points Solved<a href=#pain-points-solved class=hash-link aria-label="Direct link to Pain Points Solved" title="Direct link to Pain Points Solved">​</a></h3>
<p>When developing a project, it often starts with designing the <code>API</code> interface based on business requirements and scenarios, using <code>proto</code> or <code>golang struct</code> to design the <code>API</code> input and output. Then, a corresponding controller implementation is created, and an <code>SDK</code> (under the condition of the Golang language) may also be provided for internal/external service calls. The following pain points may arise during development:</p>
<ul>
<li><strong>Repetitive code work is cumbersome</strong>. After creating input and output definition files in the <code>API</code>, corresponding files need to be created in the controller directory, along with controller initialization code. The operation of repeatedly copying input and output structure names from the <code>API</code> code is cumbersome.</li>
<li><strong>No reliable normative constraints between the API and controller</strong>. Apart from certain naming constraints for the <code>API</code>, there are no constraints for controller creation and method naming. The high flexibility makes it difficult to enforce consistency between API structure names and controller method names, leading to potential maintenance costs as interfaces increase.</li>
<li><strong>High probability of code file conflicts in team development collaboration</strong>. When multiple people execute changes to a file, the probability of file conflicts increases, leading to unnecessary energy expenditure in resolving these conflicts.</li>
<li><strong>Lack of automated API HTTP SDK generation tool</strong>. After developing the <code>API</code>, immediately providing it for internal or external calls often requires manually maintaining the <code>SDK</code> code, which can be time-consuming and costly.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=command-features>Command Features<a href=#command-features class=hash-link aria-label="Direct link to Command Features" title="Direct link to Command Features">​</a></h3>
<ul>
<li>Standardizes API definition and controller file naming, as well as controller implementation method naming.</li>
<li>Establishes the association between API definitions and controller code, facilitating quick location of API implementations.</li>
<li>Automatically generates controller interface, controller initialization files and code, and interface initialization code based on API definitions.</li>
<li>Automatically generates easy-to-use HTTP SDK code according to API definitions. This feature is configurable and turned off by default.</li>
<li>Supports <code>File Watch</code> automation mode: automatically incrementally updates corresponding controller and <code>SDK</code> code when an API structure definition file changes.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=pre-conditions>Pre-conditions<a href=#pre-conditions class=hash-link aria-label="Direct link to Pre-conditions" title="Direct link to Pre-conditions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=important-norms->Important Norms 🔥<a href=#important-norms- class=hash-link aria-label="Direct link to Important Norms 🔥" title="Direct link to Important Norms 🔥">​</a></h3>
<p>One of the purposes of this command is to standardize <code>api</code> code writing, which requires some important norms to be understood (otherwise the code cannot be generated):</p>
<ul>
<li><code>api</code> layer's API definition file path needs to satisfy <code>/api/module/version/definition_file.go</code>, for example: <code>/api/user/v1/user.go</code>, <code>/api/user/v1/user_delete.go</code>, etc.<!-- -->
<ul>
<li><strong>Module</strong> refers to the division of <code>API</code> modules, which can be split according to different <strong>business attributes</strong> for easier aggregation and maintenance. Modules can also be considered as specific business resources.</li>
<li><strong>Version</strong> is usually defined as <code>v1</code>/<code>v2</code>, etc., for compatibility version control of <code>API</code>. Different versions are marked by different version numbers when compatibility updates occur. The first version is managed with <code>v1</code> by default.</li>
<li><strong>Definition file</strong> refers to the <code>API</code> input and output definition files, where each <code>API</code> is usually maintained independently in a separate <code>go</code> file. Of course, it also supports putting multiple <code>APIs</code> in one <code>go</code> file for unified maintenance.</li>
</ul>
</li>
<li>Structure names in <code>api</code> definition should conform to the naming convention of <code>Operation+Req</code> and <code>Operation+Res</code>, e.g., <code>GetOneReq/GetOneRes</code>, <code>GetListReq/GetListRes</code>, <code>DeleteReq/DeleteRes</code>, etc.<!-- -->
<ul>
<li>The operation refers to the current <code>API</code> module's operation name, typically corresponding to <code>CRUD</code> as: <code>Create</code>, <code>Read</code>, <code>Update</code>, <code>Delete</code>.</li>
</ul>
</li>
</ul>
<p>Below is a <code>Hello</code> interface example in the project template:</p>
<p><img decoding=async loading=lazy src=/en/assets/images/71be1e0ac8d8eaa7794a476086c110c2-896850476e276db9cb7fba0526d3a75e.png width=3072 height=1748 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=suggested-naming>Suggested Naming<a href=#suggested-naming class=hash-link aria-label="Direct link to Suggested Naming" title="Direct link to Suggested Naming">​</a></h3>
<p>We provide some suggested naming conventions for common API definitions for your reference:</p>
<table><thead><tr><th>Operation Name<th>Suggested Naming<th>Notes<tbody><tr><td><strong>Query List</strong><td><code>GetListReq/Res</code><td>Usually to fetch paginated query data records from the database<tr><td><strong>Query Details</strong><td><code>GetOneReq/Res</code><td>Usually requires passing the primary key condition to query record details from the database<tr><td><strong>Create Resource</strong><td><code>CreateReq/Res</code><td>Typically used to insert one or more data records into a table<tr><td><strong>Modify Resource</strong><td><code>UpdateReq/Res</code><td>Typically used to modify one or more data records in a table according to certain conditions<tr><td><strong>Delete Resource</strong><td><code>DeleteReq/Res</code><td>Typically used to delete one or more data records in a table according to certain conditions</table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=command-usage>Command Usage<a href=#command-usage class=hash-link aria-label="Direct link to Command Usage" title="Direct link to Command Usage">​</a></h2>
<p>This command analyzes the code within the specified <code>api</code> API definition directory and automatically generates the corresponding controller/<code>SDK Go</code> code files.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=manual-mode>Manual Mode<a href=#manual-mode class=hash-link aria-label="Direct link to Manual Mode" title="Direct link to Manual Mode">​</a></h3>
<p>To manually execute the command line, run <code>gf gen ctrl</code> in the project's root directory. It will completely scan the <code>api</code> API definition directory and generate corresponding code.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">$ gf gen ctrl -h</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">USAGE</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    gf gen ctrl [OPTION]</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">OPTION</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    -s, --srcFolder       source folder path to be parsed. default: api</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    -d, --dstFolder       destination folder path storing automatically generated go files. default: internal/controller</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    -w, --watchFile       used in file watcher, it re-generates go files only if given file is under srcFolder</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    -k, --sdkPath         also generate SDK go files for api definitions to specified directory</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    -v, --sdkStdVersion   use standard version prefix for generated sdk request path</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    -n, --sdkNoV1         do not add version suffix for interface module name if version is v1</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    -c, --clear           auto delete generated and unimplemented controller go files if api definitions are missing</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    -m, --merge           generate all controller files into one go file by name of api definition source go file</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    -h, --help            more information about this command</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">EXAMPLE</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    gf gen ctrl</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>tip</div><div class=admonitionContent_BuS1><p>If using the project's recommended framework scaffolding and <code>make</code> tool is installed, <code>make ctrl</code> shortcut can also be used.</div></div>
<p>Parameter explanation:</p>
<table><thead><tr><th>Name<th>Required<th>Default Value<th>Meaning<tbody><tr><td><code>srcFolder</code><td>No<td><code>api</code><td>Points to the directory address of <code>api</code> API definition files<tr><td><code>dstFolder</code><td>No<td><code>internal/controller</code><td>Points to the directory where the generated controller files are stored<tr><td><code>watchFile</code><td>No<td><td>Used in IDE file monitoring, for automatic generation when files change<tr><td><code>sdkPath</code><td>No<td><td>If <code>HTTP SDK</code> needs to be generated, this parameter specifies the directory path for storing generated SDK code<tr><td><code>sdkStdVersion</code><td>No<td><code>false</code><td>Whether the generated <code>HTTP SDK</code> uses standard version management. It will automatically add a version routing prefix according to the <code>API</code> version. For example, <code>v1</code> version API will have a <code>/api/v1</code> request routing prefix added automatically.<tr><td><code>sdkNoV1</code><td>No<td><code>false</code><td>In the generated <code>HTTP SDK</code>, whether the interface module name should not have the <code>V1</code> suffix when the interface is version <code>v1</code>.<tr><td><code>clear</code><td>No<td><code>false</code><td>Whether to delete generated controller interface files in <code>internal/controller</code> when corresponding <code>api</code> layer definitions don't exist.<tr><td><code>merge</code><td>No<td><code>false</code><td>Controls whether to generate <code>ctrl</code> controller code files according to API layer files rather than splitting API interfaces into different implementation files by default.</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=automatic-mode-recommended>Automatic Mode (Recommended)<a href=#automatic-mode-recommended class=hash-link aria-label="Direct link to Automatic Mode (Recommended)" title="Direct link to Automatic Mode (Recommended)">​</a></h3>
<p>If using <code>GolandIDE</code>, the provided configuration file, <a href=/en/assets/files/gen-ctrl-watchers-f1a1394efa52b1e0346499277a717078.xml target=_blank>watchers.xml</a>, can be used for automatically generating interface files when code file modifications are detected. The usage is shown in the image below:</p>
<p><img decoding=async loading=lazy src=/en/assets/images/7d15b228b1ee57f8f34254a0413f4fc0-927bc14651b46f7faf674b3547e9596b.png width=1964 height=1424 class=img_ev3q></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=usage-example>Usage Example<a href=#usage-example class=hash-link aria-label="Direct link to Usage Example" title="Direct link to Usage Example">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=automatically-generated-api-definition-files>Automatically generated API definition files<a href=#automatically-generated-api-definition-files class=hash-link aria-label="Direct link to Automatically generated API definition files" title="Direct link to Automatically generated API definition files">​</a></h3>
<p><img decoding=async loading=lazy src=/en/assets/images/636aedc34da9bad1f84545dcfbeb38e6-d06d6bc2521ff8f6387f69c0085e254c.png width=3840 height=2110 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=automatically-generated-controller-code-files>Automatically generated controller code files<a href=#automatically-generated-controller-code-files class=hash-link aria-label="Direct link to Automatically generated controller code files" title="Direct link to Automatically generated controller code files">​</a></h3>
<p><img decoding=async loading=lazy src=/en/assets/images/cff8e2509fc89f6f4c4c0c82bb753334-7c6b22a6514d8d9e6f12a8fd8581f868.png width=3840 height=2110 class=img_ev3q></p>
<p><img decoding=async loading=lazy src=/en/assets/images/e2219959e53c38a80d37254cd3e9e9de-7fcc741e9d6a1e53d28170d5cc4238db.png width=3840 height=2110 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=automatically-generated-http-sdk-code-files>Automatically generated <code>HTTP SDK</code> code files<a href=#automatically-generated-http-sdk-code-files class=hash-link aria-label="Direct link to automatically-generated-http-sdk-code-files" title="Direct link to automatically-generated-http-sdk-code-files">​</a></h3>
<p><img decoding=async loading=lazy src=/en/assets/images/f2f5c6793e4aef5ea3c2004ce67edf7b-cddc3cfe4b549a35c5491e2fdd27debf.png width=3840 height=2110 class=img_ev3q></p>
<p><img decoding=async loading=lazy src=/en/assets/images/dd2dac2338ebf838ba317f64b32f5a5f-af47feea522b31e519dcfbef41cb8b7d.png width=3840 height=2110 class=img_ev3q></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=faq>FAQ<a href=#faq class=hash-link aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=why-does-each-api-interface-generate-a-controller-file-instead-of-merging-into-one-controller-file>Why does each <code>api</code> interface generate a <code>controller</code> file instead of merging into one <code>controller</code> file?<a href=#why-does-each-api-interface-generate-a-controller-file-instead-of-merging-into-one-controller-file class=hash-link aria-label="Direct link to why-does-each-api-interface-generate-a-controller-file-instead-of-merging-into-one-controller-file" title="Direct link to why-does-each-api-interface-generate-a-controller-file-instead-of-merging-into-one-controller-file">​</a></h3>
<p><img decoding=async loading=lazy src=/en/assets/images/image2023-6-15_16-29-12-7c6b22a6514d8d9e6f12a8fd8581f868.png width=3840 height=2110 class=img_ev3q></p>
<p>For small or personal simple projects, or projects with only a few interfaces in an <code>api</code> module, this management style might not be an issue, and code files can be maintained according to personal preference. Here, we describe the scenario for more complex business projects or enterprise-level projects where an <code>api</code> module has many interfaces.</p>
<ul>
<li>
<p>First, when developing <code>api</code> interfaces, locating <code>api</code> interface implementation is clearer and not about searching through a thousand lines of code in a file.</p>
</li>
<li>
<p>Moreover, in a collaborative project, if multiple people modify the same <code>controller</code> file, file conflicts easily arise in version management. Maintaining one <code>api</code> interface with a corresponding <code>controller</code> implementation file can minimize file conflict probabilities during collaboration, as most developers prefer not to waste valuable time resolving file conflicts again and again.</p>
</li>
<li>
<p>Finally, the <code>controller</code> layer code has its own responsibilities:</p>
<ul>
<li>Validate input parameters: Client-submitted parameters are not trusted and usually require data validation in most scenarios.</li>
<li>Implement the interface logic: Either directly implement the interface logic in the <code>controller</code> or call one or more <code>service</code> interfaces or third-party service interfaces to implement the logic. Avoid implementing <code>api</code> interface logic in <code>service</code> layers as <code>api</code> interfaces are tied to specific business scenarios and are not reusable. 💀 <strong>A common mistake is directly passing the request through the <code>controller</code> to the <code>service</code> interface, making the <code>controller</code> seemingly redundant and the <code>service</code> layer's implementation more cumbersome and non-reusable.</strong> 💀</li>
<li>Generate return data: Organize internal result data and generate the returning data API definition.</li>
</ul>
</li>
<li>
<p>These responsibilities imply that <code>controller</code> code is also relatively complex. Maintaining them separately can alleviate developer mental burden and facilitate clear maintenance of <code>api</code> interface logic.</p>
</li>
</ul>
<p><strong>Some Suggestions</strong>:</p>
<p>If there are too many interface files in an <code>api</code> module, consider further splitting complex <code>api</code> modules into sub-modules. This can decouple complex <code>api</code> modules, and maintaining <code>api</code> API definitions and <code>controller</code> interface implementation files through multiple directories will make the structure clearer and facilitate better collaboration and version management.</p>
<p>After reviewing the design, if you still prefer managing all interfaces using a single source file, consider the <code>merge</code> parameter.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=why-is-there-an-empty-go-file-in-the-corresponding-controller-module-generated-from-the-api-module>Why is there an empty <code>go</code> file in the corresponding <code>controller</code> module generated from the <code>api</code> module?<a href=#why-is-there-an-empty-go-file-in-the-corresponding-controller-module-generated-from-the-api-module class=hash-link aria-label="Direct link to why-is-there-an-empty-go-file-in-the-corresponding-controller-module-generated-from-the-api-module" title="Direct link to why-is-there-an-empty-go-file-in-the-corresponding-controller-module-generated-from-the-api-module">​</a></h3>
<p><strong>For Example</strong>:</p>
<p><img decoding=async loading=lazy src=/en/assets/images/a5b84cce8be1a8b3d563102e7a4c81dd-a2f3a58aea952a5691101361cf80d673.png width=1512 height=1112 class=img_ev3q></p>
<p><strong>Explanation</strong>:</p>
<p>Each <code>api</code> module generates an empty <code>go</code> file under the module's <code>controller</code>. This file is generated only once, allowing users to fill in necessary pre-defined code content, such as internal variable definitions, constants, data structures, or package initialization <code>init</code> method definitions, etc., within that module <code>controller</code>. <em>We advocate for good code management practices, suggesting module <strong>pre-defined content</strong> should be consolidated in the module-named <code>go</code> file (<code>module.go</code>) rather than scattered across different <code>go</code> files, to better maintain the code.</em></p>
<p>If there is currently no need for custom code content in the <code>controller</code>, just leave the file empty for future extensions.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href="https://github.com/gogf/gf-site/blob/main/docs/docs/开发工具/代码生成-gen/接口规范-gen ctrl.md" target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2024-12-10T15:24:56.000Z itemprop=dateModified>Dec 10, 2024</time></b> by <b>Terry</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/en/docs/cli/gen><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Code Generating</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/en/docs/cli/gen-dao><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Dao/Do/Entity Generating</div></a></nav><div class=docusaurus-mt-lg></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#introduction class="table-of-contents__link toc-highlight">Introduction</a><ul><li><a href=#pain-points-solved class="table-of-contents__link toc-highlight">Pain Points Solved</a><li><a href=#command-features class="table-of-contents__link toc-highlight">Command Features</a></ul><li><a href=#pre-conditions class="table-of-contents__link toc-highlight">Pre-conditions</a><ul><li><a href=#important-norms- class="table-of-contents__link toc-highlight">Important Norms 🔥</a><li><a href=#suggested-naming class="table-of-contents__link toc-highlight">Suggested Naming</a></ul><li><a href=#command-usage class="table-of-contents__link toc-highlight">Command Usage</a><ul><li><a href=#manual-mode class="table-of-contents__link toc-highlight">Manual Mode</a><li><a href=#automatic-mode-recommended class="table-of-contents__link toc-highlight">Automatic Mode (Recommended)</a></ul><li><a href=#usage-example class="table-of-contents__link toc-highlight">Usage Example</a><ul><li><a href=#automatically-generated-api-definition-files class="table-of-contents__link toc-highlight">Automatically generated API definition files</a><li><a href=#automatically-generated-controller-code-files class="table-of-contents__link toc-highlight">Automatically generated controller code files</a><li><a href=#automatically-generated-http-sdk-code-files class="table-of-contents__link toc-highlight">Automatically generated <code>HTTP SDK</code> code files</a></ul><li><a href=#faq class="table-of-contents__link toc-highlight">FAQ</a><ul><li><a href=#why-does-each-api-interface-generate-a-controller-file-instead-of-merging-into-one-controller-file class="table-of-contents__link toc-highlight">Why does each <code>api</code> interface generate a <code>controller</code> file instead of merging into one <code>controller</code> file?</a><li><a href=#why-is-there-an-empty-go-file-in-the-corresponding-controller-module-generated-from-the-api-module class="table-of-contents__link toc-highlight">Why is there an empty <code>go</code> file in the corresponding <code>controller</code> module generated from the <code>api</code> module?</a></ul></ul></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>Follow Us On WeChat</div><ul class="footer__items clean-list"><li class=footer__item><img src=/img/wechat.jpg width=110></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright ©2024 GoFrame OpenSource Team</div></div></div></footer></div>