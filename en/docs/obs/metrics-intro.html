<!doctype html><html lang=en-US dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/服务可观测性/服务监控告警/监控告警-基本介绍" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>Metrics - Intro | GoFrame - A powerful framework for faster, easier, and more efficient project development</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://goframe.org/en/docs/obs/metrics-intro><meta data-rh=true property=og:locale content=en_US><meta data-rh=true property=og:locale:alternate content=zh_Hans><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Metrics - Intro | GoFrame - A powerful framework for faster, easier, and more efficient project development"><meta data-rh=true name=description content="The fundamentals of monitoring alerts in the GoFrame framework, focusing on OpenTelemetry's design specifications and components related to monitoring and alerting. Covers the relationships and data flow among components like Meter Provider, Meter, and Instrument. The article also explains how the framework achieves observability through the gmetric component by adopting an abstract decoupling design, supporting various types of synchronous and asynchronous metrics, aiding developers in handling and extending monitoring functionalities flexibly."><meta data-rh=true property=og:description content="The fundamentals of monitoring alerts in the GoFrame framework, focusing on OpenTelemetry's design specifications and components related to monitoring and alerting. Covers the relationships and data flow among components like Meter Provider, Meter, and Instrument. The article also explains how the framework achieves observability through the gmetric component by adopting an abstract decoupling design, supporting various types of synchronous and asynchronous metrics, aiding developers in handling and extending monitoring functionalities flexibly."><meta data-rh=true name=keywords content="GoFrame,GoFrame Framework,Monitoring Alerts,OpenTelemetry,Metric Types,Plugin Interface,Metrics Standard,Abstract Decoupling Design,Synchronous Metrics,Asynchronous Metrics"><link data-rh=true rel=icon href=/en/img/favicon.ico><link data-rh=true rel=canonical href=https://goframe.org/en/docs/obs/metrics-intro><link data-rh=true rel=alternate href=https://goframe.org/docs/obs/metrics-intro hreflang=zh-Hans><link data-rh=true rel=alternate href=https://goframe.org/en/docs/obs/metrics-intro hreflang=en-US><link data-rh=true rel=alternate href=https://goframe.org/docs/obs/metrics-intro hreflang=x-default><link data-rh=true rel=preconnect href=https://ZQUL8VI47R-dsn.algolia.net crossorigin><link rel=search type=application/opensearchdescription+xml title="GoFrame - A powerful framework for faster, easier, and more efficient project development" href=/en/opensearch.xml><script src=https://hm.baidu.com/hm.js?38f38a0626fd7805722db06243cd0fa7 async></script><link rel=stylesheet href=/en/assets/css/styles.b09a3e0d.css><script src=/en/assets/js/main.9d91b445.js defer></script><script src=/en/assets/js/runtime~main.ae76532e.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/en/><div class=navbar__logo><img src=/en/img/logo2.png alt="GoFrame Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/en/img/logo2.png alt="GoFrame Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" sidebarid=quickSidebar href=/en/quick/install>Quick Start</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/en/docs/core>Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button sidebarid=courseSidebar href=/en/course>Courses</a><ul class=dropdown__menu><li><a class=dropdown__link sidebarid=courseSidebar href=/en/course/bilibili-video>Video Tutorial(Chinese)</a><li><a class=dropdown__link sidebarid=courseStarBookSidebar href=/en/course/starbook>Practical Tutorial - Star English Book</a><li><a class=dropdown__link sidebarid=courseProximaBookSidebar href=/en/course/proxima-book>Microservice Tutorial - Proxima Book</a></ul></div><a class="navbar__item navbar__link" href=/en/examples/grpc>Examples</a><a class="navbar__item navbar__link" href=/en/showcase>Show Case</a><a class="navbar__item navbar__link" href=/en/release/note>Releases</a><a class="navbar__item navbar__link" sidebarid=communitySidebar href=/en/share/group>Community</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/en/docs/obs/metrics-intro>2.8.x(Latest)</a><ul class=dropdown__menu><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/en/docs/obs/metrics-intro>2.8.x(Latest)</a><li><a class=dropdown__link href=/en/2.7.x/docs/obs/metrics-intro>2.7.x</a><li><a class=dropdown__link href=/en/2.6.x/项目开发>2.6.x</a><li><a class=dropdown__link href=/en/2.5.x/项目开发>2.5.x</a><li><a class=dropdown__link href=/en/2.4.x/开发工具>2.4.x</a><li><a class=dropdown__link href=/en/2.3.x/开发工具>2.3.x</a><li><a class=dropdown__link href=/en/2.2.x/开发工具>2.2.x</a><li><a class=dropdown__link href=/en/2.1.x/开发工具>2.1.x</a><li><a class=dropdown__link href=/en/2.0.x/开发工具>2.0.x</a><li><a class=dropdown__link href=/en/1.16.x/开发工具>1.16.x</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/docs/obs/metrics-intro rel="noopener noreferrer" class=dropdown__link lang=zh-Hans>简体中文</a><li><a href=/en/docs/obs/metrics-intro rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en-US>English</a></ul></div><a href=https://github.com/gogf/gf target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/cli>CLI Tool</a><button aria-label="Expand sidebar category 'CLI Tool'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/core>Core Components 🔥</a><button aria-label="Expand sidebar category 'Core Components 🔥'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/components>Components Category</a><button aria-label="Expand sidebar category 'Components Category'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/web>WEB Service Development</a><button aria-label="Expand sidebar category 'WEB Service Development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/micro-service>Microservice Development</a><button aria-label="Expand sidebar category 'Microservice Development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/en/docs/obs>Service Observability</a><button aria-label="Collapse sidebar category 'Service Observability'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/en/docs/obs/tracing>Service Tracing</a><button aria-label="Expand sidebar category 'Service Tracing'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/en/docs/obs/metrics>Service Metrics</a><button aria-label="Collapse sidebar category 'Service Metrics'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/en/docs/obs/metrics-intro>Metrics - Intro</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/obs/metrics-example>Metrics - Usage</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/obs/metrics-sync>Metrics - Synchronous Metrics</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/obs/metrics-async>Metrics - Asynchronous Metrics</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/obs/metrics-attributes>Metrics - Attributes</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/obs/metrics-builtin>Metrics - Built-in Metrics</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/obs/metrics-components>Metrics - Component Metrics</a></ul></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/en/docs/faq>Frequently Asked Questions (FAQ)</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/deploy>Project Deployment</a><button aria-label="Expand sidebar category 'Project Deployment'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/design>Framework Design</a><button aria-label="Expand sidebar category 'Framework Design'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/other>Other Documents</a><button aria-label="Expand sidebar category 'Other Documents'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/en/docs/changelog>Docs Changelog</a></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/en/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/en/docs/obs><span itemprop=name>Service Observability</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/en/docs/obs/metrics><span itemprop=name>Service Metrics</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Metrics - Intro</span><meta itemprop=position content=3></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.8.x(Latest)</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p>Before introducing the framework's monitoring alerts, we cannot avoid introducing industry standard observability and the design and specifications of <code>OpenTelemetry</code> concerning monitoring alerts. <code>OpenTelemetry</code> has a lot of content on this front, and we will highlight some key points.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=opentelemetry>OpenTelemetry<a href=#opentelemetry class=hash-link aria-label="Direct link to OpenTelemetry" title="Direct link to OpenTelemetry">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=related-components>Related Components<a href=#related-components class=hash-link aria-label="Direct link to Related Components" title="Direct link to Related Components">​</a></h3>
<p>Let's look at a diagram showing the relationships between <code>OpenTelemetry</code> components. In the implementation of the <code>OpenTelemetry Metrics</code> standard, the following components are primarily included.</p>
<p><img decoding=async loading=lazy src=/en/assets/images/f7c048b9050aa8d6c17f85e1dc1c0540-d6f63afe045891686e20a550f648cda4.png width=1596 height=804 class=img_ev3q></p>
<p>In the implementation of standardized documentation, each component is typically designed using interfaces to enhance scalability:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=meter-provider>Meter Provider<a href=#meter-provider class=hash-link aria-label="Direct link to Meter Provider" title="Direct link to Meter Provider">​</a></h4>
<p>Used for interfacing with global management of <code>Meter</code> creation, akin to a global monitoring metrics management factory.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=meter>Meter<a href=#meter class=hash-link aria-label="Direct link to Meter" title="Direct link to Meter">​</a></h4>
<p>Used for interfacing with the creation and management of global <code>Instruments</code>. Different <code>Meters</code> can be regarded as different program components. For example, various components in a framework can be seen as different <code>Meters</code>, like <code>gclient</code> and <code>ghttp</code> being two different <code>Meters</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=instrument>Instrument<a href=#instrument class=hash-link aria-label="Direct link to Instrument" title="Direct link to Instrument">​</a></h4>
<p>Used to manage the various types of metrics under different components, such as <code>http.server.request.duration</code>, <code>http.server.request.body_size</code>, etc., under <code>ghttp</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=measurements>Measurements<a href=#measurements class=hash-link aria-label="Direct link to Measurements" title="Direct link to Measurements">​</a></h4>
<p>The specific <code>DataPoint</code> metrics data reported for metrics, consisting of a series of numerical items.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=view>View<a href=#view class=hash-link aria-label="Direct link to View" title="Direct link to View">​</a></h4>
<p>Implements operations like calculation, aggregation, filtering, and modification on <code>Measurements</code>. Since metrics are usually <strong>numerical types</strong>, the default <code>View</code> is typically used.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=metric-reader>Metric Reader<a href=#metric-reader class=hash-link aria-label="Direct link to Metric Reader" title="Direct link to Metric Reader">​</a></h4>
<p>Used for implementing data flow readings of metrics and defining specific metric data structures internally. The <code>OpenTelemetry</code> community provides various flexible <code>Reader</code> implementations, such as <code>PeridRader</code>, <code>ManualReader</code>, etc.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=metric-exporter>Metric Exporter<a href=#metric-exporter class=hash-link aria-label="Direct link to Metric Exporter" title="Direct link to Metric Exporter">​</a></h4>
<p>The <code>Exporter</code> is used to expose local metrics to corresponding third-party vendors and define whether data transfer is <code>push</code> or <code>pull</code>. <code>Exporter</code> leverages <code>Reader</code>, and while there are only several ways for <code>Reader</code>, <code>Exporter</code> varies by vendor, with many available, such as <code>prometheus</code>, <code>zipkin</code>, etc.</p>
<p>The data flow of multiple <code>DataPoints</code> for one <code>Instrument</code> is shown below:</p>
<p><img decoding=async loading=lazy src=/en/assets/images/5d476c4969a41f996ac8c39a6d841f81-5e8613efc6f4ff59360078ee3f424969.png width=1600 height=317 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=related-types>Related Types<a href=#related-types class=hash-link aria-label="Direct link to Related Types" title="Direct link to Related Types">​</a></h3>
<p>The <code>OpenTelemetry</code> community implementation aims to meet various usage scenarios, hence the detailed granularity of type designs. It includes <code>int64</code> and <code>float64</code> data types and encompasses both <strong>synchronous</strong> and <strong>asynchronous</strong> metric types.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=synchronous-types>Synchronous Types<a href=#synchronous-types class=hash-link aria-label="Direct link to Synchronous Types" title="Direct link to Synchronous Types">​</a></h4>
<p><strong>Synchronous types</strong> are used for promptly exposing monitoring metrics. Regardless of whether the <code>metrics reader</code> employs the metric, the calculation results are completed and ready for reading. For example, HTTP request total count and request size must be recorded in the monitoring metrics during the request execution flow, making them suitable for management as synchronous metrics.</p>
<table><thead><tr><th><strong>Type</strong><th><strong>Description</strong><th><strong>Example</strong><tbody><tr><td><code>Int64Counter</code><td><code>int64</code> metrics that only increase.<td>Total request count, total request byte size<tr><td><code>Int64UpDownCounter</code><td><code>int64</code> metrics that can increase or decrease.<td>Current active requests, execution queue size<tr><td><code>Float64Counter</code><td><code>float64</code> metrics that only increase.<td>Total request count, total request byte size<tr><td><code>Float64UpDownCounter</code><td><code>float64</code> metrics that can increase or decrease.<td>Total request count, total request byte size<tr><td><code>Int64Histogram</code><td><code>int64</code> metrics that can be grouped.<td>Request execution time <code>p99</code><tr><td><code>Float64Histogram</code><td><code>float64</code> metrics that can be grouped.<td>Request execution time <code>p99</code></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-types>Asynchronous Types<a href=#asynchronous-types class=hash-link aria-label="Direct link to Asynchronous Types" title="Direct link to Asynchronous Types">​</a></h4>
<p>Monitoring metrics of <strong>asynchronous types</strong> execute metric calculation logic only when the <code>metrics reader</code> begins using the metric. Asynchronous-type metrics require a callback function that generates metric values, triggering only when the <code>metrics reader</code> reads the metric. For examples like machine CPU, memory, and disk usage metrics, if there's no pulling or use by the target end, pre-calculating metric values is meaningless and wastes computing resources, making them suitable for management as asynchronous metrics.</p>
<table><thead><tr><th><strong>Type</strong><th><strong>Description</strong><th><strong>Example</strong><tbody><tr><td><code>Int64ObservableCouter</code><td><code>int64</code> metrics that only increase.<td>CPU, memory, disk usage<tr><td><code>Int64ObservableUpDownCounter</code><td><code>int64</code> metrics that can increase or decrease.<td>CPU, memory, disk usage<tr><td><code>Float64ObservableCouter</code><td><code>float64</code> metrics that only increase.<td>CPU, memory, disk usage<tr><td><code>Float64ObservableUpDownCounter</code><td><code>float64</code> metrics that can increase or decrease.<td>Current active requests, execution queue size<tr><td><code>Int64ObservableGauge</code><td><code>int64</code> metrics that can increase or decrease.<td>CPU, memory, disk usage<tr><td><code>Float64ObservableGauge</code><td><code>float64</code> metrics that can dynamically increase or decrease.<td>CPU, memory, disk usage</table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=framework-monitoring-components>Framework Monitoring Components<a href=#framework-monitoring-components class=hash-link aria-label="Direct link to Framework Monitoring Components" title="Direct link to Framework Monitoring Components">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=component-abstraction>Component Abstraction<a href=#component-abstraction class=hash-link aria-label="Direct link to Component Abstraction" title="Direct link to Component Abstraction">​</a></h3>
<p>The framework achieves monitoring capabilities through the <code>gmetric</code> component, with its internal component hierarchy design similar to <code>OpenTelemetry Metrics</code>:</p>
<p><img decoding=async loading=lazy src=/en/assets/images/a1f33528941fcf91e87b87aa8c0219cd-ae41f69a59c0dc0e1c004f5b69e60fc5.png width=2264 height=1188 class=img_ev3q></p>
<p>The <code>gmetric</code> component employs an <strong>abstract decoupling design</strong>, partly because the framework aims to reduce external dependencies and partly to achieve automatic switching of monitoring capabilities. By default, the component uses an implementation object of <code>NoopPerform</code>, where monitoring capabilities are disabled; they automatically enable once a monitoring interface implementation is introduced.</p>
<p><img decoding=async loading=lazy src=/en/assets/images/99374a3d9b7e4805c5c7c0bd3fefb221-da167af957d080c46339738b2e27375f.png width=2188 height=1158 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=metric-types>Metric Types<a href=#metric-types class=hash-link aria-label="Direct link to Metric Types" title="Direct link to Metric Types">​</a></h3>
<p>The metric types provided by the framework simplify by removing the <code>int64</code> numerical type in contrast to <code>OpenTelemetry</code>, using a unified <code>float64</code> numerical type. However, it is crucial for developers to <strong>avoid designing values as decimals to prevent precision issues</strong>. This is particularly vital in <code>Histogram</code> type <code>Buckets</code> design, where using decimals is not recommended.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=synchronous-types-1>Synchronous Types<a href=#synchronous-types-1 class=hash-link aria-label="Direct link to Synchronous Types" title="Direct link to Synchronous Types">​</a></h4>
<table><thead><tr><th><strong>Type</strong><th><strong>Description</strong><th><strong>Example</strong><tbody><tr><td><code>Counter</code><td><code>float64</code> metrics that only increase.<td>Total request count, total request byte size<tr><td><code>UpDownCounter</code><td><code>float64</code> metrics that can increase or decrease.<td>Total request count, total request byte size<tr><td><code>Histogram</code><td><code>float64</code> metrics that can be grouped.<td>Request execution time <code>p99</code></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=asynchronous-types-1>Asynchronous Types<a href=#asynchronous-types-1 class=hash-link aria-label="Direct link to Asynchronous Types" title="Direct link to Asynchronous Types">​</a></h4>
<table><thead><tr><th><strong>Type</strong><th><strong>Description</strong><th><strong>Example</strong><tbody><tr><td><code>ObservableCounter</code><td><code>float64</code> metrics that only increase.<td>Total request count, total request byte size<tr><td><code>ObservableUpDownCounter</code><td><code>float64</code> metrics that can increase or decrease.<td>Total request count, total request byte size<tr><td><code>ObservableGauge</code><td><code>float64</code> metric that can dynamically increase or decrease.<td>CPU, memory, disk usage</table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=reference-materials>Reference Materials<a href=#reference-materials class=hash-link aria-label="Direct link to Reference Materials" title="Direct link to Reference Materials">​</a></h2>
<ul>
<li>
<p><a href=https://github.com/prometheus/client_golang%20%22https://github.com/prometheus/client_golang%22 target=_blank rel="noopener noreferrer">https://github.com/prometheus/client_golang</a></p>
</li>
<li>
<p><a href=https://github.com/open-telemetry/opentelemetry-go-contrib%20%22https://github.com/open-telemetry/opentelemetry-go-contrib%22 target=_blank rel="noopener noreferrer">https://github.com/open-telemetry/opentelemetry-go-contrib</a></p>
</li>
<li>
<p><a href=https://opentelemetry.io/docs/specs/otel/metrics/api/%20%22https://opentelemetry.io/docs/specs/otel/metrics/api/%22 target=_blank rel="noopener noreferrer">https://opentelemetry.io/docs/specs/otel/metrics/api/</a></p>
</li>
<li>
<p><a href=https://opentelemetry.io/docs/specs/otel/metrics/data-model%20%22https://opentelemetry.io/docs/specs/otel/metrics/data-model%22 target=_blank rel="noopener noreferrer">https://opentelemetry.io/docs/specs/otel/metrics/data-model</a></p>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/gogf/gf-site/blob/main/docs/docs/服务可观测性/服务监控告警/监控告警-基本介绍.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2024-11-24T12:31:08.000Z itemprop=dateModified>Nov 24, 2024</time></b> by <b>John</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/en/docs/obs/metrics><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Service Metrics</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/en/docs/obs/metrics-example><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Metrics - Usage</div></a></nav><div class=docusaurus-mt-lg></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#opentelemetry class="table-of-contents__link toc-highlight">OpenTelemetry</a><ul><li><a href=#related-components class="table-of-contents__link toc-highlight">Related Components</a><ul><li><a href=#meter-provider class="table-of-contents__link toc-highlight">Meter Provider</a><li><a href=#meter class="table-of-contents__link toc-highlight">Meter</a><li><a href=#instrument class="table-of-contents__link toc-highlight">Instrument</a><li><a href=#measurements class="table-of-contents__link toc-highlight">Measurements</a><li><a href=#view class="table-of-contents__link toc-highlight">View</a><li><a href=#metric-reader class="table-of-contents__link toc-highlight">Metric Reader</a><li><a href=#metric-exporter class="table-of-contents__link toc-highlight">Metric Exporter</a></ul><li><a href=#related-types class="table-of-contents__link toc-highlight">Related Types</a><ul><li><a href=#synchronous-types class="table-of-contents__link toc-highlight">Synchronous Types</a><li><a href=#asynchronous-types class="table-of-contents__link toc-highlight">Asynchronous Types</a></ul></ul><li><a href=#framework-monitoring-components class="table-of-contents__link toc-highlight">Framework Monitoring Components</a><ul><li><a href=#component-abstraction class="table-of-contents__link toc-highlight">Component Abstraction</a><li><a href=#metric-types class="table-of-contents__link toc-highlight">Metric Types</a><ul><li><a href=#synchronous-types-1 class="table-of-contents__link toc-highlight">Synchronous Types</a><li><a href=#asynchronous-types-1 class="table-of-contents__link toc-highlight">Asynchronous Types</a></ul></ul><li><a href=#reference-materials class="table-of-contents__link toc-highlight">Reference Materials</a></ul></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>Follow Us On WeChat</div><ul class="footer__items clean-list"><li class=footer__item><img src=/img/wechat.jpg width=110></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright ©2024 GoFrame OpenSource Team</div></div></div></footer></div>