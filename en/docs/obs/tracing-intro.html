<!doctype html><html lang=en-US dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/服务可观测性/服务链路跟踪/链路跟踪-背景知识" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>Tracing - Intro | GoFrame - A powerful framework for faster, easier, and more efficient project development</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://goframe.org/en/docs/obs/tracing-intro><meta data-rh=true property=og:locale content=en_US><meta data-rh=true property=og:locale:alternate content=zh_Hans><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Tracing - Intro | GoFrame - A powerful framework for faster, easier, and more efficient project development"><meta data-rh=true name=description content="The background and important concepts of the OpenTelemetry project, including components like TracerProvider, Tracer, Span, Attributes, Events, SpanContext, and Propagator, as well as the support of GoFrame framework in these technologies and how to use the gtrace module to implement tracing. Additionally, it lists GoFrame core components that support the OpenTelemetry standard, such as HTTP client, HTTP server, gRPC client and server, Logging, ORM, and NoSQL Redis."><meta data-rh=true property=og:description content="The background and important concepts of the OpenTelemetry project, including components like TracerProvider, Tracer, Span, Attributes, Events, SpanContext, and Propagator, as well as the support of GoFrame framework in these technologies and how to use the gtrace module to implement tracing. Additionally, it lists GoFrame core components that support the OpenTelemetry standard, such as HTTP client, HTTP server, gRPC client and server, Logging, ORM, and NoSQL Redis."><meta data-rh=true name=keywords content="OpenTelemetry,Distributed Tracing,OpenTracing,OpenCensus,Tracer,Span,Attributes,Events,GoFrame,Propagator"><link data-rh=true rel=icon href=/en/img/favicon.ico><link data-rh=true rel=canonical href=https://goframe.org/en/docs/obs/tracing-intro><link data-rh=true rel=alternate href=https://goframe.org/docs/obs/tracing-intro hreflang=zh-Hans><link data-rh=true rel=alternate href=https://goframe.org/en/docs/obs/tracing-intro hreflang=en-US><link data-rh=true rel=alternate href=https://goframe.org/docs/obs/tracing-intro hreflang=x-default><link data-rh=true rel=preconnect href=https://ZQUL8VI47R-dsn.algolia.net crossorigin><link rel=search type=application/opensearchdescription+xml title="GoFrame - A powerful framework for faster, easier, and more efficient project development" href=/en/opensearch.xml><script src=https://hm.baidu.com/hm.js?38f38a0626fd7805722db06243cd0fa7 async></script><link rel=stylesheet href=/en/assets/css/styles.b09a3e0d.css><script src=/en/assets/js/main.9d91b445.js defer></script><script src=/en/assets/js/runtime~main.ae76532e.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/en/><div class=navbar__logo><img src=/en/img/logo2.png alt="GoFrame Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/en/img/logo2.png alt="GoFrame Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" sidebarid=quickSidebar href=/en/quick/install>Quick Start</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/en/docs/core>Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button sidebarid=courseSidebar href=/en/course>Courses</a><ul class=dropdown__menu><li><a class=dropdown__link sidebarid=courseSidebar href=/en/course/bilibili-video>Video Tutorial(Chinese)</a><li><a class=dropdown__link sidebarid=courseStarBookSidebar href=/en/course/starbook>Practical Tutorial - Star English Book</a><li><a class=dropdown__link sidebarid=courseProximaBookSidebar href=/en/course/proxima-book>Microservice Tutorial - Proxima Book</a></ul></div><a class="navbar__item navbar__link" href=/en/examples/grpc>Examples</a><a class="navbar__item navbar__link" href=/en/showcase>Show Case</a><a class="navbar__item navbar__link" href=/en/release/note>Releases</a><a class="navbar__item navbar__link" sidebarid=communitySidebar href=/en/share/group>Community</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/en/docs/obs/tracing-intro>2.8.x(Latest)</a><ul class=dropdown__menu><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/en/docs/obs/tracing-intro>2.8.x(Latest)</a><li><a class=dropdown__link href=/en/2.7.x/docs/obs/tracing-intro>2.7.x</a><li><a class=dropdown__link href=/en/2.6.x/项目开发>2.6.x</a><li><a class=dropdown__link href=/en/2.5.x/项目开发>2.5.x</a><li><a class=dropdown__link href=/en/2.4.x/开发工具>2.4.x</a><li><a class=dropdown__link href=/en/2.3.x/开发工具>2.3.x</a><li><a class=dropdown__link href=/en/2.2.x/开发工具>2.2.x</a><li><a class=dropdown__link href=/en/2.1.x/开发工具>2.1.x</a><li><a class=dropdown__link href=/en/2.0.x/开发工具>2.0.x</a><li><a class=dropdown__link href=/en/1.16.x/开发工具>1.16.x</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/docs/obs/tracing-intro rel="noopener noreferrer" class=dropdown__link lang=zh-Hans>简体中文</a><li><a href=/en/docs/obs/tracing-intro rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en-US>English</a></ul></div><a href=https://github.com/gogf/gf target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/cli>CLI Tool</a><button aria-label="Expand sidebar category 'CLI Tool'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/core>Core Components 🔥</a><button aria-label="Expand sidebar category 'Core Components 🔥'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/components>Components Category</a><button aria-label="Expand sidebar category 'Components Category'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/web>WEB Service Development</a><button aria-label="Expand sidebar category 'WEB Service Development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/micro-service>Microservice Development</a><button aria-label="Expand sidebar category 'Microservice Development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/en/docs/obs>Service Observability</a><button aria-label="Collapse sidebar category 'Service Observability'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/en/docs/obs/tracing>Service Tracing</a><button aria-label="Collapse sidebar category 'Service Tracing'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/en/docs/obs/tracing-intro>Tracing - Intro</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/obs/tracing-prepare>Tracing - Preparation</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/obs/tracing-example>Tracing - Basic Example</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/en/docs/obs/tracing-http-example>Tracing - HTTP Example</a><button aria-label="Expand sidebar category 'Tracing - HTTP Example'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/obs/tracing-grpc-example>Tracing - GRPC Example</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/en/docs/obs/tracing-practice-inject-traceid>Tracing - Best Practices</a></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/en/docs/obs/metrics>Service Metrics</a><button aria-label="Expand sidebar category 'Service Metrics'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/en/docs/faq>Frequently Asked Questions (FAQ)</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/deploy>Project Deployment</a><button aria-label="Expand sidebar category 'Project Deployment'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/design>Framework Design</a><button aria-label="Expand sidebar category 'Framework Design'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/other>Other Documents</a><button aria-label="Expand sidebar category 'Other Documents'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/en/docs/changelog>Docs Changelog</a></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/en/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/en/docs/obs><span itemprop=name>Service Observability</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/en/docs/obs/tracing><span itemprop=name>Service Tracing</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Tracing - Intro</span><meta itemprop=position content=3></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.8.x(Latest)</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id=opentelemetry>OpenTelemetry<a href=#opentelemetry class=hash-link aria-label="Direct link to OpenTelemetry" title="Direct link to OpenTelemetry">​</a></h2>
<p>The concept of Distributed Tracing was first proposed by <code>Google</code>. The technology has matured over time, and there are now some protocol standards available for reference. Currently, two open-source frameworks are quite influential in this area: <code>Netflix's</code> <code>OpenTracing</code> and <code>Google's</code> <code>OpenCensus</code>. Both frameworks have a sizable developer community. To establish a unified technical standard, the two frameworks merged to form the <code>OpenTelemetry</code> project, abbreviated as <code>otel</code>. For more details, you can refer to:</p>
<ol>
<li><a href=https://johng.cn/observability/opentracing-introduction target=_blank rel="noopener noreferrer">Introduction to OpenTracing</a></li>
<li><a href=https://johng.cn/observability/opentelemetry-introduction target=_blank rel="noopener noreferrer">Introduction to OpenTelemetry</a></li>
</ol>
<p>Thus, our tracing technology solution is implemented based on the <code>OpenTelemetry</code> standard, with some open-source projects implementing the protocol standard in <code>Golang</code>:</p>
<ol>
<li><a href=https://github.com/open-telemetry/opentelemetry-go target=_blank rel="noopener noreferrer">https://github.com/open-telemetry/opentelemetry-go</a></li>
<li><a href=https://github.com/open-telemetry/opentelemetry-go-contrib target=_blank rel="noopener noreferrer">https://github.com/open-telemetry/opentelemetry-go-contrib</a></li>
</ol>
<p>Other third-party frameworks and systems (such as <code>Jaeger/Prometheus/Grafana</code>) also adhere to standardized protocols to integrate with <code>OpenTelemetry</code>, significantly reducing development and maintenance costs.</p>
<p><img decoding=async loading=lazy src=/en/assets/images/63ac4d816e08ea5dd6d986f4119d03e1-4afbf40d9585c9cfe4372c5812ebbc21.jpg width=800 height=534 class=img_ev3q></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=key-concepts>Key Concepts<a href=#key-concepts class=hash-link aria-label="Direct link to Key Concepts" title="Direct link to Key Concepts">​</a></h2>
<p>Let's first look at the architecture diagram of <code>OpenTelemetry</code>.
We won't introduce it in full, only the commonly used concepts. For an introduction to the internal technical architecture of <code>OpenTelemetry</code>,
you can refer to <a href=https://johng.cn/observability/opentelemetry-architecture target=_blank rel="noopener noreferrer">OpenTelemetry Architecture</a>,
and for semantic conventions, please refer to: <a href=https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/trace/api.md target=_blank rel="noopener noreferrer">https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/trace/api.md</a></p>
<p><img decoding=async loading=lazy src=/en/assets/images/8fbc65f937aaac8c9b6947faa89a6964-e0357fb79deac85993c99b0c8df4fc15.png width=891 height=838 class=img_ev3q></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=tracerprovider>TracerProvider<a href=#tracerprovider class=hash-link aria-label="Direct link to TracerProvider" title="Direct link to TracerProvider">​</a></h3>
<p>Mainly responsible for creating <code>Tracer</code>, usually requiring a concrete implementation from a third-party distributed tracing management platform. By default, it is an empty <code>TracerProvider (NoopTracerProvider)</code>. While it can create <code>Tracer</code>, it doesn’t actually execute specific data flow transmission logic internally.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=tracer>Tracer<a href=#tracer class=hash-link aria-label="Direct link to Tracer" title="Direct link to Tracer">​</a></h3>
<p><code>Tracer</code> represents a complete tracing, consisting of one or more <code>span</code>. The example below illustrates a <code>tracer</code> consisting of <code>8</code> spans:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span A</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain">  ←←←</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">the root span</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">     </span><span class="token operator" style=color:#66d9ef>+</span><span class="token operator" style=color:#66d9ef>--</span><span class="token operator" style=color:#66d9ef>--</span><span class="token operator" style=color:#66d9ef>--</span><span class="token operator" style=color:#66d9ef>+</span><span class="token operator" style=color:#66d9ef>--</span><span class="token operator" style=color:#66d9ef>--</span><span class="token operator" style=color:#66d9ef>--</span><span class="token operator" style=color:#66d9ef>+</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">     </span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain">             </span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span B</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain">      </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span C</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"> ←←←</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">Span C is a </span><span class="token string" style=color:#a6e22e>`ChildOf`</span><span class="token plain"> Span A</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">     </span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain">             </span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span D</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain">      </span><span class="token operator" style=color:#66d9ef>+</span><span class="token operator" style=color:#66d9ef>--</span><span class="token operator" style=color:#66d9ef>-</span><span class="token operator" style=color:#66d9ef>+</span><span class="token operator" style=color:#66d9ef>--</span><span class="token operator" style=color:#66d9ef>--</span><span class="token operator" style=color:#66d9ef>--</span><span class="token operator" style=color:#66d9ef>-</span><span class="token operator" style=color:#66d9ef>+</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">               </span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain">           </span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">           </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span E</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span F</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>>></span><span class="token operator" style=color:#66d9ef>></span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span G</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>>></span><span class="token operator" style=color:#66d9ef>></span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span H</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                                       ↑</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                                       ↑</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                                       ↑</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                         </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">Span G </span><span class="token string" style=color:#a6e22e>`FollowsFrom`</span><span class="token plain"> Span F</span><span class="token punctuation" style=color:#f8f8f2>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>The timeline representation makes it easier to understand:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">––</span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain">–––––––</span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain">–––––––</span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain">–––––––</span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain">–––––––</span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain">–––––––</span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain">–––––––</span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain">–––––––</span><span class="token operator" style=color:#66d9ef>|</span><span class="token plain">–</span><span class="token operator" style=color:#66d9ef>></span><span class="token plain"> time</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span A···················································</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span B··············································</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span D··········································</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span C········································</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span E·······</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain">        </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span F··</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span G··</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token plain">Span H··</span><span class="token punctuation" style=color:#f8f8f2>]</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>We usually create a <code>Tracer</code> in the following way:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">gtrace</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>NewTracer</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">tracerName</span><span class="token punctuation" style=color:#f8f8f2>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=span>Span<a href=#span class=hash-link aria-label="Direct link to Span" title="Direct link to Span">​</a></h3>
<p>A <code>Span</code> is a fundamental component of a tracing. It represents a single work unit, such as a function call or an <code>HTTP</code> request. A <code>span</code> records the following essential elements:</p>
<ul>
<li>Service name (<code>operation name</code>)</li>
<li>Service start and end times</li>
<li><code>K/V</code> form <code>Tags</code></li>
<li><code>K/V</code> form <code>Logs</code></li>
<li><code>SpanContext</code></li>
</ul>
<p><code>Span</code> is the most frequently used object among them, thus creating a <code>Span</code> is very straightforward, for example:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">gtrace</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>NewSpan</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> spanName</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> opts</span><span class="token operator" style=color:#66d9ef>...</span><span class="token punctuation" style=color:#f8f8f2>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=attributes>Attributes<a href=#attributes class=hash-link aria-label="Direct link to Attributes" title="Direct link to Attributes">​</a></h3>
<p><code>Attributes</code> are stored as <code>K/V</code> key-value pairs for user-defined tags, mainly used for query filtering of tracing results. For example: <code>http.method="GET",http.status_code=200</code>. The <code>key</code> must be a string, and the <code>value</code> must be a string, boolean, or numeric type. <code>Attributes</code> in a <code>span</code> are only visible to itself and are not passed to subsequent spans through <code>SpanContext</code>. The way to set <code>Attributes</code> is as follows:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">span</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>SetAttributes</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    label</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>String</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"http.remote"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> conn</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>RemoteAddr</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>String</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    label</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>String</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"http.local"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> conn</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>LocalAddr</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>String</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=events>Events<a href=#events class=hash-link aria-label="Direct link to Events" title="Direct link to Events">​</a></h3>
<p><code>Events</code> are similar to <code>Attributes</code> and are also in the form of <code>K/V</code> key-value pairs. Unlike <code>Attributes</code>, <code>Events</code> also record the time when they are written, so <code>Events</code> are mainly used to record the time certain events occur. The <code>key</code> for <code>Events</code> must also be a string, but there are no restrictions on the type of <code>value</code>. For example:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token plain">span</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>AddEvent</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"http.request"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> trace</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>WithAttributes</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    label</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>Any</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"http.request.header"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> headers</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    label</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>Any</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"http.request.baggage"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> gtrace</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>GetBaggageMap</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    label</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>String</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"http.request.body"</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> bodyContent</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=spancontext>SpanContext<a href=#spancontext class=hash-link aria-label="Direct link to SpanContext" title="Direct link to SpanContext">​</a></h3>
<p><code>SpanContext</code> carries some data used for <strong>cross-service (cross-process) communication</strong>, mainly including:</p>
<ul>
<li>
<p>Information sufficient to identify this span within the system, e.g., <code>span_id, trace_id</code>.</p>
</li>
<li>
<p><code>Baggage</code> - maintains user-defined <code>K/V</code> formatted data for cross-service (cross-process) tracing in the entire tracing link. <code>Baggage</code> is similar to <code>Attributes</code>, also in <code>K/V</code> key-value pair format. The differences are:</p>
</li>
<li>
<p>Both <code>key</code> and <code>value</code> can only be in string format.</p>
</li>
<li>
<p><code>Baggage</code> is visible not only to the current span but is also passed to all subsequent child spans through <code>SpanContext</code>. Be cautious using <code>Baggage</code> because transmitting these <code>K,V</code> in all spans incurs non-trivial network and CPU overhead.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=propagator>Propagator<a href=#propagator class=hash-link aria-label="Direct link to Propagator" title="Direct link to Propagator">​</a></h3>
<p>The <code>Propagator</code> is used for encoding/decoding data end-to-end, such as data transmission from the <code>Client</code> to the <code>Server</code>. <code>TraceId</code>, <code>SpanId</code>, and <code>Baggage</code> also need to be managed for data transmission through the propagator. Business-end developers are usually not aware of the <code>Propagator</code>, only middleware/interceptor developers need to understand its role. The standard protocol implementation library of <code>OpenTelemetry</code> provides a commonly used <code>TextMapPropagator</code> for common text data end-to-end transmission. Furthermore, to ensure compatibility of the data transmitted in the <code>TextMapPropagator</code>, special characters should not be included. For details, please refer to: <a href=https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/context/api-propagators.md target=_blank rel="noopener noreferrer">https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/context/api-propagators.md</a></p>
<p>The <code>GoFrame</code> framework uses the following propagator objects through the <code>gtrace</code> module and sets them globally in <code>OpenTelemetry</code>:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#8292a2;font-style:italic>// defaultTextMapPropagator is the default propagator for context propagation between peers.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">defaultTextMapPropagator </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> propagation</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token function" style=color:#e6db74>NewCompositeTextMapPropagator</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    propagation</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">TraceContext</span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    propagation</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Baggage</span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=supported-components>Supported Components<a href=#supported-components class=hash-link aria-label="Direct link to Supported Components" title="Direct link to Supported Components">​</a></h2>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>tip</div><div class=admonitionContent_BuS1><p>The core components of <code>GoFrame</code> have fully supported the <code>OpenTelemetry</code> standard and <strong>automatically enable</strong> the tracing feature, with no need for developers to explicitly call or use it. Without injecting an external <code>TracerProvider</code>, the framework will use the default <code>TracerProvider</code>, which will only automatically create a <code>TraceID</code> and <code>SpanID</code> to facilitate tracing the request log and will not execute complex logic.</div></div>
<p>Including but not limited to the following core components:</p>
<table><thead><tr><th>Components with Auto Tracing Support<th>Component Name<th>Description<tbody><tr><td><code>HTTP Client</code><td><code>gclient</code><td>The <code>HTTP</code> client automatically enables the tracing feature. For specific usage examples, please refer to the subsequent example chapter.<tr><td><code>Http Server</code><td><code>ghttp</code><td>The <code>HTTP</code> server automatically enables the tracing feature. For specific usage examples, please refer to the subsequent example chapter.<tr><td><code>gRPC Client</code><td><code>contrib/rpc/grpcx</code><td>The <code>gRPC</code> client automatically enables the tracing feature. For specific usage examples, please refer to the subsequent example chapter.<tr><td><code>gRPC Server</code><td><code>contrib/rpc/grpcx</code><td>The <code>gRPC</code> server automatically enables the tracing feature. For specific usage examples, please refer to the subsequent example chapter.<tr><td><code>Logging</code><td><code>glog</code><td>The log content needs to inject the current request's <code>TraceId</code> to quickly locate issues through logs. This feature is implemented by the <code>glog</code> component. Developers need to call the <code>Ctx</code> chain operation method to pass the <code>context.Context</code> context variable to the current logging operation chain when outputting logs. Failing to pass the <code>context.Context</code> will result in losing the <code>TraceId</code> in the log content.<tr><td><code>ORM</code><td><code>gdb</code><td>The execution of the database is an essential part of the link. The <code>Orm</code> component needs to deliver its execution information into the tracing as part of the execution trace.<tr><td><code>NoSQL Redis</code><td><code>gredis</code><td>The execution of <code>Redis</code> is also an essential part of the tracing. <code>Redis</code> needs to deliver its execution information into the tracing as part of the execution trace.<tr><td><code>Utils</code><td><code>gtrace</code><td>Managing the <code>Tracing</code> feature requires some encapsulation, mainly considering extensibility and usability. This encapsulation is implemented by the <code>gtrace</code> module. The documentation can be found at: <a href=https://pkg.go.dev/github.com/gogf/gf/v2/net/gtrace target=_blank rel="noopener noreferrer">https://pkg.go.dev/github.com/gogf/gf/v2/net/gtrace</a></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=reference-materials>Reference Materials<a href=#reference-materials class=hash-link aria-label="Direct link to Reference Materials" title="Direct link to Reference Materials">​</a></h2>
<ul>
<li><a href=https://opentracing.io/ target=_blank rel="noopener noreferrer">https://opentracing.io</a></li>
<li><a href=https://opencensus.io/ target=_blank rel="noopener noreferrer">https://opencensus.io</a></li>
<li><a href=https://opentelemetry.io/ target=_blank rel="noopener noreferrer">https://opentelemetry.io</a></li>
<li><a href=https://github.com/open-telemetry/opentelemetry-specification/tree/main/specification target=_blank rel="noopener noreferrer">https://github.com/open-telemetry/opentelemetry-specification/tree/main/specification</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/gogf/gf-site/blob/main/docs/docs/服务可观测性/服务链路跟踪/链路跟踪-背景知识.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2025-02-28T06:28:03.000Z itemprop=dateModified>Feb 28, 2025</time></b> by <b>John</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/en/docs/obs/tracing><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Service Tracing</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/en/docs/obs/tracing-prepare><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Tracing - Preparation</div></a></nav><div class=docusaurus-mt-lg></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#opentelemetry class="table-of-contents__link toc-highlight">OpenTelemetry</a><li><a href=#key-concepts class="table-of-contents__link toc-highlight">Key Concepts</a><ul><li><a href=#tracerprovider class="table-of-contents__link toc-highlight">TracerProvider</a><li><a href=#tracer class="table-of-contents__link toc-highlight">Tracer</a><li><a href=#span class="table-of-contents__link toc-highlight">Span</a><li><a href=#attributes class="table-of-contents__link toc-highlight">Attributes</a><li><a href=#events class="table-of-contents__link toc-highlight">Events</a><li><a href=#spancontext class="table-of-contents__link toc-highlight">SpanContext</a><li><a href=#propagator class="table-of-contents__link toc-highlight">Propagator</a></ul><li><a href=#supported-components class="table-of-contents__link toc-highlight">Supported Components</a><li><a href=#reference-materials class="table-of-contents__link toc-highlight">Reference Materials</a></ul></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>Follow Us On WeChat</div><ul class="footer__items clean-list"><li class=footer__item><img src=/img/wechat.jpg width=110></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright ©2024 GoFrame OpenSource Team</div></div></div></footer></div>