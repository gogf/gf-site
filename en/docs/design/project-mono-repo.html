<!doctype html><html lang=en-US dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/框架设计/工程开发设计/微服务大仓管理模式" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>Mono-Repo Management | GoFrame - A powerful framework for faster, easier, and more efficient project development</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://goframe.org/en/docs/design/project-mono-repo><meta data-rh=true property=og:locale content=en_US><meta data-rh=true property=og:locale:alternate content=zh_Hans><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Mono-Repo Management | GoFrame - A powerful framework for faster, easier, and more efficient project development"><meta data-rh=true name=description content="GoFrame framework's support for microservices-mono-repo management mode, detailing how to conduct code development and service collaboration in this mode. Discusses the pros and cons of mono-repo management and how to optimize microservice collaboration by dividing repository responsibilities, managing code visibility, unifying image repositories, and more. Also, provides relevant framework commands to help developers efficiently manage and deploy microservice projects."><meta data-rh=true property=og:description content="GoFrame framework's support for microservices-mono-repo management mode, detailing how to conduct code development and service collaboration in this mode. Discusses the pros and cons of mono-repo management and how to optimize microservice collaboration by dividing repository responsibilities, managing code visibility, unifying image repositories, and more. Also, provides relevant framework commands to help developers efficiently manage and deploy microservice projects."><meta data-rh=true name=keywords content="GoFrame,Microservices,Single Repo Management,Code Development,Permission Management,Service Collaboration,Large Repo Management,Code Repository,Containerization Support,Framework Commands"><link data-rh=true rel=icon href=/en/img/favicon.ico><link data-rh=true rel=canonical href=https://goframe.org/en/docs/design/project-mono-repo><link data-rh=true rel=alternate href=https://goframe.org/docs/design/project-mono-repo hreflang=zh-Hans><link data-rh=true rel=alternate href=https://goframe.org/en/docs/design/project-mono-repo hreflang=en-US><link data-rh=true rel=alternate href=https://goframe.org/docs/design/project-mono-repo hreflang=x-default><link data-rh=true rel=preconnect href=https://ZQUL8VI47R-dsn.algolia.net crossorigin><link rel=search type=application/opensearchdescription+xml title="GoFrame - A powerful framework for faster, easier, and more efficient project development" href=/en/opensearch.xml><script src=https://hm.baidu.com/hm.js?38f38a0626fd7805722db06243cd0fa7 async></script><link rel=stylesheet href=/en/assets/css/styles.b09a3e0d.css><script src=/en/assets/js/main.9d91b445.js defer></script><script src=/en/assets/js/runtime~main.ae76532e.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/en/><div class=navbar__logo><img src=/en/img/logo2.png alt="GoFrame Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/en/img/logo2.png alt="GoFrame Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" sidebarid=quickSidebar href=/en/quick/install>Quick Start</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/en/docs/core>Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button sidebarid=courseSidebar href=/en/course>Courses</a><ul class=dropdown__menu><li><a class=dropdown__link sidebarid=courseSidebar href=/en/course/bilibili-video>Video Tutorial(Chinese)</a><li><a class=dropdown__link sidebarid=courseStarBookSidebar href=/en/course/starbook>Practical Tutorial - Star English Book</a><li><a class=dropdown__link sidebarid=courseProximaBookSidebar href=/en/course/proxima-book>Microservice Tutorial - Proxima Book</a></ul></div><a class="navbar__item navbar__link" href=/en/examples/grpc>Examples</a><a class="navbar__item navbar__link" href=/en/showcase>Show Case</a><a class="navbar__item navbar__link" href=/en/release/note>Releases</a><a class="navbar__item navbar__link" sidebarid=communitySidebar href=/en/share/group>Community</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/en/docs/design/project-mono-repo>2.8.x(Latest)</a><ul class=dropdown__menu><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/en/docs/design/project-mono-repo>2.8.x(Latest)</a><li><a class=dropdown__link href=/en/2.7.x/docs/design/project-mono-repo>2.7.x</a><li><a class=dropdown__link href=/en/2.6.x/项目开发>2.6.x</a><li><a class=dropdown__link href=/en/2.5.x/项目开发>2.5.x</a><li><a class=dropdown__link href=/en/2.4.x/开发工具>2.4.x</a><li><a class=dropdown__link href=/en/2.3.x/开发工具>2.3.x</a><li><a class=dropdown__link href=/en/2.2.x/开发工具>2.2.x</a><li><a class=dropdown__link href=/en/2.1.x/开发工具>2.1.x</a><li><a class=dropdown__link href=/en/2.0.x/开发工具>2.0.x</a><li><a class=dropdown__link href=/en/1.16.x/开发工具>1.16.x</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/docs/design/project-mono-repo rel="noopener noreferrer" class=dropdown__link lang=zh-Hans>简体中文</a><li><a href=/en/docs/design/project-mono-repo rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en-US>English</a></ul></div><a href=https://github.com/gogf/gf target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/cli>CLI Tool</a><button aria-label="Expand sidebar category 'CLI Tool'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/core>Core Components 🔥</a><button aria-label="Expand sidebar category 'Core Components 🔥'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/components>Components Category</a><button aria-label="Expand sidebar category 'Components Category'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/web>WEB Service Development</a><button aria-label="Expand sidebar category 'WEB Service Development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/micro-service>Microservice Development</a><button aria-label="Expand sidebar category 'Microservice Development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/obs>Service Observability</a><button aria-label="Expand sidebar category 'Service Observability'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/en/docs/faq>Frequently Asked Questions (FAQ)</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/deploy>Project Deployment</a><button aria-label="Expand sidebar category 'Project Deployment'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/en/docs/design>Framework Design</a><button aria-label="Collapse sidebar category 'Framework Design'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/design/modular>Modular Design</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/design/unified>Unified Framework Design</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/en/docs/design/project>Engineering Design 🔥</a><button aria-label="Collapse sidebar category 'Engineering Design 🔥'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/design/project-layer>Code Layering</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/design/project-structure>Project Structure🔥</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/en/docs/design/project-dao>DAO Encapsulation</a><button aria-label="Expand sidebar category 'DAO Encapsulation'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/design/project-struct-parameter>Structured Programming</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/design/project-models>Data and Business Models</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/en/docs/design/project-mono-repo>Mono-Repo Management</a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/design/tracing>OpenTelemetry Tracing</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/design/error-stack>Error Stack</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/design/interface-generic>Interface and Generic</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/design/initialization>Implicit and Explicit Init</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/design/enums>Golang Enums</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/docs/design/context-variable>Context Shared Variables</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/docs/other>Other Documents</a><button aria-label="Expand sidebar category 'Other Documents'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/en/docs/changelog>Docs Changelog</a></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/en/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/en/docs/design><span itemprop=name>Framework Design</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/en/docs/design/project><span itemprop=name>Engineering Design 🔥</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Mono-Repo Management</span><meta itemprop=position content=3></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.8.x(Latest)</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p>This article aims to introduce <code>GoFrame</code> framework's support for microservices-mono-repo management mode, guiding developers on how to conduct code development and collaboration in a microservices-mono-repo management mode.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=1-pre-reading>1. Pre-reading<a href=#1-pre-reading class=hash-link aria-label="Direct link to 1. Pre-reading" title="Direct link to 1. Pre-reading">​</a></h2>
<p>Before starting this chapter, it is recommended to first understand the basic concepts and respective pros and cons of monolith repositories (<code>monolith</code>), microservices-multi-repo management (<code>multi-repo</code>), and microservices-mono-repo management (<code>mono-repo</code>): <a href=https://johng.cn/management/monorepo-vs-multirepo target=_blank rel="noopener noreferrer">What are the advantages and disadvantages of monolith and multi-repo, and which solution is better for microservices?</a></p>
<p>Management constraints of code repositories do not belong to the framework’s responsibilities. The <code>GoFrame</code> framework's scaffold itself also supports commands to initialize two kinds of repository projects - single repository (<code>mono-repo</code>) and multiple repositories (<code>monolith/multi-repo</code>), to meet the needs of different teams. The specific choice of code repository management mode is decided by the development team based on their own needs, scenarios, and habits.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>tip</div><div class=admonitionContent_BuS1><p>To simplify and clarify the description of microservices-mono-repo management (<code>mono-repo</code>), we will refer to it as <strong>large repo management</strong> moving forward.</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=2-large-repo-management>2. Large Repo Management<a href=#2-large-repo-management class=hash-link aria-label="Direct link to 2. Large Repo Management" title="Direct link to 2. Large Repo Management">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=1-division-of-repository-responsibilities>1. Division of Repository Responsibilities<a href=#1-division-of-repository-responsibilities class=hash-link aria-label="Direct link to 1. Division of Repository Responsibilities" title="Direct link to 1. Division of Repository Responsibilities">​</a></h3>
<p>As noted in the pre-reading article, there's no silver bullet in the world, and large repos have both advantages and disadvantages. The most apparent drawbacks are <strong>permission control</strong> and <strong>repository bloating</strong>. To better manage the code repository and avoid the higher costs associated with these two drawbacks, we recommend minimizing the scope of microservices in a large repository as much as possible. The decision of which microservices need to be maintained in the repository depends on the frequency of cooperation between services.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=1-when-intra-team-cooperation-frequency-is-higher-than-inter-team>1) When intra-team cooperation frequency is higher than inter-team<a href=#1-when-intra-team-cooperation-frequency-is-higher-than-inter-team class=hash-link aria-label="Direct link to 1) When intra-team cooperation frequency is higher than inter-team" title="Direct link to 1) When intra-team cooperation frequency is higher than inter-team">​</a></h4>
<ul>
<li>A typical scenario is for <strong>non-microservice architecture products</strong>, where service management responsibilities can be divided according to each business team. This way, the team can maintain scattered services in a unified code repository, fully utilizing the advantages of large repo management to improve intra-team development and maintenance efficiency.</li>
<li>Another scenario is when the number of business microservices is not high (for example, within <code>50</code>), merging them into a large repository for management is feasible. Note that the number of services in large repo management is not determined by the number of people in the organizational structure.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=2-when-cooperation-frequency-is-high-between-multiple-teams>2) When cooperation frequency is high between multiple teams<a href=#2-when-cooperation-frequency-is-high-between-multiple-teams class=hash-link aria-label="Direct link to 2) When cooperation frequency is high between multiple teams" title="Direct link to 2) When cooperation frequency is high between multiple teams">​</a></h4>
<p>If the number of business microservices is high, and interactions and collaborations between services are frequent, merging these services into a large repository for management can significantly improve collaboration efficiency. This typically occurs when microservices are within the same product line, across teams but not across centers or departments. Since this involves collaboration across multiple teams, it requires certain managerial authorization to drive.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>tip</div><div class=admonitionContent_BuS1><p>Microservice management is not only about code organization but also about organizational management.</div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=2-how-microservices-collaborate-in-a-large-repo>2. How Microservices Collaborate in a Large Repo<a href=#2-how-microservices-collaborate-in-a-large-repo class=hash-link aria-label="Direct link to 2. How Microservices Collaborate in a Large Repo" title="Direct link to 2. How Microservices Collaborate in a Large Repo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=1-management-of-code-visibility>1) Management of Code Visibility<a href=#1-management-of-code-visibility class=hash-link aria-label="Direct link to 1) Management of Code Visibility" title="Direct link to 1) Management of Code Visibility">​</a></h4>
<p>The only thing that can be exposed between services is the interface, namely the <code>API</code>. The internal logic of each service should not be visible externally. Go language has a beneficial <code>internal</code> feature which can satisfy visibility management requirements. As shown in the large repo code example below, several services are managed under the <code>app</code> directory, each exposing its own <code>api</code> directory for direct reference by other services (enhancing collaboration efficiency), but the internal business logic is contained in the <code>internal</code> directory, not visible (and therefore inaccessible) to other services.</p>
<p><img decoding=async loading=lazy src=/en/assets/images/f9028ffb7bc51e7496f1d55b79091f73-2aaf25707e67167e56683b5474ab72dd.png width=1014 height=1832 class=img_ev3q></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=2-service-interface-invocation>2) Service Interface Invocation<a href=#2-service-interface-invocation class=hash-link aria-label="Direct link to 2) Service Interface Invocation" title="Direct link to 2) Service Interface Invocation">​</a></h4>
<p>Protocol files should be maintained separately in each service's directory. If the protocol file requires compilation, the compiled file should also be stored in its own service directory. The caller does not need to recompile and manage the target service's protocol files separately. For instance, with <code>HTTP API</code> interface definitions, the caller can directly reference the target service's <code>API</code> interface definition (in the following screenshot, <code>khaos-shark</code> is the caller, <code>khaos-oss</code> is the service provider).</p>
<p><img decoding=async loading=lazy src=/en/assets/images/b0035d25d52202b3f1b38d18980bf3ff-5db9af58149b3a773ea029236a8f80e0.png width=3072 height=1750 class=img_ev3q></p>
<p>The same logic applies to <code>RPC</code> interface calls between microservices (in the following screenshot, <code>user-api</code> is the caller, <code>user-rpc</code> is the service provider).</p>
<p><img decoding=async loading=lazy src=/en/assets/images/f02efd1e4c03b3cb111cb7b9015290ee-492f73639f5718b6bd81e7487275cddc.png width=3840 height=2110 class=img_ev3q></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=3-strict-compatibility-requirements>3) Strict Compatibility Requirements<a href=#3-strict-compatibility-requirements class=hash-link aria-label="Direct link to 3) Strict Compatibility Requirements" title="Direct link to 3) Strict Compatibility Requirements">​</a></h4>
<p>As introduced above, through large repo code management, all services within the large repo maintain consistent versions. When the service <code>API</code> relied upon is updated, the caller's service (using the <code>SDK</code>) will also automatically get updated. This requires all services within the repository to <strong>strictly ensure interface compatibility</strong>, otherwise, there may be issues with interface invocation: at best, the caller's service compilation fails requiring code adjustments, at worst, it compiles successfully but throws runtime errors affecting the business. Publicly shared large repo base components will also be affected by compatibility issues.</p>
<p>Key points for ensuring compatibility in code design:</p>
<ul>
<li><strong>Do not arbitrarily delete or modify interface parameters, parameter names, types, or validation logic.</strong></li>
<li><strong>When an interface must undergo non-compatible updates, use interface versioning management (such as <code>v1, v2, v3...</code>).</strong></li>
<li><strong>Public components should rely on stable and mature external components as much as possible. If a custom component is necessary, ensure the compatibility of exposed methods.</strong> <em>For example: basic functions like <code>json.Marshal&Unmarshal</code> may be wrapped by some libraries/functions, but later users may not know or trust this function, leading to redundant rewrites. Over time, these libraries/functions become unmaintained.</em></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=3-microservice-containerization-support-under-large-repos>3. Microservice Containerization Support under Large Repos<a href=#3-microservice-containerization-support-under-large-repos class=hash-link aria-label="Direct link to 3. Microservice Containerization Support under Large Repos" title="Direct link to 3. Microservice Containerization Support under Large Repos">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=1-unified-image-repository-management>1) Unified Image Repository Management<a href=#1-unified-image-repository-management class=hash-link aria-label="Direct link to 1) Unified Image Repository Management" title="Direct link to 1) Unified Image Repository Management">​</a></h4>
<p>Scattered image repositories can reduce efficiency in service containerization management and maintenance. To facilitate unified service containerization management, we recommend using a unified image repository for services under a large repo. The image repository address is maintained in the tool configuration files for each service:</p>
<p><img decoding=async loading=lazy src=/en/assets/images/424878f3a64d0cca7899c6fd13a8b9c7-2150624de20d43a359ff6a06e92b9377.png width=3072 height=1748 class=img_ev3q></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=2-unified-compile-submit-commands>2) Unified Compile, Submit Commands<a href=#2-unified-compile-submit-commands class=hash-link aria-label="Direct link to 2) Unified Compile, Submit Commands" title="Direct link to 2) Unified Compile, Submit Commands">​</a></h4>
<p>The framework provides commonly used commands to compile programs, build images, and submit images.</p>
<ul>
<li><code>make build</code></li>
</ul>
<p>Compiles the program to generate binary files.</p>
<p>For more information, please refer to the documentation: <a href=/en/docs/cli/build>Cross-Compiling</a></p>
<ul>
<li><code>make image</code></li>
</ul>
<p>Compiles the program and builds the image, generating a <code>Docker</code> image.</p>
<p>Use <code>make image TAG=xxx</code> to specify the tag name of the compiled image.</p>
<p>For more information, please refer to the documentation: <a href=/en/docs/cli/docker>Image Building</a></p>
<ul>
<li><code>make image.push</code></li>
</ul>
<p>Compiles the program, builds the image, and pushes it to the configured image repository.</p>
<p>Use <code>make image.push TAG=xxx</code> to specify the tag name of the compiled image.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=3-unified-deployment-debugging-commands>3) Unified Deployment, Debugging Commands<a href=#3-unified-deployment-debugging-commands class=hash-link aria-label="Direct link to 3) Unified Deployment, Debugging Commands" title="Direct link to 3) Unified Deployment, Debugging Commands">​</a></h4>
<p>The framework offers common commands for containerized deployment of <code>Kubernetes</code> clusters, as well as integrated compile-deploy development commands.</p>
<ul>
<li><code>make deploy TAG=xxx</code></li>
</ul>
<p>Deploys the current service to a <code>kubernetes</code> cluster connected via local <code>kubeconfig</code>, where <code>TAG</code> is used to specify the <code>overlays</code> directory under the <code>deploy</code> directory. Deployment <code>yaml</code> file management uses the industry-standard <code>kustomize</code> tool. For detailed documentation, please refer to: <a href=https://kubernetes.io/zh-cn/docs/tasks/manage-kubernetes-objects/kustomization/ target=_blank rel="noopener noreferrer">https://kubernetes.io/zh-cn/docs/tasks/manage-kubernetes-objects/kustomization/</a></p>
<p><img decoding=async loading=lazy src=/en/assets/images/353b86069be6e3cb8834aab4aad32e84-3b27bb6bd46ad3b6a67d0a65245b3487.png width=3072 height=1750 class=img_ev3q></p>
<ul>
<li><code>make image.push deploy TAG=xxx</code></li>
</ul>
<p>This command is a development debugging directive used for compiling binaries, building and pushing <code>Docker</code> images, deploying <code>Kubernetes</code> applications, and restarting the application with a single command.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=4-other-framework-commands-under-large-repos>4. Other Framework Commands under Large Repos<a href=#4-other-framework-commands-under-large-repos class=hash-link aria-label="Direct link to 4. Other Framework Commands under Large Repos" title="Direct link to 4. Other Framework Commands under Large Repos">​</a></h3>
<p>The framework provides a wealth of tool command support for project engineering management. These commands often need to be executed in specific service directories, such as <code>./app/service-name</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=1-make-cli>1) <code>make cli</code><a href=#1-make-cli class=hash-link aria-label="Direct link to 1-make-cli" title="Direct link to 1-make-cli">​</a></h4>
<p>Used to upgrade the local framework <code>CLI</code> to the latest stable version.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=2-make-up>2) <code>make up</code><a href=#2-make-up class=hash-link aria-label="Direct link to 2-make-up" title="Direct link to 2-make-up">​</a></h4>
<p>Used to upgrade the local framework to the latest stable version in the community.</p>
<p>For more information, please refer to the documentation: <a href=/en/docs/cli/up>Version Upgrade</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=3-make-dao>3) <code>make dao</code><a href=#3-make-dao class=hash-link aria-label="Direct link to 3-make-dao" title="Direct link to 3-make-dao">​</a></h4>
<p>Used to generate <code>DAO/Entity/DO</code> code files.</p>
<p>For more information, please refer to the documentation: <a href=/en/docs/cli/gen-dao>Dao/Do/Entity Generating</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=4-make-service>4) <code>make service</code><a href=#4-make-service class=hash-link aria-label="Direct link to 4-make-service" title="Direct link to 4-make-service">​</a></h4>
<p>Parses the <code>logic</code> directory and automatically generates internal call interfaces. In <code>Goland IDE</code>, this command is often used in conjunction with an automated <code>Watcher</code> file change to auto-generate content; see the official documentation for details.</p>
<p>For more information, please refer to the documentation: <a href=/en/docs/cli/gen-service>Service Generating</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=5-make-enums>5) <code>make enums</code><a href=#5-make-enums class=hash-link aria-label="Direct link to 5-make-enums" title="Direct link to 5-make-enums">​</a></h4>
<p>Used to parse specified code directories (default is <code>api</code> directory) and auto-generate <code>enums</code> load code.</p>
<p>For more information, please refer to the documentation: <a href=/en/docs/cli/gen-enums>Enums Maintenance</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=6-more-commands>6) More Commands<a href=#6-more-commands class=hash-link aria-label="Direct link to 6) More Commands" title="Direct link to 6) More Commands">​</a></h4>
<p>For more command support, please refer to the framework's official tools introduction section: <a href=/en/docs/cli>CLI Tool</a></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/gogf/gf-site/blob/main/docs/docs/框架设计/工程开发设计/微服务大仓管理模式.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2025-02-28T06:28:03.000Z itemprop=dateModified>Feb 28, 2025</time></b> by <b>John</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/en/docs/design/project-models><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Data and Business Models</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/en/docs/design/tracing><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>OpenTelemetry Tracing</div></a></nav><div class=docusaurus-mt-lg></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#1-pre-reading class="table-of-contents__link toc-highlight">1. Pre-reading</a><li><a href=#2-large-repo-management class="table-of-contents__link toc-highlight">2. Large Repo Management</a><ul><li><a href=#1-division-of-repository-responsibilities class="table-of-contents__link toc-highlight">1. Division of Repository Responsibilities</a><ul><li><a href=#1-when-intra-team-cooperation-frequency-is-higher-than-inter-team class="table-of-contents__link toc-highlight">1) When intra-team cooperation frequency is higher than inter-team</a><li><a href=#2-when-cooperation-frequency-is-high-between-multiple-teams class="table-of-contents__link toc-highlight">2) When cooperation frequency is high between multiple teams</a></ul><li><a href=#2-how-microservices-collaborate-in-a-large-repo class="table-of-contents__link toc-highlight">2. How Microservices Collaborate in a Large Repo</a><ul><li><a href=#1-management-of-code-visibility class="table-of-contents__link toc-highlight">1) Management of Code Visibility</a><li><a href=#2-service-interface-invocation class="table-of-contents__link toc-highlight">2) Service Interface Invocation</a><li><a href=#3-strict-compatibility-requirements class="table-of-contents__link toc-highlight">3) Strict Compatibility Requirements</a></ul><li><a href=#3-microservice-containerization-support-under-large-repos class="table-of-contents__link toc-highlight">3. Microservice Containerization Support under Large Repos</a><ul><li><a href=#1-unified-image-repository-management class="table-of-contents__link toc-highlight">1) Unified Image Repository Management</a><li><a href=#2-unified-compile-submit-commands class="table-of-contents__link toc-highlight">2) Unified Compile, Submit Commands</a><li><a href=#3-unified-deployment-debugging-commands class="table-of-contents__link toc-highlight">3) Unified Deployment, Debugging Commands</a></ul><li><a href=#4-other-framework-commands-under-large-repos class="table-of-contents__link toc-highlight">4. Other Framework Commands under Large Repos</a><ul><li><a href=#1-make-cli class="table-of-contents__link toc-highlight">1) <code>make cli</code></a><li><a href=#2-make-up class="table-of-contents__link toc-highlight">2) <code>make up</code></a><li><a href=#3-make-dao class="table-of-contents__link toc-highlight">3) <code>make dao</code></a><li><a href=#4-make-service class="table-of-contents__link toc-highlight">4) <code>make service</code></a><li><a href=#5-make-enums class="table-of-contents__link toc-highlight">5) <code>make enums</code></a><li><a href=#6-more-commands class="table-of-contents__link toc-highlight">6) More Commands</a></ul></ul></ul></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>Follow Us On WeChat</div><ul class="footer__items clean-list"><li class=footer__item><img src=/img/wechat.jpg width=110></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright ©2024 GoFrame OpenSource Team</div></div></div></footer></div>