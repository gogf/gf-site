<!doctype html><html lang=en-US dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-quick/项目脚手架/接口开发/Step3 - 编写api接口定义" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>Step3 - Write API Definition | GoFrame - A powerful framework for faster, easier, and more efficient project development</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://goframe.org/en/quick/scaffold-api-definition><meta data-rh=true property=og:locale content=en_US><meta data-rh=true property=og:locale:alternate content=zh_Hans><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Step3 - Write API Definition | GoFrame - A powerful framework for faster, easier, and more efficient project development"><meta data-rh=true name=description content="Define CRUD APIs in the project's api directory, adopting a RESTful style of API design, using HTTP Method to standardize API requests. API definitions use g.Meta to manage metadata information, including route address, request method, and API description. The request parameters and return data structures define detailed parameter validation rules. Starting with version v1 for API version control to maintain future compatibility. APIs flexibly receive parameters to meet the diverse needs of API requests."><meta data-rh=true property=og:description content="Define CRUD APIs in the project's api directory, adopting a RESTful style of API design, using HTTP Method to standardize API requests. API definitions use g.Meta to manage metadata information, including route address, request method, and API description. The request parameters and return data structures define detailed parameter validation rules. Starting with version v1 for API version control to maintain future compatibility. APIs flexibly receive parameters to meet the diverse needs of API requests."><meta data-rh=true name=keywords content="GoFrame,API Definition,RESTful,HTTP Method,Versioning,Parameter Validation,User Management,Metadata Management,Data Return,Golang"><link data-rh=true rel=icon href=/en/img/favicon.ico><link data-rh=true rel=canonical href=https://goframe.org/en/quick/scaffold-api-definition><link data-rh=true rel=alternate href=https://goframe.org/quick/scaffold-api-definition hreflang=zh-Hans><link data-rh=true rel=alternate href=https://goframe.org/en/quick/scaffold-api-definition hreflang=en-US><link data-rh=true rel=alternate href=https://goframe.org/quick/scaffold-api-definition hreflang=x-default><link data-rh=true rel=preconnect href=https://ZQUL8VI47R-dsn.algolia.net crossorigin><link rel=search type=application/opensearchdescription+xml title="GoFrame - A powerful framework for faster, easier, and more efficient project development" href=/en/opensearch.xml><script src=https://hm.baidu.com/hm.js?38f38a0626fd7805722db06243cd0fa7 async></script><link rel=stylesheet href=/en/assets/css/styles.b09a3e0d.css><script src=/en/assets/js/main.9d91b445.js defer></script><script src=/en/assets/js/runtime~main.ae76532e.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/en/><div class=navbar__logo><img src=/en/img/logo2.png alt="GoFrame Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/en/img/logo2.png alt="GoFrame Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" sidebarid=quickSidebar href=/en/quick/install>Quick Start</a><a class="navbar__item navbar__link" sidebarid=mainSidebar href=/en/docs/core>Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button sidebarid=courseSidebar href=/en/course>Courses</a><ul class=dropdown__menu><li><a class=dropdown__link sidebarid=courseSidebar href=/en/course/bilibili-video>Video Tutorial(Chinese)</a><li><a class=dropdown__link sidebarid=courseStarBookSidebar href=/en/course/starbook>Practical Tutorial - Star English Book</a><li><a class=dropdown__link sidebarid=courseProximaBookSidebar href=/en/course/proxima-book>Microservice Tutorial - Proxima Book</a></ul></div><a class="navbar__item navbar__link" href=/en/examples/grpc>Examples</a><a class="navbar__item navbar__link" href=/en/showcase>Show Case</a><a class="navbar__item navbar__link" href=/en/release/note>Releases</a><a class="navbar__item navbar__link" sidebarid=communitySidebar href=/en/share/group>Community</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class=navbar__link aria-haspopup=true aria-expanded=false role=button href=/en/quick/scaffold-api-definition>2.8.x(Latest)</a><ul class=dropdown__menu><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/en/quick/scaffold-api-definition>2.8.x(Latest)</a><li><a class=dropdown__link href=/en/2.7.x/docs/design>2.7.x</a><li><a class=dropdown__link href=/en/2.6.x/项目开发>2.6.x</a><li><a class=dropdown__link href=/en/2.5.x/项目开发>2.5.x</a><li><a class=dropdown__link href=/en/2.4.x/开发工具>2.4.x</a><li><a class=dropdown__link href=/en/2.3.x/开发工具>2.3.x</a><li><a class=dropdown__link href=/en/2.2.x/开发工具>2.2.x</a><li><a class=dropdown__link href=/en/2.1.x/开发工具>2.1.x</a><li><a class=dropdown__link href=/en/2.0.x/开发工具>2.0.x</a><li><a class=dropdown__link href=/en/1.16.x/开发工具>1.16.x</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/quick/scaffold-api-definition rel="noopener noreferrer" class=dropdown__link lang=zh-Hans>简体中文</a><li><a href=/en/quick/scaffold-api-definition rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en-US>English</a></ul></div><a href=https://github.com/gogf/gf target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/en/quick>Quick Start</a><button aria-label="Expand sidebar category 'Quick Start'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/en/quick/scaffold>Project Scaffold🌟</a><button aria-label="Collapse sidebar category 'Project Scaffold🌟'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/quick/scaffold-index>Introduction</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/quick/scaffold-boost>Project Initialization</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/en/quick/scaffold-api>API Development Tutorial🌟</a><button aria-label="Collapse sidebar category 'API Development Tutorial🌟'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/quick/scaffold-api-sql>Step1 - Design Data Structure</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/quick/scaffold-api-gen-dao>Step2 - Generate dao/do/entity</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/en/quick/scaffold-api-definition>Step3 - Write API Definition</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/quick/scaffold-api-controller>Step4 - Generate Controller</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/quick/scaffold-api-implements>Step5 - Implement API Logic</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/quick/scaffold-api-config-and-route>Step6 - Configuration</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/en/quick/scaffold-api-run-and-test>Step7 - Run and Test</a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/en/quick/scaffold-next>What's Next</a></ul></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/en/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/en/quick/scaffold><span itemprop=name>Project Scaffold🌟</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/en/quick/scaffold-api><span itemprop=name>API Development Tutorial🌟</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Step3 - Write API Definition</span><meta itemprop=position content=3></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 2.8.x(Latest)</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p>In the <code>api</code> directory of the project, we begin defining our <code>CRUD</code> APIs.</p>
<ul>
<li>We use the <code>RESTful</code> style for API design, fully utilizing the <code>GET/POST/PUT/DELETE</code> HTTP Methods. This standardized design results in very elegant APIs.</li>
<li>Similarly, we start with version <code>v1</code>. Using version numbers is a good development habit, which helps in maintaining compatibility in future APIs.</li>
</ul>
<p><img decoding=async loading=lazy alt="user api definition" src=/en/assets/images/QQ_1732094808338-5f9ffafa066a9807c0f608bb42264581.png width=3412 height=2002 class=img_ev3q></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=create><code>Create</code><a href=#create class=hash-link aria-label="Direct link to create" title="Direct link to create">​</a></h2>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_Ktv7>api/user/v1/user.go</div><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> CreateReq </span><span class="token keyword" style=color:#66d9ef>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    g</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Meta </span><span class="token string" style=color:#a6e22e>`path:"/user" method:"post" tags:"User" summary:"Create user"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    Name   </span><span class="token builtin" style=color:#e6db74>string</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>`v:"required|length:3,10" dc:"user name"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    Age    </span><span class="token builtin" style=color:#e6db74>uint</span><span class="token plain">   </span><span class="token string" style=color:#a6e22e>`v:"required|between:18,200" dc:"user age"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> CreateRes </span><span class="token keyword" style=color:#66d9ef>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    Id </span><span class="token builtin" style=color:#e6db74>int64</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>`json:"id" dc:"user id"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Brief Introduction:</p>
<ul>
<li>In API definitions, <code>g.Meta</code> is used to manage API metadata information, which are defined as tags on the <code>g.Meta</code> property. These metadata include <code>path</code> (route address), <code>method</code> (request method), <code>tags</code> (API group for generating API documentation), and <code>summary</code> (API description). These metadata are part of <code>OpenAPIv3</code>, which we won't go into detail here. For those interested, refer to the chapter: <a href=/en/docs/web/api-document-openapiv3>API Document - OpenAPIv3</a>.</li>
<li>The <code>Name</code> and <code>Age</code> attributes here are the parameter definitions for our API. The <code>dc</code> tag is a shorthand for <code>description</code>, indicating the meaning of the parameter; the <code>v</code> tag is a shorthand for <code>valid</code>, indicating the validation rules for the parameter. We use three built-in validation rules here:<!-- -->
<ul>
<li><code>required</code>: The parameter is mandatory.</li>
<li><code>length</code>: Validates the parameter's length.</li>
<li><code>between</code>: Validates the parameter's range.
Learn about these here, and refer to the section <a href=/en/docs/core/gvalid-rules>Data Validation - Rules</a> for more validation rules.</li>
</ul>
</li>
<li>The request parameter structure <code>CreateReq</code> does not specify parameter reception methods because the <code>GoFrame</code> framework supports very flexible parameter reception methods, automatically recognizing <code>Query String/Form/Json/Xml</code> submission methods and mapping the submitted parameters to the request parameter receiving objects.</li>
<li>Only the return parameter structures have <code>json</code> tags because the returned data usually needs to be converted to <code>json</code> format for use by the frontend, and parameter naming in <code>snake</code> style is more in line with frontend naming conventions.</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>tip</div><div class=admonitionContent_BuS1><p>In a <code>RESTful</code> style API design, we typically use <code>POST</code> from the <code>HTTP Method</code> to denote write operations and <code>PUT</code> to denote update operations.</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=delete><code>Delete</code><a href=#delete class=hash-link aria-label="Direct link to delete" title="Direct link to delete">​</a></h2>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_Ktv7>api/user/v1/user.go</div><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> DeleteReq </span><span class="token keyword" style=color:#66d9ef>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    g</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Meta </span><span class="token string" style=color:#a6e22e>`path:"/user/{id}" method:"delete" tags:"User" summary:"Delete user"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    Id     </span><span class="token builtin" style=color:#e6db74>int64</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>`v:"required" dc:"user id"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> DeleteRes </span><span class="token keyword" style=color:#66d9ef>struct</span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token punctuation" style=color:#f8f8f2>}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>The route tag <code>path</code> uses <code>/user/{id}</code>, where <code>{id}</code> indicates a field-matching route, passed through the <code>URL Path</code>, with the parameter name <code>id</code>. As seen, we define an <code>Id</code> parameter in the request parameter object, and the <code>id</code> parameter from the route will <strong>map directly without case sensitivity</strong> to this <code>Id</code>.</p>
<p>For example: In the route <code>/user/1</code>, the <code>id</code> parameter value is <code>1</code>; in the route <code>/user/100</code>, the <code>id</code> parameter value is <code>100</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=update><code>Update</code><a href=#update class=hash-link aria-label="Direct link to update" title="Direct link to update">​</a></h2>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_Ktv7>api/user/v1/user.go</div><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#8292a2;font-style:italic>// Status marks user status.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> Status </span><span class="token builtin" style=color:#e6db74>int</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    StatusOK       Status </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>0</span><span class="token plain"> </span><span class="token comment" style=color:#8292a2;font-style:italic>// User is OK.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    StatusDisabled Status </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>1</span><span class="token plain"> </span><span class="token comment" style=color:#8292a2;font-style:italic>// User is disabled.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> UpdateReq </span><span class="token keyword" style=color:#66d9ef>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    g</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Meta </span><span class="token string" style=color:#a6e22e>`path:"/user/{id}" method:"put" tags:"User" summary:"Update user"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    Id     </span><span class="token builtin" style=color:#e6db74>int64</span><span class="token plain">   </span><span class="token string" style=color:#a6e22e>`v:"required" dc:"user id"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    Name   </span><span class="token operator" style=color:#66d9ef>*</span><span class="token builtin" style=color:#e6db74>string</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>`v:"length:3,10" dc:"user name"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    Age    </span><span class="token operator" style=color:#66d9ef>*</span><span class="token builtin" style=color:#e6db74>uint</span><span class="token plain">   </span><span class="token string" style=color:#a6e22e>`v:"between:18,200" dc:"user age"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    Status </span><span class="token operator" style=color:#66d9ef>*</span><span class="token plain">Status </span><span class="token string" style=color:#a6e22e>`v:"in:0,1" dc:"user status"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> UpdateRes </span><span class="token keyword" style=color:#66d9ef>struct</span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token punctuation" style=color:#f8f8f2>}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Here:</p>
<ul>
<li>We define a user status type <code>Status</code>, using the conventional <code>enums</code> definition style in <code>Golang</code>. Just for understanding here.</li>
<li>The validation for the <code>Status</code> parameter uses the <code>in:0,1</code> rule, which checks that the passed <code>Status</code> value must be one of the two constants we defined, <code>StatusOK/StatusDisabled</code>, i.e., <code>0/1</code>.</li>
<li>The API parameters use pointers to avoid default type values affecting our update API. For example, if <code>Status</code> is not defined as a pointer, it will be affected by the default value <code>0</code>. During processing logic, it's hard to determine whether the caller has passed the parameter and whether to actually change the value to <code>0</code>. By using pointers, when users don't pass the parameter, its default value is <code>nil</code>, making it easy to judge in processing logic.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=getone><code>GetOne</code><a href=#getone class=hash-link aria-label="Direct link to getone" title="Direct link to getone">​</a></h2>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_Ktv7>api/user/v1/user.go</div><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> GetOneReq </span><span class="token keyword" style=color:#66d9ef>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    g</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Meta </span><span class="token string" style=color:#a6e22e>`path:"/user/{id}" method:"get" tags:"User" summary:"Get one user"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    Id     </span><span class="token builtin" style=color:#e6db74>int64</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>`v:"required" dc:"user id"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> GetOneRes </span><span class="token keyword" style=color:#66d9ef>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token operator" style=color:#66d9ef>*</span><span class="token plain">entity</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">User </span><span class="token string" style=color:#a6e22e>`dc:"user"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Here, the return result uses the <code>*entity.User</code> structure, which was generated by the <code>make dao</code> command earlier. This data structure corresponds to the database table fields one-to-one.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=getlist><code>GetList</code><a href=#getlist class=hash-link aria-label="Direct link to getlist" title="Direct link to getlist">​</a></h2>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_Ktv7>api/user/v1/user.go</div><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> GetListReq </span><span class="token keyword" style=color:#66d9ef>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    g</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">Meta </span><span class="token string" style=color:#a6e22e>`path:"/user" method:"get" tags:"User" summary:"Get users"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    Age    </span><span class="token operator" style=color:#66d9ef>*</span><span class="token builtin" style=color:#e6db74>uint</span><span class="token plain">   </span><span class="token string" style=color:#a6e22e>`v:"between:18,200" dc:"user age"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    Status </span><span class="token operator" style=color:#66d9ef>*</span><span class="token plain">Status </span><span class="token string" style=color:#a6e22e>`v:"in:0,1" dc:"user age"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> GetListRes </span><span class="token keyword" style=color:#66d9ef>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    List </span><span class="token punctuation" style=color:#f8f8f2>[</span><span class="token punctuation" style=color:#f8f8f2>]</span><span class="token operator" style=color:#66d9ef>*</span><span class="token plain">entity</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain">User </span><span class="token string" style=color:#a6e22e>`json:"list" dc:"user list"`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>This API can query by <code>Age</code> and <code>Status</code>, returning multiple records <code>List []*entity.User</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=learning-summary>Learning Summary<a href=#learning-summary class=hash-link aria-label="Direct link to Learning Summary" title="Direct link to Learning Summary">​</a></h2>
<p>Sample code for this chapter: <a href=https://github.com/gogf/quick-demo/blob/main/api/user/v1/user.go target=_blank rel="noopener noreferrer">https://github.com/gogf/quick-demo/blob/main/api/user/v1/user.go</a></p>
<p>As shown, defining <code>api</code> APIs in the <code>GoFrame</code> framework's scaffolding project is quite elegant, with support for automatic data validation, metadata injection, flexible route configuration, and other practical features. This method of API definition allows for the automatic generation of API documentation, where the code serves as documentation, ensuring consistency between code and documentation.</p>
<p>Moreover, this is not the full charm of <code>GoFrame</code>, just a single petal on the rose. Next, we will use scaffold tools to automatically generate the corresponding <code>controller</code> control code for us.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href="https://github.com/gogf/gf-site/blob/main/docs/quick/项目脚手架/接口开发/Step3 - 编写api接口定义.md" target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2024-11-25T13:33:36.000Z itemprop=dateModified>Nov 25, 2024</time></b> by <b>John</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/en/quick/scaffold-api-gen-dao><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Step2 - Generate dao/do/entity</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/en/quick/scaffold-api-controller><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Step4 - Generate Controller</div></a></nav><div class=docusaurus-mt-lg></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#create class="table-of-contents__link toc-highlight"><code>Create</code></a><li><a href=#delete class="table-of-contents__link toc-highlight"><code>Delete</code></a><li><a href=#update class="table-of-contents__link toc-highlight"><code>Update</code></a><li><a href=#getone class="table-of-contents__link toc-highlight"><code>GetOne</code></a><li><a href=#getlist class="table-of-contents__link toc-highlight"><code>GetList</code></a><li><a href=#learning-summary class="table-of-contents__link toc-highlight">Learning Summary</a></ul></div></div></div></div></main></div></div></div><footer class=footer><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>Follow Us On WeChat</div><ul class="footer__items clean-list"><li class=footer__item><img src=/img/wechat.jpg width=110></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright ©2024 GoFrame OpenSource Team</div></div></div></footer></div>