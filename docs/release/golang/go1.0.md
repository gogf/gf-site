---
title: Go 1 (2012-03-28)
sidebar_position: 200
---

Go 1 是 Go 语言的第一个正式稳定版本，发布于 2012 年 3 月 28 日。它标志着 Go 语言的成熟，并带来了极其重要的**兼容性承诺**。

## 主要变化

### 兼容性承诺

Go 1 最重要的特性不是代码的变更，而是对未来的承诺。在 Go 1.x 的整个生命周期内，符合 Go 1 规范的代码将能够持续编译和运行，不会因为后续版本的发布而破坏（极少数特定情况除外）。这为企业级应用、长期项目和书籍教程提供了坚实的基础。

### `go` 命令

Go 1 引入了统一的 `go` 命令行工具，彻底改变了 Go 项目的构建和管理方式：

- 直接使用 Go 源码中的 import 信息来管理依赖和构建过程，不再需要编写复杂的 Makefiles
- 集成了获取 (`get`)、构建 (`build`)、安装 (`install`)、测试 (`test`)、文档 (`doc`) 等功能
- 确立了 `GOPATH` 工作区结构（`src`, `pkg`, `bin`）

## 语言变更

Go 1 对语言进行了一些清理和改进，虽然引入了一些不兼容变更，但为了长期的稳定性是必要的。

### 语言特性

- **`rune` 类型**：引入 `rune` 作为 `int32` 的别名，用于表示 Unicode 码点
- **`error` 接口**：引入内置的 `error` 接口类型，取代了之前的 `os.Error`
- **`append` 支持字符串**：`append` 函数现在可以直接将字符串追加到 `[]byte` 切片
- **Map 删除**：引入内置函数 `delete(m, k)` 用于从 map 中删除元素
- **结构体相等性**：结构体 (Struct) 和数组 (Array) 现在支持 `==` 和 `!=` 比较，可以用作 map 的 key
- **复合字面量简化**：在数组、切片或 map 的复合字面量中，如果元素是指针类型，可以省略类型声明

### 行为变更

- **Map 迭代顺序**：明确规定 Map 的迭代顺序是随机的，程序不应依赖 Map 的遍历顺序
- **`close` 检查**：关闭一个仅接收 (receive-only) 的 channel 现在是编译时错误

## 标准库

### 包结构调整

- **`os.Error` 移除**：被内置的 `error` 接口和 `errors` 包取代
- **`syscall` 错误**：现在返回 `error` 接口而不是 `int` 错误码
- **包路径重组**：许多包被移动或重命名以形成更合理的层级结构
  - `http` → `net/http`
  - `template` → `text/template`
  - `exec` → `os/exec`
  - `utf8` → `unicode/utf8`

### 核心包重设计

- **`time` 包**：完全重写，引入了 `time.Time`（值类型）和 `time.Duration` 类型，提供纳秒级精度
- **`os.FileInfo`**：从结构体变为接口，提供更抽象的文件信息访问方式
- **`regexp` 包**：重写并采用 RE2 语法，保证线性时间复杂度的执行性能

## 工具链

- **`cgo`**：改进了对 C 语言互操作的支持
- **`go fix`**：提供强大的代码迁移工具，帮助开发者自动将旧版本代码更新到 Go 1 标准
- **`gofmt`**：代码格式化工具进一步标准化，成为 Go 生态中不可或缺的一部分

## 参考资源

更多详细信息请参考官方发布说明：[Go 1.0 Release Notes](https://go.dev/doc/go1)
