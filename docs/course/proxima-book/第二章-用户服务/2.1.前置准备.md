本章都是一些基础准备，和单体服务一模一样。

## 代码初始化
---
`GoFrame`为我们准备好了初始化微服务仓库的命令，执行以下命令，建立名为`user`的服务，并保存在`app`目录下。

```bash
$ gf init app/user -a
initializing...
initialization done! 
you can now run "cd app/user && gf run main.go" to start your journey, enjoy!
```

成功后，会在`app`下建立一个微服务，它其实和单体服务没什么两样，就是缺少了`go.mod`和`go.sum`文件。

把初始的示例文件全部删除，留下一个空白的环境，用作后续开发。删除如下目录内的所有文件：
```text
api/*
internal/controller/*
```

编辑`cmd`文件，去掉不必要的代码。

*app/user/internal/cmd/cmd.go*
```go
package cmd  
  
import (  
    "context"  
  
    "github.com/gogf/gf/v2/frame/g"
    "github.com/gogf/gf/v2/net/ghttp"
    "github.com/gogf/gf/v2/os/gcmd"
)  
  
var (  
    Main = gcmd.Command{  
       Name:  "main",  
       Usage: "main",  
       Brief: "start http server",  
       Func: func(ctx context.Context, parser *gcmd.Parser) (err error) {  
          s := g.Server()  
          s.Group("/", func(group *ghttp.RouterGroup) {  
             group.Middleware(ghttp.MiddlewareHandlerResponse)  
          })  
          s.Run()  
          return nil  
       },  
    }  
)
```

代码完成后，我们就可以进入微服务仓库，和单体服务走一样的流程进行开发。

```bash
$ cd app/user
```
## 生成数据模型
---
在`user`下，执行`SQL`语句，建立保存用户数据的表：
```sql
CREATE TABLE users (
  id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(50) NOT NULL,
  password CHAR(32) NOT NULL,
  email VARCHAR(100),
  created_at DATETIME,
  updated_at DATETIME
);
```

修改配置文件，生成数据模型，这里和单体服务一样。

*app/user/hack/config.yaml*
```yaml
gfcli:  
  gen:  
    dao:  
      - link: "mysql:root:12345678@tcp(srv.com:3306)/user"  
        descriptionTag: true
```

```bash
$ gf gen dao
generated: D:\project\proxima\app\user\internal\dao\users.go
generated: D:\project\proxima\app\user\internal\dao\internal\users.go
generated: D:\project\proxima\app\user\internal\model\do\users.go
generated: D:\project\proxima\app\user\internal\model\entity\users.go
done!
```

> 注意，应该在微服务仓库下执行`gf gen dao`命令，也就是`app/user`目录下，后续的其他相关操作开发也类似。

## 引入数据库驱动
---
这里和单体服务一样，在`main.go`下引入。

*app/user/main.go*
```go
package main  
  
import (  
    _ "github.com/gogf/gf/contrib/drivers/mysql/v2"
)
  
func main() {  
    cmd.Main.Run(gctx.GetInitCtx())  
}
```