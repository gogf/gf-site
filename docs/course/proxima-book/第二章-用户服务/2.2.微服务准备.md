本章是一些微服务准备，和单体服务不太一致。

## 生成数据模型
---
*app/user/hack/config.yaml*
```bash
gfcli:  
  gen:  
    dao:  
      - link: "mysql:root:12345678@tcp(srv.com:3306)/user"  
        descriptionTag: true  
  
    pbentity:  
      - link: "mysql:root:12345678@tcp(srv.com:3306)/user"
```

```bash
$ gf gen pbentity
generated: D:\project\proxima\app\user\manifest\protobuf\pbentity\users.proto
done!
```

### 与 `gen dao` 的差别

- `gen dao` 生成的数据文件是`go`文件，主要在微服务内部使用，例如`ORM`操作；
- `gen pbentity`生成的数据文件是`proto`文件，主要用作`gRPC`微服务之间的通讯。

## 配置文件
---
和`HTTP`服务一样，`gRPC`微服务也需要有自己的配置文件。

*app/user/manifest/config/config.yaml*
```go
grpc:  
  name:             "user"        # 服务名称  
  address:          ":32001"      # 自定义服务监听地址  
  
database:  
  default:  
    link:  "mysql:root:12345678@tcp(srv.com:3306)/user"  
    debug: true
```

`gprc`字段定义了两个字段，微服务名称和监听端口，微服务名称将用作服务发现。这两个是必要的，完整配置见[配置模板](https://goframe.org/docs/micro-service/config#%E9%85%8D%E7%BD%AE%E6%A8%A1%E6%9D%BF)。