接下来，我们将服务注册到`etcd`中。先回到主目录安装`etcd`组件：
```bash
$ go get -u github.com/gogf/gf/contrib/registry/etcd/v2
```

添加配置文件：
*app/user/manifest/config/etcd.yaml*
```yaml
etcd:  
  address: "srv.com:2379"
```

在入口文件添加注册逻辑：
*app/user/main.go*
```go
package main  
  
import (  
	_ "github.com/gogf/gf/contrib/drivers/mysql/v2"  
	
	"github.com/gogf/gf/contrib/registry/etcd/v2"  
	"github.com/gogf/gf/contrib/rpc/grpcx/v2"  
	"github.com/gogf/gf/v2/frame/g"  
	"github.com/gogf/gf/v2/os/gctx"  
	  
	"proxima/app/user/internal/cmd"
)
  
func main() {  
    var ctx = gctx.New()  
    conf, err := g.Cfg("etcd").Get(ctx, "etcd.address")  
    if err != nil {  
       panic(err)  
    }  
  
    var address = conf.String()  
    grpcx.Resolver.Register(etcd.New(address))  
  
    cmd.Main.Run(ctx)  
}
```

重新运行项目，查看服务是否注册成功。进入`etcd`容器，执行命令：
```bash
$ etcdctl get "" --prefix --keys-only
```

这条命令查看`etcd`中所有存在的`key`，在其中我们会看到注册的服务：
```text
/service/default/default/user/latest/{IP}:32001
```

> 服务注册可以理解成`DNS`域名解析，配置文件中的服务名称`grpc.name`类比成域名。
